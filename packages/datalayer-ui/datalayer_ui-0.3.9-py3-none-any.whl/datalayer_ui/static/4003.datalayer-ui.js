"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[4003],{34003:(e,l,s)=>{s.r(l),s.d(l,{CourseTakeLesson:()=>C,default:()=>b});var n=s(16909),i=s(97663),t=s(15358),a=s(82176),r=s(34166),o=s(17154),d=s(36061),c=s(68110),u=s(97666),h=s(46523),m=s(38267),x=s(23577),v=s(85730),j=s(45741),p=s(68495),f=s(35928),k=s(19459),g=s(47011);const C=()=>{const{accountHandle:e,spaceHandle:l,courseId:s,lessonId:C}=(0,i.UO)();if(!C)return(0,g.jsx)(g.Fragment,{});const b=(0,v.a)(),y=(0,k.qX)(),Z=(0,h.qL)(),{confirmCourseItemCompletion:w,getLesson:I,getStudent:T,refreshLesson:D,refreshStudent:z}=(0,j.Y)(),[S,L]=(0,n.useState)("lesson"),[V,B]=(0,n.useState)(I(C)),[P,q]=(0,n.useState)(!1),[F,M]=(0,n.useState)(!1),U=(0,p.s)(),{enqueueToast:_}=(0,f.p)(),A=(e,l)=>{l.preventDefault(),y.layout().resetRightPortal(),L(e)};return(0,n.useEffect)((()=>(y.layout().showBackdrop(),D(C).then((e=>{if(y.layout().hideBackdrop(),e.success){const e=I(C);e?(B(e),y.layout().setItem(e)):U("/")}})).finally((()=>{y.layout().hideBackdrop()})),()=>{B(void 0),Z.reset(),y.layout().setItem(void 0)})),[C]),(0,n.useEffect)((()=>(z(s,b?.id).then((e=>{if(e.success){const e=T(s,b?.id),l=e?.studentItems?.get(C);l&&q(l.completed)}})),()=>{B(void 0),Z.reset(),y.layout().setItem(void 0)})),[C]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.m,{children:(0,g.jsxs)(a.Z,{display:"flex",children:[(0,g.jsx)(a.Z,{flex:1,children:(0,g.jsx)(r.Z,{sx:{fontSize:3},children:"Course lesson"})}),(0,g.jsxs)(a.Z,{children:[(0,g.jsx)(o.Z,{children:"Completed"}),(0,g.jsx)(d.Z,{onClick:()=>{M(!0),w(s,"lesson",C,!P).then((e=>{e.success&&(_(e.message,{variant:"success"}),q(!P))})).finally((()=>{M(!1)}))},checked:P,size:"small",loading:F,"aria-labelledby":"switchLabel"})]}),(0,g.jsx)(a.Z,{ml:3,children:(0,g.jsx)(c.r,{variant:"default",size:"small",onClick:()=>U(`/${e}/${l}/course/${s}/progress`),children:"My course progress"})})]})}),V&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.Z,{sx:{mt:3,mb:3},children:[(0,g.jsx)(u.Z.Link,{href:"",selected:"lesson"===S,onClick:e=>A("lesson",e),children:"Lesson"}),(0,g.jsx)(u.Z.Link,{href:"",selected:"comments"===S,onClick:e=>A("comments",e),children:"Comments"})]}),"lesson"===S&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.Z,{children:V.nbformat&&(0,g.jsx)(m.a,{id:C,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",readonly:!1,cellMetadataPanel:!1,nbformat:V.nbformat,CellSidebar:x.Q})})}),"comments"===S&&(0,g.jsx)(a.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,g.jsx)(a.Z,{})})]})]})},b=C},23577:(e,l,s)=>{s.d(l,{Q:()=>h});var n=s(47011),i=s(16909),t=s(70994),a=s(9521),r=s(81158),o=s(34441),d=s(26766),c=s(46523),u=s(30540);const h=e=>{const{notebookId:l,cellNodeId:s,nbgrader:h}=e,[m,x]=(0,i.useState)(!1),v=(0,c.ZP)(),j=v.selectActiveCell(l),p=j?.layout;if(p){const e=p.widgets[0];e?.node.id===s&&(m||x(!0)),e?.node.id!==s&&m&&x(!1)}return m?j?(0,n.jsxs)(t.Z,{className:u.UI,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,n.jsx)(a.P,{children:(0,n.jsx)(d.Z,{notebookId:l,cell:j,nbgrader:h})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Run cell",leadingVisual:o.XCv,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.run(l)},children:"Run"})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Insert code cell above",leadingVisual:o.g8U,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:l,cellType:"code"})},children:"Code"})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Insert markdown cell above",leadingVisual:o.g8U,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:l,cellType:"markdown"})},children:"Markdown"})}),(0,n.jsx)(t.Z,{children:"code"===j.model.type?(0,n.jsx)(r.r,{title:"Convert to markdow cell",leadingVisual:o.Ps4,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:l,cellType:"markdown"})},children:"To Markdown"}):(0,n.jsx)(r.r,{title:"Convert to code cell",leadingVisual:o.Ps4,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:l,cellType:"code"})},children:"To Code"})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Insert markdown cell below",leadingVisual:o.v4q,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:l,cellType:"markdown"})},children:"Markdown"})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Insert code cell below",leadingVisual:o.v4q,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:l,cellType:"code"})},children:"Code"})}),(0,n.jsx)(t.Z,{children:(0,n.jsx)(r.r,{title:"Delete cell",leadingVisual:o.b0D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.delete(l)},children:"Delete"})})]}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{})}}}]);