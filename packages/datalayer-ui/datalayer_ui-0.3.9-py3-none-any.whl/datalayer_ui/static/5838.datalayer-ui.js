"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5838],{55838:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeAssignment:()=>v,default:()=>S});var n=t(16909),l=t(46744),a=t(97663),r=t(15358),i=t(82176),d=t(34166),o=t(68110),c=t(43275),u=t(46523),h=t(38267),m=t(53969),x=t(19459),g=t(77086),j=t(85730),f=t(45741),y=t(68495),p=t(17154),Z=t(47011);const k=e=>{const{studentItem:s}=e;return s&&s?.nbgrades?(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(d.Z,{sx:{fontSize:1},children:"Grades"})}),(0,Z.jsx)(i.Z,{mt:3,children:s?.nbgrades.map((e=>(0,Z.jsx)(i.Z,{children:(0,Z.jsxs)(p.Z,{style:{fontSize:"small"},children:[e.grade_id_s,": ",e.score_f]})})))}),(0,Z.jsx)(i.Z,{mt:3,children:(0,Z.jsx)(d.Z,{sx:{fontSize:1},children:"Total"})}),(0,Z.jsxs)(i.Z,{mt:3,children:[s?.nbgradesTotalScore," / ",s?.nbgradesTotalPoints]})]}):(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(d.Z,{sx:{fontSize:1},children:"Grades"})}),(0,Z.jsx)(i.Z,{mt:3,children:"Please grade your assignment."})]})},b=e=>{const{notebookId:s}=e,{grade:t}=(0,g.lt)(),n=u.MY.getState().selectNotebook(s);return(0,Z.jsxs)(i.Z,{display:"flex",children:[(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.Mfv,onClick:()=>t(new Date),children:"Grade"})}),"busy"!==n?.kernelStatus&&(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.o1U,onClick:e=>u.MY.getState().runAll(s),children:"Run all"})}),"busy"===n?.kernelStatus&&(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(o.r,{variant:"danger",size:"small",leadingVisual:c.wNq,onClick:e=>u.MY.getState().interrupt(s),children:"Interrupt"})})]})},v=()=>{const{accountHandle:e,spaceHandle:s,courseId:t,assignmentId:p}=(0,a.UO)();if(!t||!p)return(0,Z.jsx)(Z.Fragment,{});const v=(0,j.a)(),S=(0,x.qX)(),{gradeRequest:I}=(0,g.lt)(),C=(0,u.qL)(),z=`${p}-student`,{getAssignmentForStudent:B,gradeAssignmentForStudent:F,refreshAssignmentForStudent:w,resetAssignmentForStudent:A}=(0,f.Y)(),M=C.selectNotebookModel(z),[_]=(0,n.useState)("assignment"),N=(0,y.s)(),[P,R]=(0,n.useState)(B(p)),[T,V]=(0,n.useState)(),q=e=>{V(e);const s=(0,l.createPortal)((0,Z.jsx)(k,{studentItem:e}),document.getElementById("right-panel-id"));S.layout().setRightPortal({portal:s,pinned:!1})};return(0,n.useEffect)((()=>(S.layout().showBackdrop(),w(t,v,p).then((e=>{if(e.success){const e=B(p);e?(R(e),q(e?.studentItem),S.layout().setItem(e)):N("/")}})).finally((()=>{S.layout().hideBackdrop()})),()=>{R(void 0),C.reset(),S.layout().setItem(void 0)})),[p]),(0,n.useEffect)((()=>{I&&M&&(S.layout().showBackdrop("We are grading your assignment. This may take some time..."),F(t,v,p,M?.model).then((e=>{if(e.success){const e=B(p);q(e?.studentItem),e?S.layout().setItem(e):N("/")}})).finally((()=>{S.layout().hideBackdrop()})))}),[I]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.m,{children:(0,Z.jsxs)(i.Z,{display:"flex",children:[(0,Z.jsx)(i.Z,{flex:1,children:(0,Z.jsx)(d.Z,{sx:{fontSize:3},children:"Course assignment"})}),(0,Z.jsx)(b,{notebookId:z}),(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.eJg,onClick:e=>{e.preventDefault(),S.layout().showBackdrop("Resetting your assignment..."),A(t,v,p).then((e=>{if(S.layout().hideBackdrop(),e.success){const e=B(p);e?(R(e),q(e?.studentItem),S.layout().setItem(e)):N("/")}})).finally((()=>{S.layout().hideBackdrop()}))},children:"Reset"})}),(0,Z.jsx)(i.Z,{ml:3,children:(0,Z.jsx)(o.r,{variant:"default",size:"small",onClick:()=>N(`/${e}/${s}/course/${t}/progress`),children:"My course progress"})})]})}),P&&(0,Z.jsxs)(Z.Fragment,{children:["assignment"===_&&P&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(h.a,{id:z,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",cellMetadataPanel:!1,nbgrader:!1,nbformat:P.nbformat,CellSidebar:m.l})})}),"notes"===_&&(0,Z.jsx)(i.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,Z.jsx)(i.Z,{})})]})]})},S=v},53969:(e,s,t)=>{t.d(s,{l:()=>c});var n=t(47011),l=t(16909),a=t(70994),r=t(81158),i=t(34441),d=t(46523),o=t(30540);const c=e=>{const{notebookId:s}=e,t=(0,d.ZP)(),[c,u]=(0,l.useState)(!1),h=t.selectActiveCell(s),m=h?.layout;if(m){const s=m.widgets[0];c||s?.node.id!==e.cellNodeId||u(!0),c&&s?.node.id!==e.cellNodeId&&u(!1)}return c?h?(0,n.jsx)(a.Z,{className:o.UI,sx:{"& p":{marginBottom:"0 !important"}},children:(0,n.jsx)(a.Z,{children:(0,n.jsx)(r.r,{trailingVisual:i.o1U,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),t.run(s)},children:"Run"})})}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{})}}}]);