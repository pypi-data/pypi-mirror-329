"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5521],{21596:(e,t,a)=>{a.d(t,{iC:()=>s,lA:()=>o});var r=a(16909),d=a(43118),n=(a(59555),a(54362));class s extends n.$L{static create(e){return new class extends s{render(){return e}}}onUpdateRequest(e){this.renderPromise=this.renderDOM()}onAfterAttach(e){d.pB.sendMessage(this,n.$L.Msg.UpdateRequest)}onBeforeDetach(e){}renderDOM(){return new Promise((e=>{}))}renderPromise}class o extends r.Component{constructor(e){super(e),this.state={value:[this.props.initialSender,this.props.initialArgs]}}componentDidMount(){this.props.signal.connect(this.slot)}componentWillUnmount(){this.props.signal.disconnect(this.slot)}slot=(e,t)=>{this.props.shouldUpdate&&!this.props.shouldUpdate(e,t)||this.setState({value:[e,t]})};render(){return this.props.children(...this.state.value)}}},26766:(e,t,a)=>{a.d(t,{o:()=>u,Z:()=>g});var r,d=a(47011),n=a(16909),s=a(51582),o=a(19257),l=a(34441);!function(e){e[e.NotGraded=0]="NotGraded",e[e.AutogradedAnswer=1]="AutogradedAnswer",e[e.AutogradedTest=2]="AutogradedTest",e[e.ManuallyGradedTask=3]="ManuallyGradedTask",e[e.ManuallyGradedAnswer=4]="ManuallyGradedAnswer",e[e.ReadonlyGraded=5]="ReadonlyGraded"}(r||(r={}));const i=r;var c=a(82628);const u=e=>{const{cell:t}=e,[a,u]=(0,n.useState)((e=>{const t=e.model.getMetadata("nbgrader");if(!t)return r.NotGraded;const a=t.grade,d=t.solution,n=t.locked,s=t.task;return a||!d||n?!a&&!d&&n&&s?r.ManuallyGradedTask:a&&!d&&n?r.AutogradedTest:a&&d&&!n?r.ManuallyGradedAnswer:a||d||!n||s?r.NotGraded:r.ReadonlyGraded:r.AutogradedAnswer})(t)),[g,h]=(0,n.useState)(t.model.getMetadata("nbgrader")??{grade_id:(0,c.AN)(),points:1});(0,n.useEffect)((()=>{h({grade_id:g.grade_id??(0,c.AN)(),points:g.points??1})}),[g]);const p=(e,t)=>{switch(t){case i.NotGraded:e.model.deleteMetadata("nbgrader"),u(i.NotGraded);break;case i.AutogradedAnswer:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!0,locked:!1,task:!1,grade_id:(0,c.AN)(),points:1}),u(i.AutogradedAnswer);break}case i.AutogradedTest:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!0,solution:!1,locked:!1,task:!1,grade_id:(0,c.AN)(),points:1}),u(i.AutogradedTest);break}case i.ManuallyGradedAnswer:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!0,solution:!0,locked:!1,task:!1,grade_id:(0,c.AN)(),points:1}),u(i.ManuallyGradedAnswer);break}case i.ManuallyGradedTask:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!0,grade_id:(0,c.AN)(),points:1}),u(i.ManuallyGradedTask);break}case i.ReadonlyGraded:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!1}),u(i.ReadonlyGraded);break}}};return(0,d.jsxs)(s.S,{showDividers:!0,children:[(0,d.jsx)(s.S.Divider,{}),(0,d.jsxs)(s.S.Group,{title:"NbGrader Cell Type",variant:"subtle",children:[(0,d.jsxs)(s.S.Item,{onSelect:e=>p(t,i.NotGraded),children:[a===i.NotGraded&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"None",(0,d.jsx)(s.S.Description,{variant:"block",children:"Not a grader cell."})]}),(0,d.jsxs)(s.S.Item,{onSelect:e=>p(t,i.AutogradedAnswer),children:[a===i.AutogradedAnswer&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"Autograded answer",(0,d.jsx)(s.S.Description,{variant:"block",children:"An autograded answer cell."})]}),(0,d.jsxs)(s.S.Item,{role:"listitem",onClick:e=>p(t,i.AutogradedTest),children:[a===i.AutogradedTest&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"Autograded test",(0,d.jsx)(s.S.Description,{variant:"block",children:"An autograded test cell."})]}),(0,d.jsxs)(s.S.Item,{onSelect:e=>p(t,i.ManuallyGradedTask),children:[a===i.ManuallyGradedTask&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"Manually graded task",(0,d.jsx)(s.S.Description,{variant:"block",children:"A manually graded task cell."})]}),(0,d.jsxs)(s.S.Item,{onSelect:e=>p(t,i.ManuallyGradedAnswer),children:[a===i.ManuallyGradedAnswer&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"Manually graded answer",(0,d.jsx)(s.S.Description,{variant:"block",children:"A manually graded answer cell."})]}),(0,d.jsxs)(s.S.Item,{onSelect:e=>p(t,i.ReadonlyGraded),children:[a===i.ReadonlyGraded&&(0,d.jsx)(s.S.LeadingVisual,{children:(0,d.jsx)(l.nQG,{})}),"Readonly",(0,d.jsx)(s.S.Description,{variant:"block",children:"A readonly grader cell."})]})]}),a!==i.NotGraded&&(0,d.jsxs)(s.S.Group,{title:"NbGrader Metadata",variant:"subtle",children:[(0,d.jsxs)(s.S.Item,{onSelect:e=>e.preventDefault(),children:["Grade ID:"," ",(0,d.jsx)(o.Z,{block:!0,value:g.grade_id,onChange:e=>{e.preventDefault(),((e,t)=>{const a=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...a,grade_id:t}),h({...g,grade_id:t})})(t,e.target.value)}})]}),(0,d.jsxs)(s.S.Item,{children:["Points:"," ",(0,d.jsx)(o.Z,{block:!0,value:g.points,onChange:e=>{e.preventDefault(),((e,t)=>{const a=+t;if(!isNaN(a)){const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,points:a}),h({...g,points:a})}})(t,e.target.value)}})]})]})]})},g=u},30540:(e,t,a)=>{a.d(t,{UI:()=>i,eF:()=>c});var r=a(47011),d=a(16909),n=a(46744),s=a(82628),o=a(21596),l=a(46523);const i="dla-CellSidebar-Container";class c extends o.iC{_commands;constructor(e,t,a,o){super(),this._commands=o,this.addClass("jp-CellHeader");const c=(0,s.ZI)();this.node.id=c;const u={notebookId:t,cellNodeId:c,command:this._commands,nbgrader:a},g=(0,d.createElement)(e,u),h=(0,r.jsx)("div",{className:i,children:g}),p=(0,n.createPortal)(h,this.node);l.MY.getState().addPortals({id:t,portals:[p]})}}},80469:(e,t,a)=>{a.d(t,{Og:()=>s,XN:()=>l,ex:()=>c,uU:()=>o});var r=a(17017),d=a(30540),n=a(31877);const s="text/x-ipython",o="application/sql",l=e=>{const t=e.model?.getMetadata("datalayer");return!!t&&!0===t.sql};class i extends n.O7{constructor(e){super(e)}}class c extends r.P.ContentFactory{CellSidebar;notebookId;nbgrader;commands;constructor(e,t,a,r,d){super(r),this.CellSidebar=d,this.notebookId=e,this.nbgrader=t,this.commands=a}_updateSQLEditor=e=>{l(e)&&(e.editor.model.mimeType=o)};_updateEditor=e=>{e.editor&&(e.editor.model.mimeTypeChanged.connect(((t,a)=>{this._updateSQLEditor(e)})),this._updateSQLEditor(e))};createNotebook(e){return super.createNotebook(e)}createCellHeader(){return this.CellSidebar?new d.eF(this.CellSidebar,this.notebookId,this.nbgrader,this.commands):super.createCellHeader()}createCodeCell(e){const t=new i(e);return t.inViewport&&this._updateEditor(t),t.displayChanged.connect((()=>{this._updateEditor(t)})),t.inViewportChanged.connect((()=>{this._updateEditor(t)})),t}}},15889:(e,t,a)=>{a.d(t,{a:()=>o});var r=a(47011),d=a(70994),n=a(33583),s=a(1753);function o(e){const{message:t}=e;return(0,r.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px",zIndex:10999},children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{mr:3,children:(0,r.jsx)(n.Z,{size:"large"})}),(0,r.jsx)(d.Z,{children:(0,r.jsx)(s.Z,{sx:{fontSize:5,color:"white"},children:t})})]}):(0,r.jsx)(n.Z,{size:"large"})})}},92664:(e,t,a)=>{async function r({url:e,token:t}){const a={Accept:"application/json"};t&&(a.Authorization=`Bearer ${t}`);const r=await fetch(e,{method:"GET",headers:a,credentials:t?"include":"omit",mode:"cors",cache:"no-store"});if(r.ok)return(await r.json()).sessionId;throw console.error("Failed to fetch session ID.",r),new Error("Failed to fetch session ID.")}a.d(t,{J:()=>r})},17389:(e,t,a)=>{a.d(t,{W8:()=>n,jf:()=>o});var r=a(51834),d=a(19316);const n="api/collaboration/room",s="api/collaboration/session";async function o(e,t,a,n){const o=n??d.ServerConnection.makeSettings(),l=r.URLExt.join(o.baseUrl,s,encodeURIComponent(a)),i={method:"PUT",body:JSON.stringify({format:e,type:t})};let c;try{c=await d.ServerConnection.makeRequest(l,i,o)}catch(e){throw new d.ServerConnection.NetworkError(e)}let u=await c.text();if(u.length>0)try{u=JSON.parse(u)}catch(e){console.log("Not a JSON response body.",c)}if(!c.ok)throw new d.ServerConnection.ResponseError(c,u.message||u);return u}}}]);