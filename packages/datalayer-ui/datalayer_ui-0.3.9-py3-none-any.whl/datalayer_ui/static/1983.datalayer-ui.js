"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1983],{25255:(e,n,i)=>{i.d(n,{Z:()=>o});var s=i(45205),t=i(68110),l=i(43275),a=i(16909),r=i(47011);function o(e){const{commandRegistry:n,kernelDesc:i,save:o,sessionConnection:d}=e,[c,u]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=()=>{u(d?.kernel?.status)};return e(),d?.statusChanged.connect(e),d?.connectionStatusChanged.connect(e),()=>{d?.statusChanged.disconnect(e),d?.connectionStatusChanged.disconnect(e)}}),[d]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.r,{variant:"invisible",size:"small",leadingVisual:l.Mfv,disabled:void 0===i?.location,onClick:o,children:"Save"}),(0,r.jsx)(t.r,{variant:"invisible",size:"small",leadingVisual:l.o1U,disabled:!i?.location||"busy"===c,onClick:e=>{n?.execute(s.zl.runAll)},children:"Run all"}),(0,r.jsx)(t.r,{variant:"invisible",size:"small",leadingVisual:l.wNq,disabled:!i?.location||"busy"!==c,onClick:e=>{n?.execute(s.zl.interrupt)},children:"Interrupt"})]})}},41983:(e,n,i)=>{i.r(n),i.d(n,{AssignmentEdit:()=>V,default:()=>T});var s=i(16909),t=i(97663),l=i(88625),a=i(15358),r=i(82176),o=i(34166),d=i(23363),c=i(68110),u=i(97666),h=i(44860),m=i(79424),v=i(88567),g=i(1481),p=i(67369),x=i(43275),j=i(87602),b=i(46523),f=i(38267),k=i(23577),y=i(53969),C=i(85730),Z=i(68495),S=i(45741),w=i(35928),I=i(19459),z=i(52999),D=i(25255),N=i(47011);const V=()=>{const{assignmentId:e}=(0,t.UO)();if(!e)return(0,N.jsx)(N.Fragment,{});const n=(0,C.a)(),i=(0,l.N)(),V=(0,Z.s)(),T=(0,I.qX)(),B=(0,b.qL)(),A=(0,z.D1)(),R=T.layout().space,P=A.saveRequest,U=B.selectNotebookModel(e),{cloneAssignment:M,getAssignment:q,getAssignmentStudentVersion:L,refreshAssignment:E,updateNotebookModel:F,updateNotebook:O}=(0,S.Y)(),{enqueueToast:J}=(0,w.p)(),[_,Q]=(0,s.useState)("editor"),[H,X]=(0,s.useState)(!1),[$,G]=(0,s.useState)(void 0),[Y,K]=(0,s.useState)([]),[W,ee]=(0,s.useState)(),[ne,ie]=(0,s.useState)({name:"",description:""}),[se,te]=(0,s.useState)({name:void 0,description:void 0}),le=(e,n)=>{n.preventDefault(),T.layout().resetRightPortal(),K([]),Q(e)};(0,s.useEffect)((()=>{if(e&&"editor"===_)return T.layout().showBackdrop("Loading the assignment..."),E(e).then((n=>{if(n.success){const n=q(e);n?(ee(n),T.layout().setItem(n),ie({name:n.name,description:n.description})):V("/")}})).finally((()=>{T.layout().hideBackdrop()})),()=>{B.reset(),T.layout().setItem(void 0)}}),[e,_]);const ae=()=>{U?.model?.cells&&(T.layout().showBackdrop("Saving the assignment..."),F(e,U.model.toJSON()).then((e=>{e.success&&(J("The assignment is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),ee({...W,nbformat:U.model.toJSON()}))})).finally((()=>{T.layout().hideBackdrop()})))},re=n=>{U?.model?.cells&&(n.preventDefault(),T.layout().showBackdrop("Generating the student version of the assignment..."),F(e,U.model.toJSON()),L(e).then((e=>{X(!0),le("student",n),e.success?G(JSON.parse(e.notebook)):e.errors&&K(e.errors)})).finally((()=>{T.layout().hideBackdrop()})))};(0,s.useEffect)((()=>{P&&W&&ae()}),[P]),(0,s.useEffect)((()=>{te({...se,name:void 0===ne.name?void 0:ne.name.length>2,description:void 0===ne.description?void 0:ne.description.length>2})}),[ne]);const oe=(0,s.useCallback)((async s=>{i({title:"Are you sure?",content:"Please confirm you want to clone this assignment in your private library."}).then((i=>{i&&(T.layout().showBackdrop(),M(e).then((e=>{e.success&&(J(e.message,{variant:"success"}),T.layout().triggerItemsRefresh(),V(`/${n?.handle}/library/assignments`))})).finally((()=>{T.layout().hideBackdrop()})))}))}),[i,W]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(a.m,{children:(0,N.jsxs)(r.Z,{display:"flex",children:[(0,N.jsx)(r.Z,{flex:1,children:(0,N.jsx)(o.Z,{sx:{fontSize:3},children:"Assignment editor"})}),"student"!==_&&(0,N.jsxs)(r.Z,{display:"flex",children:[(0,N.jsx)(D.Z,{commandRegistry:B.selectNotebookAdapter(e)?.commands,save:ae}),(0,N.jsx)(d.Z,{children:(0,N.jsx)(c.r,{variant:"invisible",size:"small",leadingVisual:j.Z,onClick:e=>re(e),children:"Student version"})}),W&&R&&(0,N.jsx)(c.r,{variant:"invisible",size:"small",leadingVisual:x.jcu,onClick:oe,children:"Clone"})]})]})}),W&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(u.Z,{sx:{mt:3,mb:3},children:[(0,N.jsx)(u.Z.Link,{href:"",selected:"editor"===_,onClick:e=>le("editor",e),children:"Editor"}),(0,N.jsx)(u.Z.Link,{href:"",selected:"properties"===_,onClick:e=>le("properties",e),children:"Properties"}),(0,N.jsx)(u.Z.Link,{href:"",selected:"student"===_,onClick:e=>re(e),children:"Student version"})]}),"editor"===_&&(0,N.jsx)(r.Z,{children:W.nbformat&&(0,N.jsx)(f.a,{id:e,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",nbformat:W.nbformat,nbgrader:!0,CellSidebar:k.Q,cellSidebarMargin:200})}),"properties"===_&&(0,N.jsx)(r.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,N.jsx)(r.Z,{children:(0,N.jsxs)(r.Z,{sx:{label:{marginTop:2}},children:[(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(h.Z.Label,{children:"Name"}),(0,N.jsx)(m.Z,{block:!0,value:ne.name,onChange:e=>{ie((n=>({...n,name:e.target.value})))}}),!1===se.name&&(0,N.jsx)(h.Z.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(h.Z.Label,{children:"Description"}),(0,N.jsx)(v.ZP,{block:!0,value:ne.description,onChange:e=>{ie((n=>({...n,description:e.target.value})))}}),!1===se.description&&(0,N.jsx)(h.Z.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,N.jsx)(h.Z,{children:(0,N.jsx)(c.r,{variant:"primary",disabled:!se.name||!se.description,sx:{marginTop:2},onClick:async()=>{T.layout().showBackdrop("Updating assignment..."),O(e,ne.name,ne.description).then((e=>{e.success&&(J("The assignment is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),ee({...W,name:ne.name,description:ne.description}))})).finally((()=>{T.layout().hideBackdrop()}))},children:"Update assignment"})})]})})}),"student"===_&&(0,N.jsxs)(r.Z,{ml:3,mr:3,children:[(0,N.jsx)(g.Z,{variant:"warning",children:"Student version of the assignment."}),Y.map((e=>(0,N.jsxs)(g.Z,{variant:"danger",children:[(0,N.jsx)(p.Z,{icon:x.zMQ}),e]}))),$&&0===Y.length&&(0,N.jsx)(f.a,{id:`${e}-student`,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",nbformat:$,readonly:!0,nbgrader:!0,CellSidebar:y.l})]})]})]})},T=V},23577:(e,n,i)=>{i.d(n,{Q:()=>h});var s=i(47011),t=i(16909),l=i(70994),a=i(9521),r=i(81158),o=i(34441),d=i(26766),c=i(46523),u=i(30540);const h=e=>{const{notebookId:n,cellNodeId:i,nbgrader:h}=e,[m,v]=(0,t.useState)(!1),g=(0,c.ZP)(),p=g.selectActiveCell(n),x=p?.layout;if(x){const e=x.widgets[0];e?.node.id===i&&(m||v(!0)),e?.node.id!==i&&m&&v(!1)}return m?p?(0,s.jsxs)(l.Z,{className:u.UI,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,s.jsx)(a.P,{children:(0,s.jsx)(d.Z,{notebookId:n,cell:p,nbgrader:h})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Run cell",leadingVisual:o.XCv,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.run(n)},children:"Run"})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Insert code cell above",leadingVisual:o.g8U,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertAbove({id:n,cellType:"code"})},children:"Code"})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Insert markdown cell above",leadingVisual:o.g8U,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertAbove({id:n,cellType:"markdown"})},children:"Markdown"})}),(0,s.jsx)(l.Z,{children:"code"===p.model.type?(0,s.jsx)(r.r,{title:"Convert to markdow cell",leadingVisual:o.Ps4,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.changeCellType({id:n,cellType:"markdown"})},children:"To Markdown"}):(0,s.jsx)(r.r,{title:"Convert to code cell",leadingVisual:o.Ps4,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.changeCellType({id:n,cellType:"code"})},children:"To Code"})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Insert markdown cell below",leadingVisual:o.v4q,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertBelow({id:n,cellType:"markdown"})},children:"Markdown"})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Insert code cell below",leadingVisual:o.v4q,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertBelow({id:n,cellType:"code"})},children:"Code"})}),(0,s.jsx)(l.Z,{children:(0,s.jsx)(r.r,{title:"Delete cell",leadingVisual:o.b0D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.delete(n)},children:"Delete"})})]}):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{})}},53969:(e,n,i)=>{i.d(n,{l:()=>c});var s=i(47011),t=i(16909),l=i(70994),a=i(81158),r=i(34441),o=i(46523),d=i(30540);const c=e=>{const{notebookId:n}=e,i=(0,o.ZP)(),[c,u]=(0,t.useState)(!1),h=i.selectActiveCell(n),m=h?.layout;if(m){const n=m.widgets[0];c||n?.node.id!==e.cellNodeId||u(!0),c&&n?.node.id!==e.cellNodeId&&u(!1)}return c?h?(0,s.jsx)(l.Z,{className:d.UI,sx:{"& p":{marginBottom:"0 !important"}},children:(0,s.jsx)(l.Z,{children:(0,s.jsx)(a.r,{trailingVisual:r.o1U,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),i.run(n)},children:"Run"})})}):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{})}}}]);