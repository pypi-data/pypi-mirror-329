"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1111],{41111:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeAssignment:()=>v,default:()=>S});var n=t(9387),l=t(45222),a=t(20568),i=t(97096),r=t(98754),d=t(8586),o=t(99180),c=t(38621),u=t(16476),h=t(70728),g=t(84271),m=t(50906),x=t(18182),j=t(17810),A=t(53850),f=t(23530),y=t(76818),p=t(18683);const k=e=>{const{studentItem:s}=e;return s&&s?.nbgrades?(0,p.jsxs)(r.A,{children:[(0,p.jsx)(r.A,{children:(0,p.jsx)(d.A,{sx:{fontSize:1},children:"Grades"})}),(0,p.jsx)(r.A,{mt:3,children:s?.nbgrades.map((e=>(0,p.jsx)(r.A,{children:(0,p.jsxs)(y.A,{style:{fontSize:"small"},children:[e.grade_id_s,": ",e.score_f]})})))}),(0,p.jsx)(r.A,{mt:3,children:(0,p.jsx)(d.A,{sx:{fontSize:1},children:"Total"})}),(0,p.jsxs)(r.A,{mt:3,children:[s?.nbgradesTotalScore," / ",s?.nbgradesTotalPoints]})]}):(0,p.jsxs)(r.A,{children:[(0,p.jsx)(r.A,{children:(0,p.jsx)(d.A,{sx:{fontSize:1},children:"Grades"})}),(0,p.jsx)(r.A,{mt:3,children:"Please grade your assignment."})]})},b=e=>{const{notebookId:s}=e,{grade:t}=(0,x.io)(),n=u.Fg.getState().selectNotebook(s);return(0,p.jsxs)(r.A,{display:"flex",children:[(0,p.jsx)(r.A,{children:(0,p.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.iKr,onClick:()=>t(new Date),children:"Grade"})}),"busy"!==n?.kernelStatus&&(0,p.jsx)(r.A,{children:(0,p.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.udU,onClick:e=>u.Fg.getState().runAll(s),children:"Run all"})}),"busy"===n?.kernelStatus&&(0,p.jsx)(r.A,{children:(0,p.jsx)(o.Q,{variant:"danger",size:"small",leadingVisual:c.wFz,onClick:e=>u.Fg.getState().interrupt(s),children:"Interrupt"})})]})},v=()=>{const{accountHandle:e,spaceHandle:s,courseId:t,assignmentId:y}=(0,a.g)();if(!t||!y)return(0,p.jsx)(p.Fragment,{});const v=(0,j.J)(),S=(0,m.mt)(),{gradeRequest:I}=(0,x.io)(),z=(0,u.Gx)(),C=`${y}-student`,{getAssignmentForStudent:F,gradeAssignmentForStudent:B,refreshAssignmentForStudent:w,resetAssignmentForStudent:_}=(0,A.E)(),Q=z.selectNotebookModel(C),[R]=(0,n.useState)("assignment"),T=(0,f.Z)(),[V,N]=(0,n.useState)(F(y)),[P,$]=(0,n.useState)(),E=e=>{$(e);const s=(0,l.createPortal)((0,p.jsx)(k,{studentItem:e}),document.getElementById("right-panel-id"));S.layout().setRightPortal({portal:s,pinned:!1})};return(0,n.useEffect)((()=>(S.layout().showBackdrop(),w(t,v,y).then((e=>{if(e.success){const e=F(y);e?(N(e),E(e?.studentItem),S.layout().setItem(e)):T("/")}})).finally((()=>{S.layout().hideBackdrop()})),()=>{N(void 0),z.reset(),S.layout().setItem(void 0)})),[y]),(0,n.useEffect)((()=>{I&&Q&&(S.layout().showBackdrop("We are grading your assignment. This may take some time..."),B(t,v,y,Q?.model).then((e=>{if(e.success){const e=F(y);E(e?.studentItem),e?S.layout().setItem(e):T("/")}})).finally((()=>{S.layout().hideBackdrop()})))}),[I]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.z,{children:(0,p.jsxs)(r.A,{display:"flex",children:[(0,p.jsx)(r.A,{flex:1,children:(0,p.jsx)(d.A,{sx:{fontSize:3},children:"Course assignment"})}),(0,p.jsx)(b,{notebookId:C}),(0,p.jsx)(r.A,{children:(0,p.jsx)(o.Q,{variant:"invisible",size:"small",leadingVisual:c.$B5,onClick:e=>{e.preventDefault(),S.layout().showBackdrop("Resetting your assignment..."),_(t,v,y).then((e=>{if(S.layout().hideBackdrop(),e.success){const e=F(y);e?(N(e),E(e?.studentItem),S.layout().setItem(e)):T("/")}})).finally((()=>{S.layout().hideBackdrop()}))},children:"Reset"})}),(0,p.jsx)(r.A,{ml:3,children:(0,p.jsx)(o.Q,{variant:"default",size:"small",onClick:()=>T(`/${e}/${s}/course/${t}/progress`),children:"My course progress"})})]})}),V&&(0,p.jsxs)(p.Fragment,{children:["assignment"===R&&V&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(r.A,{children:(0,p.jsx)(h.g,{id:C,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",cellMetadataPanel:!1,nbgrader:!1,nbformat:V.nbformat,CellSidebar:g.a})})}),"notes"===R&&(0,p.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,p.jsx)(r.A,{})})]})]})},S=v},84271:(e,s,t)=>{t.d(s,{a:()=>c});var n=t(18683),l=t(9387),a=t(98754),i=t(99180),r=t(38621),d=t(16476),o=t(81356);const c=e=>{const{notebookId:s}=e,t=(0,d.Ay)(),[c,u]=(0,l.useState)(!1),h=t.selectActiveCell(s),g=h?.layout;if(g){const s=g.widgets[0];c||s?.node.id!==e.cellNodeId||u(!0),c&&s?.node.id!==e.cellNodeId&&u(!1)}return c?h?(0,n.jsx)(a.A,{className:o.VL,sx:{"& p":{marginBottom:"0 !important"}},children:(0,n.jsx)(a.A,{children:(0,n.jsx)(i.Q,{trailingVisual:r.udU,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),t.run(s)},children:"Run"})})}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{})}}}]);