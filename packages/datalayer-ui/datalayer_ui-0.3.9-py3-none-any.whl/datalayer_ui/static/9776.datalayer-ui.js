"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[9776,9882,3303],{70900:(e,t,n)=>{n.d(t,{mE:()=>d,wc:()=>o});var s=n(9387),a=n(23316),r=(n(72490),n(14809));class o extends r.x0{static create(e){return new class extends o{render(){return e}}}onUpdateRequest(e){this.renderPromise=this.renderDOM()}onAfterAttach(e){a.Mu.sendMessage(this,r.x0.Msg.UpdateRequest)}onBeforeDetach(e){}renderDOM(){return new Promise((e=>{}))}renderPromise}class d extends s.Component{constructor(e){super(e),this.state={value:[this.props.initialSender,this.props.initialArgs]}}componentDidMount(){this.props.signal.connect(this.slot)}componentWillUnmount(){this.props.signal.disconnect(this.slot)}slot=(e,t)=>{this.props.shouldUpdate&&!this.props.shouldUpdate(e,t)||this.setState({value:[e,t]})};render(){return this.props.children(...this.state.value)}}},60531:(e,t,n)=>{n.d(t,{r:()=>h,A:()=>u});var s,a=n(18683),r=n(9387),o=n(47785),d=n(48371),i=n(38621);!function(e){e[e.NotGraded=0]="NotGraded",e[e.AutogradedAnswer=1]="AutogradedAnswer",e[e.AutogradedTest=2]="AutogradedTest",e[e.ManuallyGradedTask=3]="ManuallyGradedTask",e[e.ManuallyGradedAnswer=4]="ManuallyGradedAnswer",e[e.ReadonlyGraded=5]="ReadonlyGraded"}(s||(s={}));const c=s;var l=n(17402);const h=e=>{const{cell:t}=e,[n,h]=(0,r.useState)((e=>{const t=e.model.getMetadata("nbgrader");if(!t)return s.NotGraded;const n=t.grade,a=t.solution,r=t.locked,o=t.task;return n||!a||r?!n&&!a&&r&&o?s.ManuallyGradedTask:n&&!a&&r?s.AutogradedTest:n&&a&&!r?s.ManuallyGradedAnswer:n||a||!r||o?s.NotGraded:s.ReadonlyGraded:s.AutogradedAnswer})(t)),[u,p]=(0,r.useState)(t.model.getMetadata("nbgrader")??{grade_id:(0,l.fl)(),points:1});(0,r.useEffect)((()=>{p({grade_id:u.grade_id??(0,l.fl)(),points:u.points??1})}),[u]);const _=(e,t)=>{switch(t){case c.NotGraded:e.model.deleteMetadata("nbgrader"),h(c.NotGraded);break;case c.AutogradedAnswer:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!0,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),h(c.AutogradedAnswer);break}case c.AutogradedTest:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!0,solution:!1,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),h(c.AutogradedTest);break}case c.ManuallyGradedAnswer:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!0,solution:!0,locked:!1,task:!1,grade_id:(0,l.fl)(),points:1}),h(c.ManuallyGradedAnswer);break}case c.ManuallyGradedTask:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!0,grade_id:(0,l.fl)(),points:1}),h(c.ManuallyGradedTask);break}case c.ReadonlyGraded:{const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,grade:!1,solution:!1,locked:!0,task:!1}),h(c.ReadonlyGraded);break}}};return(0,a.jsxs)(o.l,{showDividers:!0,children:[(0,a.jsx)(o.l.Divider,{}),(0,a.jsxs)(o.l.Group,{title:"NbGrader Cell Type",variant:"subtle",children:[(0,a.jsxs)(o.l.Item,{onSelect:e=>_(t,c.NotGraded),children:[n===c.NotGraded&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"None",(0,a.jsx)(o.l.Description,{variant:"block",children:"Not a grader cell."})]}),(0,a.jsxs)(o.l.Item,{onSelect:e=>_(t,c.AutogradedAnswer),children:[n===c.AutogradedAnswer&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"Autograded answer",(0,a.jsx)(o.l.Description,{variant:"block",children:"An autograded answer cell."})]}),(0,a.jsxs)(o.l.Item,{role:"listitem",onClick:e=>_(t,c.AutogradedTest),children:[n===c.AutogradedTest&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"Autograded test",(0,a.jsx)(o.l.Description,{variant:"block",children:"An autograded test cell."})]}),(0,a.jsxs)(o.l.Item,{onSelect:e=>_(t,c.ManuallyGradedTask),children:[n===c.ManuallyGradedTask&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"Manually graded task",(0,a.jsx)(o.l.Description,{variant:"block",children:"A manually graded task cell."})]}),(0,a.jsxs)(o.l.Item,{onSelect:e=>_(t,c.ManuallyGradedAnswer),children:[n===c.ManuallyGradedAnswer&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"Manually graded answer",(0,a.jsx)(o.l.Description,{variant:"block",children:"A manually graded answer cell."})]}),(0,a.jsxs)(o.l.Item,{onSelect:e=>_(t,c.ReadonlyGraded),children:[n===c.ReadonlyGraded&&(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.Srz,{})}),"Readonly",(0,a.jsx)(o.l.Description,{variant:"block",children:"A readonly grader cell."})]})]}),n!==c.NotGraded&&(0,a.jsxs)(o.l.Group,{title:"NbGrader Metadata",variant:"subtle",children:[(0,a.jsxs)(o.l.Item,{onSelect:e=>e.preventDefault(),children:["Grade ID:"," ",(0,a.jsx)(d.A,{block:!0,value:u.grade_id,onChange:e=>{e.preventDefault(),((e,t)=>{const n=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...n,grade_id:t}),p({...u,grade_id:t})})(t,e.target.value)}})]}),(0,a.jsxs)(o.l.Item,{children:["Points:"," ",(0,a.jsx)(d.A,{block:!0,value:u.points,onChange:e=>{e.preventDefault(),((e,t)=>{const n=+t;if(!isNaN(n)){const t=e.model.getMetadata("nbgrader");e.model.setMetadata("nbgrader",{...t,points:n}),p({...u,points:n})}})(t,e.target.value)}})]})]})]})},u=h},81356:(e,t,n)=>{n.d(t,{TO:()=>l,VL:()=>c});var s=n(18683),a=n(9387),r=n(45222),o=n(17402),d=n(70900),i=n(16476);const c="dla-CellSidebar-Container";class l extends d.wc{_commands;constructor(e,t,n,d){super(),this._commands=d,this.addClass("jp-CellHeader");const l=(0,o.YG)();this.node.id=l;const h={notebookId:t,cellNodeId:l,command:this._commands,nbgrader:n},u=(0,a.createElement)(e,h),p=(0,s.jsx)("div",{className:c,children:u}),_=(0,r.createPortal)(p,this.node);i.Fg.getState().addPortals({id:t,portals:[_]})}}},94247:(e,t,n)=>{n.d(t,{KQ:()=>l,ZP:()=>i,bd:()=>d,dC:()=>o});var s=n(14738),a=n(81356),r=n(55881);const o="text/x-ipython",d="application/sql",i=e=>{const t=e.model?.getMetadata("datalayer");return!!t&&!0===t.sql};class c extends r.Yr{constructor(e){super(e)}}class l extends s.S.ContentFactory{CellSidebar;notebookId;nbgrader;commands;constructor(e,t,n,s,a){super(s),this.CellSidebar=a,this.notebookId=e,this.nbgrader=t,this.commands=n}_updateSQLEditor=e=>{i(e)&&(e.editor.model.mimeType=d)};_updateEditor=e=>{e.editor&&(e.editor.model.mimeTypeChanged.connect(((t,n)=>{this._updateSQLEditor(e)})),this._updateSQLEditor(e))};createNotebook(e){return super.createNotebook(e)}createCellHeader(){return this.CellSidebar?new a.TO(this.CellSidebar,this.notebookId,this.nbgrader,this.commands):super.createCellHeader()}createCodeCell(e){const t=new c(e);return t.inViewport&&this._updateEditor(t),t.displayChanged.connect((()=>{this._updateEditor(t)})),t.inViewportChanged.connect((()=>{this._updateEditor(t)})),t}}},90117:(e,t,n)=>{n.d(t,{a:()=>d});var s=n(18683),a=n(98754),r=n(20938),o=n(8586);function d(e){const{message:t}=e;return(0,s.jsx)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px",zIndex:10999},children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{mr:3,children:(0,s.jsx)(r.A,{size:"large"})}),(0,s.jsx)(a.A,{children:(0,s.jsx)(o.A,{sx:{fontSize:5,color:"white"},children:t})})]}):(0,s.jsx)(r.A,{size:"large"})})}},75087:(e,t,n)=>{async function s({url:e,token:t}){const n={Accept:"application/json"};t&&(n.Authorization=`Bearer ${t}`);const s=await fetch(e,{method:"GET",headers:n,credentials:t?"include":"omit",mode:"cors",cache:"no-store"});if(s.ok)return(await s.json()).sessionId;throw console.error("Failed to fetch session ID.",s),new Error("Failed to fetch session ID.")}n.d(t,{_:()=>s})},17055:(e,t,n)=>{n.d(t,{Ir:()=>r,e_:()=>d});var s=n(63711),a=n(97789);const r="api/collaboration/room",o="api/collaboration/session";async function d(e,t,n,r){const d=r??a.ServerConnection.makeSettings(),i=s.URLExt.join(d.baseUrl,o,encodeURIComponent(n)),c={method:"PUT",body:JSON.stringify({format:e,type:t})};let l;try{l=await a.ServerConnection.makeRequest(i,c,d)}catch(e){throw new a.ServerConnection.NetworkError(e)}let h=await l.text();if(h.length>0)try{h=JSON.parse(h)}catch(e){console.log("Not a JSON response body.",l)}if(!l.ok)throw new a.ServerConnection.ResponseError(l,h.message||h);return h}},69882:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{APPLICATION_JAVASCRIPT_MIMETYPE:()=>APPLICATION_JAVASCRIPT_MIMETYPE,ExperimentalRenderedJavascript:()=>ExperimentalRenderedJavascript,TEXT_JAVASCRIPT_MIMETYPE:()=>TEXT_JAVASCRIPT_MIMETYPE,default:()=>__WEBPACK_DEFAULT_EXPORT__,rendererFactory:()=>rendererFactory});var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54704);const TEXT_JAVASCRIPT_MIMETYPE="text/javascript",APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript";function evalInContext(code,element,document,window){return eval(code)}class ExperimentalRenderedJavascript extends _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.TS{render(e){const t=this.translator.load("jupyterlab"),n=()=>{try{const t=e.data[this.mimeType];return t&&evalInContext(t,this.node,document,window),Promise.resolve()}catch(e){return Promise.reject(e)}};if(!e.trusted){const e=document.createElement("pre");e.textContent=t.__("Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const s=document.createElement("button");return s.textContent=t.__("Run"),this.node.appendChild(e),this.node.appendChild(s),s.onclick=e=>{this.node.textContent="",n()},Promise.resolve()}return n()}}const rendererFactory={safe:!1,mimeTypes:[TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE],createRenderer:e=>new ExperimentalRenderedJavascript(e)},extension={id:"@jupyterlab/javascript-extension:factory",description:"Adds renderer for JavaScript content.",rendererFactory,rank:0,dataType:"string"},__WEBPACK_DEFAULT_EXPORT__=extension},83303:(e,t,n)=>{n.r(t),n.d(t,{MIME_TYPE:()=>i,MIME_TYPES_JSONL:()=>c,RenderedJSON:()=>l,default:()=>u,rendererFactory:()=>h});var s=n(30808),a=n(85181),r=n(14809),o=n(9387),d=n(72447);const i="application/json",c=["text/jsonl","application/jsonl","application/json-lines"];class l extends r.x0{constructor(e){super(),this._rootDOM=null,this.addClass("jp-RenderedJSON"),this.addClass("CodeMirror"),this._mimeType=e.mimeType,this.translator=e.translator||a.wK}[s._.symbol](){return()=>s._.printWidget(this)}async renderModel(e){const{Component:t}=await n.e(1671).then(n.bind(n,74052));let s;if(c.indexOf(this._mimeType)>=0){const t=(e.data[this._mimeType]||"").trim().split(/\n/);s=JSON.parse(`[${t.join(",")}]`)}else s=e.data[this._mimeType]||{};const a=e.metadata[this._mimeType]||{};return null===this._rootDOM&&(this._rootDOM=(0,d.H)(this.node)),new Promise(((e,n)=>{this._rootDOM.render(o.createElement(t,{data:s,metadata:a,translator:this.translator,forwardedRef:()=>e()}))}))}onBeforeDetach(e){this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}}const h={safe:!0,mimeTypes:[i,...c],createRenderer:e=>new l(e)},u=[{id:"@jupyterlab/json-extension:factory",description:"Adds renderer for JSON content.",rendererFactory:h,rank:0,dataType:"json",documentWidgetFactoryOptions:{name:"JSON",primaryFileType:"json",fileTypes:["json","notebook","geojson"],defaultFor:["json"]}},{id:"@jupyterlab/json-lines-extension:factory",description:"Adds renderer for JSONLines content.",rendererFactory:h,rank:0,dataType:"string",documentWidgetFactoryOptions:{name:"JSONLines",primaryFileType:"jsonl",fileTypes:["jsonl","ndjson"],defaultFor:["jsonl","ndjson"]}}]},18241:(e,t,n)=>{n.d(t,{$R:()=>I});var s=n(18008),a=n(45474),r=n(80914),o=n(58007);const d=new Map,i="undefined"==typeof BroadcastChannel?class{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:r.Ey(t.newValue||"")}),o.k9(this._onChange)}postMessage(e){o.JT.setItem(this.room,r.nk(r.zS(e)))}close(){o.o6(this._onChange)}}:BroadcastChannel,c=e=>s._4(d,e,(()=>{const t=a.vt(),n=new i(e);return n.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:n,subs:t}})),l=(e,t,n=null)=>{const s=c(e);s.bc.postMessage(t),s.subs.forEach((e=>e(t,n)))};var h=n(38229),u=n(39189),p=n(50809),_=n(9366);const m=(e,t)=>{u.zd(e,0);const n=_.FX(t);u.Gu(e,n)},g=(e,t,n)=>{u.zd(e,1),u.Gu(e,_.PR(t,n))},w=(e,t,n)=>{try{_.QE(t,p.bo(e),n)}catch(e){console.error("Caught error while handling a Yjs update",e)}},y=w;var b=n(54195),x=n(48201),f=n(51318),A=n(287),v=n(42165);const k=[];k[0]=(e,t,n,s,a)=>{u.zd(e,0);const r=((e,t,n,s)=>{const a=p.cw(e);switch(a){case 0:((e,t,n)=>{g(t,n,p.bo(e))})(e,t,n);break;case 1:w(e,n,s);break;case 2:y(e,n,s);break;default:throw new Error("Unknown message type")}return a})(t,e,n.doc,n);s&&1===r&&!n.synced&&(n.synced=!0)},k[3]=(e,t,n,s,a)=>{u.zd(e,1),u.Gu(e,b.X3(n.awareness,Array.from(n.awareness.getStates().keys())))},k[1]=(e,t,n,s,a)=>{b.tQ(n.awareness,p.bo(t),n)},k[2]=(e,t,n,s,a)=>{((e,t,n)=>{0===p.cw(e)&&n(0,p.t3(e))})(t,n.doc,((e,t)=>M(n,t)))};const M=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),T=(e,t,n)=>{const s=p.$C(t),a=u.xv(),r=p.cw(s),o=e.messageHandlers[r];return o?o(a,s,e,n,r):console.error("Unable to compute message"),a},C=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=h._g();const s=T(e,new Uint8Array(n.data),!0);u.Bw(s)>1&&t.send(u.Fo(s))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,b._g(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(C,f.jk(100*f.n7(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=h._g(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=u.xv();if(u.zd(n,0),m(n,e.doc),t.send(u.Fo(n)),null!==e.awareness.getLocalState()){const n=u.xv();u.zd(n,1),u.Gu(n,b.X3(e.awareness,[e.doc.clientID])),t.send(u.Fo(n))}},e.emit("status",[{status:"connecting"}])}},j=(e,t)=>{e.wsconnected&&e.ws.send(t),e.bcconnected&&l(e.bcChannel,t,e)};class I extends x.c{constructor(e,t,n,{connect:s=!0,awareness:a=new b.ww(n),params:r={},WebSocketPolyfill:o=WebSocket,resyncInterval:d=-1,maxBackoffTime:i=2500,disableBc:c=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const p=(e=>A.Tj(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(r);this.maxBackoffTime=i,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===p.length?"":"?"+p),this.roomname=t,this.doc=n,this._WS=o,this.awareness=a,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=c,this.wsUnsuccessfulReconnects=0,this.messageHandlers=k.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=u.xv();u.zd(e,0),m(e,n),this.ws.send(u.Fo(e))}}),d)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=T(this,new Uint8Array(e),!1);u.Bw(t)>1&&l(this.bcChannel,u.Fo(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=u.xv();u.zd(t,0),((e,t)=>{u.zd(e,2),u.Gu(e,t)})(t,e),j(this,u.Fo(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:n},s)=>{const r=e.concat(t).concat(n),o=u.xv();u.zd(o,1),u.Gu(o,b.X3(a,r)),j(this,u.Fo(o))},this._unloadHandler=()=>{b._g(this.awareness,[n.clientID],"window unload")},"undefined"!=typeof window?window.addEventListener("unload",this._unloadHandler):void 0!==v&&v.on("exit",this._unloadHandler),a.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<h._g()-this.wsLastMessageReceived&&this.ws.close()}),3e3),s&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!=typeof window?window.removeEventListener("unload",this._unloadHandler):void 0!==v&&v.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,c(e).subs.add(t),this.bcconnected=!0);const n=u.xv();u.zd(n,0),m(n,this.doc),l(this.bcChannel,u.Fo(n),this);const s=u.xv();u.zd(s,0),g(s,this.doc),l(this.bcChannel,u.Fo(s),this);const a=u.xv();u.zd(a,3),l(this.bcChannel,u.Fo(a),this);const r=u.xv();u.zd(r,1),u.Gu(r,b.X3(this.awareness,[this.doc.clientID])),l(this.bcChannel,u.Fo(r),this)}disconnectBc(){const e=u.xv();u.zd(e,1),u.Gu(e,b.X3(this.awareness,[this.doc.clientID],new Map)),j(this,u.Fo(e)),this.bcconnected&&(((e,t)=>{const n=c(e);n.subs.delete(t)&&0===n.subs.size&&(n.bc.close(),d.delete(e))})(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(C(this),this.connectBc())}}}}]);