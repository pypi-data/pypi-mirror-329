"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7797],{17797:(e,l,s)=>{s.r(l),s.d(l,{CourseTakeLesson:()=>C,default:()=>b});var n=s(9387),i=s(20568),t=s(97096),a=s(98754),r=s(8586),d=s(76818),o=s(52032),c=s(99180),u=s(15824),h=s(16476),m=s(70728),x=s(84604),v=s(17810),j=s(53850),p=s(23530),f=s(97734),k=s(50906),g=s(18683);const C=()=>{const{accountHandle:e,spaceHandle:l,courseId:s,lessonId:C}=(0,i.g)();if(!C)return(0,g.jsx)(g.Fragment,{});const b=(0,v.J)(),y=(0,k.mt)(),A=(0,h.Gx)(),{confirmCourseItemCompletion:w,getLesson:D,getStudent:I,refreshLesson:T,refreshStudent:z}=(0,j.E)(),[M,Q]=(0,n.useState)("lesson"),[S,V]=(0,n.useState)(D(C)),[L,B]=(0,n.useState)(!1),[F,H]=(0,n.useState)(!1),_=(0,p.Z)(),{enqueueToast:E}=(0,f.d)(),P=(e,l)=>{l.preventDefault(),y.layout().resetRightPortal(),Q(e)};return(0,n.useEffect)((()=>(y.layout().showBackdrop(),T(C).then((e=>{if(y.layout().hideBackdrop(),e.success){const e=D(C);e?(V(e),y.layout().setItem(e)):_("/")}})).finally((()=>{y.layout().hideBackdrop()})),()=>{V(void 0),A.reset(),y.layout().setItem(void 0)})),[C]),(0,n.useEffect)((()=>(z(s,b?.id).then((e=>{if(e.success){const e=I(s,b?.id),l=e?.studentItems?.get(C);l&&B(l.completed)}})),()=>{V(void 0),A.reset(),y.layout().setItem(void 0)})),[C]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.z,{children:(0,g.jsxs)(a.A,{display:"flex",children:[(0,g.jsx)(a.A,{flex:1,children:(0,g.jsx)(r.A,{sx:{fontSize:3},children:"Course lesson"})}),(0,g.jsxs)(a.A,{children:[(0,g.jsx)(d.A,{children:"Completed"}),(0,g.jsx)(o.A,{onClick:()=>{H(!0),w(s,"lesson",C,!L).then((e=>{e.success&&(E(e.message,{variant:"success"}),B(!L))})).finally((()=>{H(!1)}))},checked:L,size:"small",loading:F,"aria-labelledby":"switchLabel"})]}),(0,g.jsx)(a.A,{ml:3,children:(0,g.jsx)(c.Q,{variant:"default",size:"small",onClick:()=>_(`/${e}/${l}/course/${s}/progress`),children:"My course progress"})})]})}),S&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.A,{sx:{mt:3,mb:3},children:[(0,g.jsx)(u.A.Link,{href:"",selected:"lesson"===M,onClick:e=>P("lesson",e),children:"Lesson"}),(0,g.jsx)(u.A.Link,{href:"",selected:"comments"===M,onClick:e=>P("comments",e),children:"Comments"})]}),"lesson"===M&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.A,{children:S.nbformat&&(0,g.jsx)(m.g,{id:C,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",readonly:!1,cellMetadataPanel:!1,nbformat:S.nbformat,CellSidebar:x.Z})})}),"comments"===M&&(0,g.jsx)(a.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,g.jsx)(a.A,{})})]})]})},b=C},84604:(e,l,s)=>{s.d(l,{Z:()=>h});var n=s(18683),i=s(9387),t=s(98754),a=s(9175),r=s(99180),d=s(38621),o=s(60531),c=s(16476),u=s(81356);const h=e=>{const{notebookId:l,cellNodeId:s,nbgrader:h}=e,[m,x]=(0,i.useState)(!1),v=(0,c.Ay)(),j=v.selectActiveCell(l),p=j?.layout;if(p){const e=p.widgets[0];e?.node.id===s&&(m||x(!0)),e?.node.id!==s&&m&&x(!1)}return m?j?(0,n.jsxs)(t.A,{className:u.VL,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,n.jsx)(a.W,{children:(0,n.jsx)(o.A,{notebookId:l,cell:j,nbgrader:h})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Run cell",leadingVisual:d.vKP,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.run(l)},children:"Run"})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Insert code cell above",leadingVisual:d.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:l,cellType:"code"})},children:"Code"})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Insert markdown cell above",leadingVisual:d.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:l,cellType:"markdown"})},children:"Markdown"})}),(0,n.jsx)(t.A,{children:"code"===j.model.type?(0,n.jsx)(r.Q,{title:"Convert to markdow cell",leadingVisual:d.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:l,cellType:"markdown"})},children:"To Markdown"}):(0,n.jsx)(r.Q,{title:"Convert to code cell",leadingVisual:d.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:l,cellType:"code"})},children:"To Code"})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Insert markdown cell below",leadingVisual:d.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:l,cellType:"markdown"})},children:"Markdown"})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Insert code cell below",leadingVisual:d.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:l,cellType:"code"})},children:"Code"})}),(0,n.jsx)(t.A,{children:(0,n.jsx)(r.Q,{title:"Delete cell",leadingVisual:d.uv5,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.delete(l)},children:"Delete"})})]}):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("div",{})}}}]);