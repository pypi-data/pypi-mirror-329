"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5668],{46916:(e,i,s)=>{s.d(i,{E:()=>o});var l=s(71791),n=s(99180),t=s(38621),a=s(9387),r=s(18683);function o(e){const{commandRegistry:i,kernelDesc:s,save:o,sessionConnection:c}=e,[d,u]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=()=>{u(c?.kernel?.status)};return e(),c?.statusChanged.connect(e),c?.connectionStatusChanged.connect(e),()=>{c?.statusChanged.disconnect(e),c?.connectionStatusChanged.disconnect(e)}}),[c]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Q,{variant:"invisible",size:"small",leadingVisual:t.iKr,disabled:void 0===s?.location,onClick:o,children:"Save"}),(0,r.jsx)(n.Q,{variant:"invisible",size:"small",leadingVisual:t.udU,disabled:!s?.location||"busy"===d,onClick:e=>{i?.execute(l.nx.runAll)},children:"Run all"}),(0,r.jsx)(n.Q,{variant:"invisible",size:"small",leadingVisual:t.wFz,disabled:!s?.location||"busy"!==d,onClick:e=>{i?.execute(l.nx.interrupt)},children:"Interrupt"})]})}},95668:(e,i,s)=>{s.r(i),s.d(i,{LessonEdit:()=>D,default:()=>T});var l=s(9387),n=s(20568),t=s(79026),a=s(97096),r=s(98754),o=s(8586),c=s(99180),d=s(15824),u=s(88996),h=s(48371),m=s(64664),p=s(38621),v=s(16476),x=s(70728),g=s(84604),j=s(46916),k=s(17810),y=s(23530),b=s(53850),f=s(97734),A=s(50906),C=s(54520),w=s(18683);const D=()=>{const{lessonId:e}=(0,n.g)();if(!e)return(0,w.jsx)(w.Fragment,{});const i=(0,k.J)(),s=(0,t.S)(),D=(0,y.Z)(),T=(0,A.mt)(),z=(0,v.Gx)(),S=T.layout().space,V=(0,C.OK)().saveRequest,B=z.selectNotebookModel(e),{cloneLesson:I,getLesson:Q,refreshLesson:N,updateNotebook:L,updateNotebookModel:M}=(0,b.E)(),[R,E]=(0,l.useState)("editor"),{enqueueToast:F}=(0,f.d)(),[P,_]=(0,l.useState)(),[H,J]=(0,l.useState)({name:"",description:""}),[K,O]=(0,l.useState)({name:void 0,description:void 0}),Z=(e,i)=>{i.preventDefault(),T.layout().resetRightPortal(),E(e)};(0,l.useEffect)((()=>(T.layout().showBackdrop(),N(e).then((i=>{if(T.layout().hideBackdrop(),i.success){const i=Q(e);i?(_(i),T.layout().setItem(i),J({name:i.name,description:i.description})):D("/")}})).finally((()=>{T.layout().hideBackdrop()})),()=>{_(void 0),z.reset(),T.layout().setItem(void 0)})),[e]);const q=()=>{B?.model?.cells&&(T.layout().showBackdrop("Saving the lesson..."),M(e,B.model.toJSON()).then((e=>{e.success&&(F("The lesson is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),_({...P,nbformat:B.model.toJSON()}))})).finally((()=>{T.layout().hideBackdrop()})))};(0,l.useEffect)((()=>{V&&P&&q()}),[V]),(0,l.useEffect)((()=>{O({...K,name:void 0===H.name?void 0:H.name.length>2,description:void 0===H.description?void 0:H.description.length>2})}),[H]);const U=(0,l.useCallback)((async l=>{s({title:"Are you sure?",content:"Please confirm you want to clone this lesson in your private library."}).then((s=>{s&&(T.layout().showBackdrop(),I(e).then((e=>{T.layout().hideBackdrop(),e.success&&(F(e.message,{variant:"success"}),T.layout().triggerItemsRefresh(),D(`/${i?.handle}/library/lessons`))})).finally((()=>{T.layout().hideBackdrop()})))}))}),[s,P]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.z,{children:(0,w.jsxs)(r.A,{display:"flex",children:[(0,w.jsx)(r.A,{flex:1,children:(0,w.jsx)(o.A,{sx:{fontSize:3},children:"Lesson editor"})}),"editor"===R&&(0,w.jsx)(r.A,{children:(0,w.jsx)(j.E,{commandRegistry:z.selectNotebookAdapter(e)?.commands,save:q})}),P&&S&&(0,w.jsx)(r.A,{children:(0,w.jsx)(c.Q,{variant:"invisible",size:"small",leadingVisual:p.Nc$,onClick:U,children:"Clone"})})]})}),P&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d.A,{sx:{mt:3,mb:3},children:[(0,w.jsx)(d.A.Link,{href:"",selected:"editor"===R,onClick:e=>Z("editor",e),children:"Editor"}),(0,w.jsx)(d.A.Link,{href:"",selected:"properties"===R,onClick:e=>Z("properties",e),children:"Properties"})]}),"editor"===R&&(0,w.jsx)(r.A,{children:P.nbformat&&(0,w.jsx)(x.g,{id:e,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",cellMetadataPanel:!0,nbformat:P.nbformat,CellSidebar:g.Z})}),"properties"===R&&(0,w.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,w.jsx)(r.A,{children:(0,w.jsxs)(r.A,{sx:{label:{marginTop:2}},children:[(0,w.jsxs)(u.A,{children:[(0,w.jsx)(u.A.Label,{children:"Name"}),(0,w.jsx)(h.A,{block:!0,value:H.name,onChange:e=>{J((i=>({...i,name:e.target.value})))}}),!1===K.name&&(0,w.jsx)(u.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,w.jsxs)(u.A,{children:[(0,w.jsx)(u.A.Label,{children:"Description"}),(0,w.jsx)(m.Ay,{block:!0,value:H.description,onChange:e=>{J((i=>({...i,description:e.target.value})))}}),!1===K.description&&(0,w.jsx)(u.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,w.jsx)(u.A,{children:(0,w.jsx)(c.Q,{variant:"primary",disabled:!K.name||!K.description,sx:{marginTop:2},onClick:async()=>{T.layout().showBackdrop(),L(e,H.name,H.description).then((e=>{T.layout().hideBackdrop(),e.success&&(F("The lesson is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),_({...P,name:H.name,description:H.description}))})).finally((()=>{T.layout().hideBackdrop()}))},children:"Update lesson"})})]})})})]})]})},T=D},84604:(e,i,s)=>{s.d(i,{Z:()=>h});var l=s(18683),n=s(9387),t=s(98754),a=s(9175),r=s(99180),o=s(38621),c=s(60531),d=s(16476),u=s(81356);const h=e=>{const{notebookId:i,cellNodeId:s,nbgrader:h}=e,[m,p]=(0,n.useState)(!1),v=(0,d.Ay)(),x=v.selectActiveCell(i),g=x?.layout;if(g){const e=g.widgets[0];e?.node.id===s&&(m||p(!0)),e?.node.id!==s&&m&&p(!1)}return m?x?(0,l.jsxs)(t.A,{className:u.VL,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,l.jsx)(a.W,{children:(0,l.jsx)(c.A,{notebookId:i,cell:x,nbgrader:h})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Run cell",leadingVisual:o.vKP,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.run(i)},children:"Run"})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Insert code cell above",leadingVisual:o.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:i,cellType:"code"})},children:"Code"})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Insert markdown cell above",leadingVisual:o.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertAbove({id:i,cellType:"markdown"})},children:"Markdown"})}),(0,l.jsx)(t.A,{children:"code"===x.model.type?(0,l.jsx)(r.Q,{title:"Convert to markdow cell",leadingVisual:o.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:i,cellType:"markdown"})},children:"To Markdown"}):(0,l.jsx)(r.Q,{title:"Convert to code cell",leadingVisual:o.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.changeCellType({id:i,cellType:"code"})},children:"To Code"})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Insert markdown cell below",leadingVisual:o.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:i,cellType:"markdown"})},children:"Markdown"})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Insert code cell below",leadingVisual:o.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.insertBelow({id:i,cellType:"code"})},children:"Code"})}),(0,l.jsx)(t.A,{children:(0,l.jsx)(r.Q,{title:"Delete cell",leadingVisual:o.uv5,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),v.delete(i)},children:"Delete"})})]}):(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{})}}}]);