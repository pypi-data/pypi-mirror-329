"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5388],{46916:(e,n,i)=>{i.d(n,{E:()=>o});var s=i(71791),t=i(99180),l=i(38621),a=i(9387),r=i(18683);function o(e){const{commandRegistry:n,kernelDesc:i,save:o,sessionConnection:d}=e,[c,u]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=()=>{u(d?.kernel?.status)};return e(),d?.statusChanged.connect(e),d?.connectionStatusChanged.connect(e),()=>{d?.statusChanged.disconnect(e),d?.connectionStatusChanged.disconnect(e)}}),[d]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Q,{variant:"invisible",size:"small",leadingVisual:l.iKr,disabled:void 0===i?.location,onClick:o,children:"Save"}),(0,r.jsx)(t.Q,{variant:"invisible",size:"small",leadingVisual:l.udU,disabled:!i?.location||"busy"===c,onClick:e=>{n?.execute(s.nx.runAll)},children:"Run all"}),(0,r.jsx)(t.Q,{variant:"invisible",size:"small",leadingVisual:l.wFz,disabled:!i?.location||"busy"!==c,onClick:e=>{n?.execute(s.nx.interrupt)},children:"Interrupt"})]})}},15388:(e,n,i)=>{i.r(n),i.d(n,{AssignmentEdit:()=>N,default:()=>T});var s=i(9387),t=i(20568),l=i(79026),a=i(97096),r=i(98754),o=i(8586),d=i(14722),c=i(99180),u=i(15824),h=i(88996),m=i(48371),v=i(64664),g=i(31906),x=i(18738),p=i(38621),j=i(85383),b=i(16476),k=i(70728),f=i(84604),y=i(84271),A=i(17810),C=i(23530),S=i(53850),w=i(97734),D=i(50906),V=i(54520),z=i(46916),I=i(18683);const N=()=>{const{assignmentId:e}=(0,t.g)();if(!e)return(0,I.jsx)(I.Fragment,{});const n=(0,A.J)(),i=(0,l.S)(),N=(0,C.Z)(),T=(0,D.mt)(),Q=(0,b.Gx)(),B=(0,V.OK)(),R=T.layout().space,M=B.saveRequest,E=Q.selectNotebookModel(e),{cloneAssignment:L,getAssignment:F,getAssignmentStudentVersion:O,refreshAssignment:J,updateNotebookModel:_,updateNotebook:H}=(0,S.E)(),{enqueueToast:P}=(0,w.d)(),[U,K]=(0,s.useState)("editor"),[Z,$]=(0,s.useState)(!1),[q,G]=(0,s.useState)(void 0),[W,X]=(0,s.useState)([]),[Y,ee]=(0,s.useState)(),[ne,ie]=(0,s.useState)({name:"",description:""}),[se,te]=(0,s.useState)({name:void 0,description:void 0}),le=(e,n)=>{n.preventDefault(),T.layout().resetRightPortal(),X([]),K(e)};(0,s.useEffect)((()=>{if(e&&"editor"===U)return T.layout().showBackdrop("Loading the assignment..."),J(e).then((n=>{if(n.success){const n=F(e);n?(ee(n),T.layout().setItem(n),ie({name:n.name,description:n.description})):N("/")}})).finally((()=>{T.layout().hideBackdrop()})),()=>{Q.reset(),T.layout().setItem(void 0)}}),[e,U]);const ae=()=>{E?.model?.cells&&(T.layout().showBackdrop("Saving the assignment..."),_(e,E.model.toJSON()).then((e=>{e.success&&(P("The assignment is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),ee({...Y,nbformat:E.model.toJSON()}))})).finally((()=>{T.layout().hideBackdrop()})))},re=n=>{E?.model?.cells&&(n.preventDefault(),T.layout().showBackdrop("Generating the student version of the assignment..."),_(e,E.model.toJSON()),O(e).then((e=>{$(!0),le("student",n),e.success?G(JSON.parse(e.notebook)):e.errors&&X(e.errors)})).finally((()=>{T.layout().hideBackdrop()})))};(0,s.useEffect)((()=>{M&&Y&&ae()}),[M]),(0,s.useEffect)((()=>{te({...se,name:void 0===ne.name?void 0:ne.name.length>2,description:void 0===ne.description?void 0:ne.description.length>2})}),[ne]);const oe=(0,s.useCallback)((async s=>{i({title:"Are you sure?",content:"Please confirm you want to clone this assignment in your private library."}).then((i=>{i&&(T.layout().showBackdrop(),L(e).then((e=>{e.success&&(P(e.message,{variant:"success"}),T.layout().triggerItemsRefresh(),N(`/${n?.handle}/library/assignments`))})).finally((()=>{T.layout().hideBackdrop()})))}))}),[i,Y]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a.z,{children:(0,I.jsxs)(r.A,{display:"flex",children:[(0,I.jsx)(r.A,{flex:1,children:(0,I.jsx)(o.A,{sx:{fontSize:3},children:"Assignment editor"})}),"student"!==U&&(0,I.jsxs)(r.A,{display:"flex",children:[(0,I.jsx)(z.E,{commandRegistry:Q.selectNotebookAdapter(e)?.commands,save:ae}),(0,I.jsx)(d.A,{children:(0,I.jsx)(c.Q,{variant:"invisible",size:"small",leadingVisual:j.A,onClick:e=>re(e),children:"Student version"})}),Y&&R&&(0,I.jsx)(c.Q,{variant:"invisible",size:"small",leadingVisual:p.Nc$,onClick:oe,children:"Clone"})]})]})}),Y&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(u.A,{sx:{mt:3,mb:3},children:[(0,I.jsx)(u.A.Link,{href:"",selected:"editor"===U,onClick:e=>le("editor",e),children:"Editor"}),(0,I.jsx)(u.A.Link,{href:"",selected:"properties"===U,onClick:e=>le("properties",e),children:"Properties"}),(0,I.jsx)(u.A.Link,{href:"",selected:"student"===U,onClick:e=>re(e),children:"Student version"})]}),"editor"===U&&(0,I.jsx)(r.A,{children:Y.nbformat&&(0,I.jsx)(k.g,{id:e,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",nbformat:Y.nbformat,nbgrader:!0,CellSidebar:f.Z,cellSidebarMargin:200})}),"properties"===U&&(0,I.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,I.jsx)(r.A,{children:(0,I.jsxs)(r.A,{sx:{label:{marginTop:2}},children:[(0,I.jsxs)(h.A,{children:[(0,I.jsx)(h.A.Label,{children:"Name"}),(0,I.jsx)(m.A,{block:!0,value:ne.name,onChange:e=>{ie((n=>({...n,name:e.target.value})))}}),!1===se.name&&(0,I.jsx)(h.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,I.jsxs)(h.A,{children:[(0,I.jsx)(h.A.Label,{children:"Description"}),(0,I.jsx)(v.Ay,{block:!0,value:ne.description,onChange:e=>{ie((n=>({...n,description:e.target.value})))}}),!1===se.description&&(0,I.jsx)(h.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,I.jsx)(h.A,{children:(0,I.jsx)(c.Q,{variant:"primary",disabled:!se.name||!se.description,sx:{marginTop:2},onClick:async()=>{T.layout().showBackdrop("Updating assignment..."),H(e,ne.name,ne.description).then((e=>{e.success&&(P("The assignment is successfully updated.",{variant:"success"}),T.layout().triggerItemsRefresh(),ee({...Y,name:ne.name,description:ne.description}))})).finally((()=>{T.layout().hideBackdrop()}))},children:"Update assignment"})})]})})}),"student"===U&&(0,I.jsxs)(r.A,{ml:3,mr:3,children:[(0,I.jsx)(g.A,{variant:"warning",children:"Student version of the assignment."}),W.map((e=>(0,I.jsxs)(g.A,{variant:"danger",children:[(0,I.jsx)(x.A,{icon:p._0O}),e]}))),q&&0===W.length&&(0,I.jsx)(k.g,{id:`${e}-student`,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",nbformat:q,readonly:!0,nbgrader:!0,CellSidebar:y.a})]})]})]})},T=N},84604:(e,n,i)=>{i.d(n,{Z:()=>h});var s=i(18683),t=i(9387),l=i(98754),a=i(9175),r=i(99180),o=i(38621),d=i(60531),c=i(16476),u=i(81356);const h=e=>{const{notebookId:n,cellNodeId:i,nbgrader:h}=e,[m,v]=(0,t.useState)(!1),g=(0,c.Ay)(),x=g.selectActiveCell(n),p=x?.layout;if(p){const e=p.widgets[0];e?.node.id===i&&(m||v(!0)),e?.node.id!==i&&m&&v(!1)}return m?x?(0,s.jsxs)(l.A,{className:u.VL,sx:{"& p":{marginBottom:"0 !important"}},children:[h&&(0,s.jsx)(a.W,{children:(0,s.jsx)(d.A,{notebookId:n,cell:x,nbgrader:h})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Run cell",leadingVisual:o.vKP,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.run(n)},children:"Run"})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Insert code cell above",leadingVisual:o.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertAbove({id:n,cellType:"code"})},children:"Code"})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Insert markdown cell above",leadingVisual:o.Mtm,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertAbove({id:n,cellType:"markdown"})},children:"Markdown"})}),(0,s.jsx)(l.A,{children:"code"===x.model.type?(0,s.jsx)(r.Q,{title:"Convert to markdow cell",leadingVisual:o.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.changeCellType({id:n,cellType:"markdown"})},children:"To Markdown"}):(0,s.jsx)(r.Q,{title:"Convert to code cell",leadingVisual:o.dHM,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.changeCellType({id:n,cellType:"code"})},children:"To Code"})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Insert markdown cell below",leadingVisual:o.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertBelow({id:n,cellType:"markdown"})},children:"Markdown"})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Insert code cell below",leadingVisual:o.D3D,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.insertBelow({id:n,cellType:"code"})},children:"Code"})}),(0,s.jsx)(l.A,{children:(0,s.jsx)(r.Q,{title:"Delete cell",leadingVisual:o.uv5,variant:"invisible",size:"small",onClick:e=>{e.preventDefault(),g.delete(n)},children:"Delete"})})]}):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{})}},84271:(e,n,i)=>{i.d(n,{a:()=>c});var s=i(18683),t=i(9387),l=i(98754),a=i(99180),r=i(38621),o=i(16476),d=i(81356);const c=e=>{const{notebookId:n}=e,i=(0,o.Ay)(),[c,u]=(0,t.useState)(!1),h=i.selectActiveCell(n),m=h?.layout;if(m){const n=m.widgets[0];c||n?.node.id!==e.cellNodeId||u(!0),c&&n?.node.id!==e.cellNodeId&&u(!1)}return c?h?(0,s.jsx)(l.A,{className:d.VL,sx:{"& p":{marginBottom:"0 !important"}},children:(0,s.jsx)(l.A,{children:(0,s.jsx)(a.Q,{trailingVisual:r.udU,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),i.run(n)},children:"Run"})})}):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{})}}}]);