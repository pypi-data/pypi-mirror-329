"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2540],{9140:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>f,contentTitle:()=>m,default:()=>x,frontMatter:()=>u,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"data-platforms/demos/map","title":"Maps","description":"Examples of CDC Map Components","source":"@site/docs/data-platforms/7_demos/map.mdx","sourceDirName":"data-platforms/7_demos","slug":"/data-platforms/demos/map","permalink":"/content/f14ebb0a-f6f7-4eda-be53-b9a117d28a6b/static/docs-cdc-datahub/docs/data-platforms/demos/map","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data-platforms/7_demos/map.mdx","tags":[],"version":"current","frontMatter":{"title":"Maps","description":"Examples of CDC Map Components"},"sidebar":"data_platforms","previous":{"title":"Dashboards","permalink":"/content/f14ebb0a-f6f7-4eda-be53-b9a117d28a6b/static/docs-cdc-datahub/docs/data-platforms/demos/dashboards"}}');var o=t(4848),r=t(8453),s=t(6540),i=t(4318);const l={"chart-container":"chart-container_ffLo","tooltip-boundary":"tooltip-boundary_bqGA","visx-group":"visx-group_vdZW",viewConfigButton:"viewConfigButton_kLKQ",modalOverlay:"modalOverlay_TAP2",modalContent:"modalContent_h1qK",closeButton:"closeButton_oZcb",copyButton:"copyButton_nmq5"},d=e=>{const n=(0,s.useRef)(null),t=Element.prototype.setAttribute;(0,s.useEffect)((()=>{const e=document.createElement("style");return e.innerHTML="\n/* Parent container for map and legend */\n.tooltip-boundary {\n \n  min-width: 800px;\n  height: 600px;\n  position: relative;\n  overflow: visible !important;\n}\n\n.sankey-map {\n  width: 100%;\n  height: 100%;\n}\n\n.sankey-map__diagram {\n  width: 100% !important;\n  height: 100% !important;\n  min-width: 800px;\n  min-height: 600px;\n}\n\n.filters-section__intro-text {\n  white-space: normal; /* Allows normal wrapping */\n  word-break: break-word; /* Breaks words if they're too long */\n  width: 100px; /* Ensures the element uses full width */\n}\n.filters-section__intro-text {\n  white-space: normal; /* Allows normal wrapping */\n  word-break: break-word; /* Breaks words if they're too long */\n  width: 100px; /* Ensures the element uses full width */\n}\n\n.subtext{\n  word-wrap: break-word; /* Allows long words to break and wrap */\n  overflow-wrap: break-word; /* Modern alternative to word-wrap */\n    width: 100px; /* Ensures the element uses full width */\n}\n\n \n\n.mapWrapper {\n  display: flex; /* Use flexbox for layout */\n  flex-direction: row; /* Place map and legend side-by-side */\n  justify-content: space-between; /* Spread map and legend */\n  align-items: flex-start; /* Align to top */\n  width: 100%; /* Full container width */\n  box-sizing: border-box;\n  padding: 10px; /* Add padding for spacing */\n  gap: 10px; /* Add space between map and legend */\n}\n\n/* Map container */\n.tooltip-boundary {\n  flex: 1 1 75%; /* Map takes 75% of the container */\n  height: auto; /* Flexible height */\n  background-color: #f9f9f9;\n  border: 1px solid #ddd;\n  box-sizing: border-box;\n  padding-right: 20px; /* Prevent content from touching legend */\n}\n\n/* Legend wrapper */\n.legend-wrapper {\n  flex: 1 1 20%; /* Legend takes 20% of the container */\n  min-width: 150px; /* Ensure the legend is not too narrow */\n  text-align: left;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  box-sizing: border-box;\n  padding: 10px;\n}\n\n/* Legend items */\n.legend-wrapper .visx-legend {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.legend-wrapper .legend-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.legend-wrapper .legend-item span {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  background-color: #377eb8; /* Default color */\n  border-radius: 50%;\n}\n\n/* Bar map spacing fixes */\n.bar-map .bar {\n  margin: 0 2px; /* Add slight margin between bars */\n}\n\n.bar-map text {\n  font-size: 12px; /* Reduce label text size */\n  fill: #333; /* Darker color for readability */\n}\n\n/* Ensure table at bottom remains aligned */\n.tableWrapper {\n  width: 100%; /* Full width */\n  margin-top: 20px; /* Space from map */\n  background-color: #fff;\n  border: 1px solid #ddd;\n  padding: 10px;\n  box-sizing: border-box;\n}\n\n \n\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),(0,s.useEffect)((()=>{if(!n.current)return;Element.prototype.setAttribute=function(e,n){if("rect"===this.tagName&&"width"===e){const a=parseFloat(n);if(!isNaN(a)&&a<0)return t.call(this,e,"0")}return t.call(this,e,n)};const e=new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"width"===e.attributeName&&"rect"===e.target.tagName){const n=parseFloat(e.target.getAttribute("width"));!isNaN(n)&&n<0&&e.target.setAttribute("width","0")}}))}));return e.observe(n.current,{subtree:!0,attributes:!0,attributeFilter:["width"]}),()=>{Element.prototype.setAttribute=t,e.disconnect()}}),[]);return(0,o.jsx)("div",{ref:n,style:{minHeight:"200px",width:"100%",position:"relative"},children:e.config&&(0,o.jsx)(i.A,{...e,config:(e=>{const n={...e};return Array.isArray(n.data)&&(n.data=n.data.map((e=>({...e,value:Math.max(0,Number(e.value||e.Value||0))})))),n})(e.config),onError:e=>{console.error("Map error:",e)}})})},c=e=>{let{config:n,onClose:t}=e;const[a,r]=(0,s.useState)("");return(0,o.jsx)("div",{className:l.modalOverlay,children:(0,o.jsxs)("div",{className:l.modalContent,children:[(0,o.jsx)("button",{onClick:t,className:l.closeButton,children:"Close"}),(0,o.jsx)("h3",{children:"Map Configuration"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("button",{onClick:()=>{const e=JSON.stringify(n,null,2);navigator.clipboard.writeText(e).then((()=>{r("Copied!"),setTimeout((()=>r("")),2e3)})).catch((e=>{console.error("Failed to copy:",e),r("Failed to copy!")}))},className:l.copyButton,title:"Copy Config to Clipboard",children:"Copy Config"}),(0,o.jsx)("span",{children:a})]}),(0,o.jsx)("pre",{style:{whiteSpace:"pre-wrap",overflowY:"auto",maxHeight:"60vh"},children:JSON.stringify(n,null,2)})]})})},p=()=>{const[e,n]=(0,s.useState)(null),[t,a]=(0,s.useState)([]),[r,i]=(0,s.useState)(""),[p,u]=(0,s.useState)([]),[m,f]=(0,s.useState)(""),[h,g]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),[v,j]=(0,s.useState)(!1),[C,k]=(0,s.useState)("");(0,s.useEffect)((()=>{k((()=>{if("undefined"!=typeof window){const e=window.location.pathname.split("/"),n=e.indexOf("content");if(-1!==n)return`${e.slice(0,n+2).join("/")}/static/docs-cdc-datahub/examples/map`}return"/examples/map"})())}),[]);const N=(e,n)=>{if(!e||!n)return;const t=Object.keys(e[n]).filter((t=>"files"!==t&&"object"==typeof e[n][t]));u(t),e[n].files?.length>0?E(e,n):t.length>0&&(f(t[0]),E(e,n,t[0]))},E=async function(e,n,t){void 0===t&&(t=null),y(!0);try{let a=[],o="";t?(a=e[n][t]?.files||[],o=`/${n}/${t}`):(a=e[n]?.files||[],o=`/${n}`),console.log("Loading files for path:",o),console.log("Files to load:",a);const r=await Promise.all(a.map((async e=>{try{const n=`${C}/${e.path}`;console.log("Loading map from:",n);const t=await fetch(n);if(!t.ok)throw new Error(`Failed to load ${e.path}: ${t.status}`);const a=((e,n,t)=>{const a={...e};if(a.dataUrl){const n=a.dataUrl.split("/").pop();a.dataUrl=`${t}/feature/__data__/${n}`,console.log("URL Resolution:",{original:e.dataUrl,final:a.dataUrl})}return a})(await t.json(),0,C);return{name:e.name.replace(".json",""),config:a}}catch(n){return console.error(`Error loading ${e.path}:`,n),null}}))),s=r.filter(Boolean);console.log(`Loaded ${s.length} valid configurations`),g(s)}catch(a){console.error("Error loading map:",a),g([])}finally{y(!1)}};return(0,s.useEffect)((()=>{C&&(async()=>{try{const e=`${C}/manifest.json`;console.log("Current baseUrl:",C),console.log("Full manifest URL:",e),console.log("Window location:",window.location.pathname);const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load manifest: ${t.status}`);const o=await t.json();console.log("Loaded manifest:",o),n(o);const r=Object.keys(o).filter((e=>"files"!==e&&"object"==typeof o[e]));console.log("Found categories:",r),a(r),r.length>0&&(i(r[0]),N(o,r[0]))}catch(e){console.error("Error loading manifest:",e)}finally{y(!1)}})()}),[C]),(0,o.jsxs)("div",{className:l.container,children:[(0,o.jsxs)("div",{className:l.navigation,children:[(0,o.jsx)("div",{className:l.mainCategories,children:t.map((n=>(0,o.jsx)("button",{onClick:()=>(n=>{i(n),f(""),b(null),N(e,n)})(n),className:`${l.categoryButton} ${r===n?l.active:""}`,children:n},n)))}),p.length>0&&(0,o.jsx)("div",{className:l.subCategories,children:p.map((n=>(0,o.jsx)("button",{onClick:()=>(n=>{f(n),b(null),E(e,r,n)})(n),className:`${l.categoryButton} ${m===n?l.active:""}`,children:n},n)))})]}),(0,o.jsxs)("div",{className:l.mapContainer,children:[w?(0,o.jsx)("div",{className:l.loading,children:"Loading map..."}):0===h.length?(0,o.jsxs)("div",{className:l.noMaps,children:["No map found for ",m||r]}):(0,o.jsx)("div",{className:l.mapGrid,children:h.map(((e,n)=>(0,o.jsxs)("div",{className:`${l.mapCard} ${x===e?l.expanded:""}`,children:[(0,o.jsx)("h3",{children:e.name}),(0,o.jsx)("div",{className:"mapWrapper",children:(0,o.jsxs)("div",{className:"tooltip-boundary",children:[(0,o.jsx)(d,{config:e.config}),(0,o.jsx)("button",{onClick:()=>(e=>{b(e),j(!0)})(e),className:l.viewConfigButton,children:"View Config"})]})}),x===e&&(0,o.jsx)("div",{className:l.config,children:(0,o.jsx)("pre",{children:JSON.stringify(e.config,null,2)})})]},n)))}),v&&x&&(0,o.jsx)(c,{config:x.config,onClose:()=>{j(!1),b(null)}})]}),x&&(0,o.jsx)("div",{className:l.backButtonContainer,children:(0,o.jsx)("button",{className:l.categoryButton,onClick:()=>b(null),children:"Back to Grid"})})]})},u={title:"Maps",description:"Examples of CDC Map Components"},m="Map Gallery",f={},h=[];function g(e){const n={h1:"h1",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"map-gallery",children:"Map Gallery"})}),"\n",(0,o.jsx)(n.p,{children:"Below you can explore various map examples:"}),"\n",(0,o.jsx)(p,{})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}}}]);