/*! For license information please see 203.1521356dd3eabef73aae.js.LICENSE.txt */
(self.webpackChunk_aolney_jupyterlab_blockly_python_extension=self.webpackChunk_aolney_jupyterlab_blockly_python_extension||[]).push([[203],{203:function(e,t,n){var r,o,i;o=[n(983),n(364)],void 0===(i="function"==typeof(r=function(e,t){return t})?r.apply(t,o):r)||(e.exports=i)},364:function(e,t,n){var r,o,i;o=[n(731)],void 0===(i="function"==typeof(r=function(e){var t,n,r=e.__namespace__,o=function(e,n){let r,o,i=0,a="";n.STATEMENT_PREFIX&&(a+=n.injectId(n.STATEMENT_PREFIX,e));do{o=n.valueToCode(e,"IF"+i,t.NONE)||"False",r=n.statementToCode(e,"DO"+i)||n.PASS,n.STATEMENT_SUFFIX&&(r=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)+r),a+=(0===i?"if ":"elif ")+o+":\n"+r,i++}while(e.getInput("IF"+i));return(e.getInput("ELSE")||n.STATEMENT_SUFFIX)&&(r=n.statementToCode(e,"ELSE")||n.PASS,n.STATEMENT_SUFFIX&&(r=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)+r),a+="else:\n"+r),a},i=function(e,n){let o;o=e.getField("TIMES")?String(parseInt(e.getFieldValue("TIMES"),10)):n.valueToCode(e,"TIMES",t.NONE)||"0",o=r.isNumber$$module$build$src$core$utils$string(o)?parseInt(o,10):"int("+o+")";let i=n.statementToCode(e,"DO");return i=n.addLoopTrap(i,e)||n.PASS,"for "+n.nameDB_.getDistinctName("count",r.NameType$$module$build$src$core$names.VARIABLE)+" in range("+o+"):\n"+i},a=function(e,n){const r=e.getFieldValue("OP");let o;if("NEG"===r)return o=n.valueToCode(e,"NUM",t.UNARY_SIGN)||"0",["-"+o,t.UNARY_SIGN];switch(n.definitions_.import_math="import math",e="SIN"===r||"COS"===r||"TAN"===r?n.valueToCode(e,"NUM",t.MULTIPLICATIVE)||"0":n.valueToCode(e,"NUM",t.NONE)||"0",r){case"ABS":o="math.fabs("+e+")";break;case"ROOT":o="math.sqrt("+e+")";break;case"LN":o="math.log("+e+")";break;case"LOG10":o="math.log10("+e+")";break;case"EXP":o="math.exp("+e+")";break;case"POW10":o="math.pow(10,"+e+")";break;case"ROUND":o="round("+e+")";break;case"ROUNDUP":o="math.ceil("+e+")";break;case"ROUNDDOWN":o="math.floor("+e+")";break;case"SIN":o="math.sin("+e+" / 180.0 * math.pi)";break;case"COS":o="math.cos("+e+" / 180.0 * math.pi)";break;case"TAN":o="math.tan("+e+" / 180.0 * math.pi)"}if(o)return[o,t.FUNCTION_CALL];switch(r){case"ASIN":o="math.asin("+e+") / math.pi * 180";break;case"ACOS":o="math.acos("+e+") / math.pi * 180";break;case"ATAN":o="math.atan("+e+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+r)}return[o,t.MULTIPLICATIVE]},s=function(e,n){var o=[],i=e.workspace,a=r.allUsedVarModels$$module$build$src$core$variables(i)||[];for(var s of a)a=s.name,-1===e.getVars().indexOf(a)&&o.push(n.getVariableName(a));for(i=r.allDeveloperVariables$$module$build$src$core$variables(i),s=0;s<i.length;s++)o.push(n.nameDB_.getName(i[s],r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));i=o.length?n.INDENT+"global "+o.join(", ")+"\n":"",o=n.getProcedureName(e.getFieldValue("NAME")),s="",n.STATEMENT_PREFIX&&(s+=n.injectId(n.STATEMENT_PREFIX,e)),n.STATEMENT_SUFFIX&&(s+=n.injectId(n.STATEMENT_SUFFIX,e)),s&&(s=n.prefixLines(s,n.INDENT)),a="",n.INFINITE_LOOP_TRAP&&(a=n.prefixLines(n.injectId(n.INFINITE_LOOP_TRAP,e),n.INDENT));let u=n.statementToCode(e,"STACK"),l=n.valueToCode(e,"RETURN",t.NONE)||"",E="";u&&l&&(E=s),l?l=n.INDENT+"return "+l+"\n":u||(u=n.PASS);const d=[],T=e.getVars();for(let e=0;e<T.length;e++)d[e]=n.getVariableName(T[e]);return i="def "+o+"("+d.join(", ")+"):\n"+i+s+a+u+E+l,i=n.scrub_(e,i),n.definitions_["%"+o]=i,null},u=function(e,n){var r=n.provideFunction_("text_prompt",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(msg):\n  try:\n    return raw_input(msg)\n  except NameError:\n    return input(msg)\n`);return r=r+"("+(n=e.getField("TEXT")?n.quote_(e.getFieldValue("TEXT")):n.valueToCode(e,"TEXT",t.NONE)||"''")+")","NUMBER"===e.getFieldValue("TYPE")&&(r="float("+r+")"),[r,t.FUNCTION_CALL]},l=function(e,n){return[n.getVariableName(e.getFieldValue("VAR")),t.ATOMIC]},E=function(e,n){const r=n.valueToCode(e,"VALUE",t.NONE)||"0";return n.getVariableName(e.getFieldValue("VAR"))+" = "+r+"\n"};(n=t||(t={}))[n.ATOMIC=0]="ATOMIC",n[n.COLLECTION=1]="COLLECTION",n[n.STRING_CONVERSION=1]="STRING_CONVERSION",n[n.MEMBER=2.1]="MEMBER",n[n.FUNCTION_CALL=2.2]="FUNCTION_CALL",n[n.EXPONENTIATION=3]="EXPONENTIATION",n[n.UNARY_SIGN=4]="UNARY_SIGN",n[n.BITWISE_NOT=4]="BITWISE_NOT",n[n.MULTIPLICATIVE=5]="MULTIPLICATIVE",n[n.ADDITIVE=6]="ADDITIVE",n[n.BITWISE_SHIFT=7]="BITWISE_SHIFT",n[n.BITWISE_AND=8]="BITWISE_AND",n[n.BITWISE_XOR=9]="BITWISE_XOR",n[n.BITWISE_OR=10]="BITWISE_OR",n[n.RELATIONAL=11]="RELATIONAL",n[n.LOGICAL_NOT=12]="LOGICAL_NOT",n[n.LOGICAL_AND=13]="LOGICAL_AND",n[n.LOGICAL_OR=14]="LOGICAL_OR",n[n.CONDITIONAL=15]="CONDITIONAL",n[n.LAMBDA=16]="LAMBDA",n[n.NONE=99]="NONE";var d=class extends r.CodeGenerator$$module$build$src$core$generator{constructor(e="Python"){super(e),this.ORDER_OVERRIDES=[[t.FUNCTION_CALL,t.MEMBER],[t.FUNCTION_CALL,t.FUNCTION_CALL],[t.MEMBER,t.MEMBER],[t.MEMBER,t.FUNCTION_CALL],[t.LOGICAL_NOT,t.LOGICAL_NOT],[t.LOGICAL_AND,t.LOGICAL_AND],[t.LOGICAL_OR,t.LOGICAL_OR]],this.PASS="",this.isInitialized=!1;for(const n in t)"string"!=typeof(e=t[n])&&(this["ORDER_"+n]=e);this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip")}init(e){super.init(e),this.PASS=this.INDENT+"pass\n",this.nameDB_?this.nameDB_.reset():this.nameDB_=new r.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const t=[];var n=r.allDeveloperVariables$$module$build$src$core$variables(e);for(let e=0;e<n.length;e++)t.push(this.nameDB_.getName(n[e],r.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE)+" = None");for(e=r.allUsedVarModels$$module$build$src$core$variables(e),n=0;n<e.length;n++)t.push(this.getVariableName(e[n].getId())+" = None");this.definitions_.variables=t.join("\n"),this.isInitialized=!0}finish(e){const t=[],n=[];for(let e in this.definitions_){const r=this.definitions_[e];r.match(/^(from\s+\S+\s+)?import\s+\S+/)?t.push(r):n.push(r)}return e=super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),(t.join("\n")+"\n\n"+n.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+e}scrubNakedValue(e){return e+"\n"}quote_(e){let t="'";return-1!==(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===e.indexOf('"')?t='"':e=e.replace(/'/g,"\\'")),t+e+t}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")}scrub_(e,t,n=!1){let o="";if(!e.outputConnection||!e.outputConnection.targetConnection){var i=e.getCommentText();i&&(i=r.wrap$$module$build$src$core$utils$string(i,this.COMMENT_WRAP-3),o+=this.prefixLines(i+"\n","# "));for(let t=0;t<e.inputList.length;t++)e.inputList[t].type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(i=e.inputList[t].connection.targetBlock())&&(i=this.allNestedComments(i))&&(o+=this.prefixLines(i,"# "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),o+t+(n?"":this.blockToCode(e))}getAdjustedInt(e,n,o=0,i=!1){e.workspace.options.oneBasedIndex&&o--;const a=e.workspace.options.oneBasedIndex?"1":"0";return e=this.valueToCode(e,n,o?t.ADDITIVE:t.NONE)||a,r.isNumber$$module$build$src$core$utils$string(e)?(e=parseInt(e,10)+o,i&&(e=-e)):(e=0<o?"int("+e+" + "+o+")":0>o?"int("+e+" - "+-o+")":"int("+e+")",i&&(e="-"+e)),e}},T={};T.Order=t,T.PythonGenerator=d;var N={colour_blend:function(e,n){return[n.provideFunction_("colour_blend",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):\n  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)\n  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)\n  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)\n  ratio = min(1, max(0, ratio))\n  r = round(r1 * (1 - ratio) + r2 * ratio)\n  g = round(g1 * (1 - ratio) + g2 * ratio)\n  b = round(b1 * (1 - ratio) + b2 * ratio)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(n.valueToCode(e,"COLOUR1",t.NONE)||"'#000000'")+", "+(n.valueToCode(e,"COLOUR2",t.NONE)||"'#000000'")+", "+(e=n.valueToCode(e,"RATIO",t.NONE)||0)+")",t.FUNCTION_CALL]},colour_picker:function(e,n){return[n.quote_(e.getFieldValue("COLOUR")),t.ATOMIC]},colour_random:function(e,n){return n.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",t.FUNCTION_CALL]},colour_rgb:function(e,n){return[n.provideFunction_("colour_rgb",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):\n  r = round(min(100, max(0, r)) * 2.55)\n  g = round(min(100, max(0, g)) * 2.55)\n  b = round(min(100, max(0, b)) * 2.55)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(n.valueToCode(e,"RED",t.NONE)||0)+", "+(n.valueToCode(e,"GREEN",t.NONE)||0)+", "+(e=n.valueToCode(e,"BLUE",t.NONE)||0)+")",t.FUNCTION_CALL]}},c={lists_create_empty:function(e,n){return["[]",t.ATOMIC]},lists_create_with:function(e,n){const r=Array(e.itemCount_);for(let o=0;o<e.itemCount_;o++)r[o]=n.valueToCode(e,"ADD"+o,t.NONE)||"None";return["["+r.join(", ")+"]",t.ATOMIC]},lists_getIndex:function(e,n){const r=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START";var i=n.valueToCode(e,"VALUE","RANDOM"===o?t.NONE:t.MEMBER)||"[]";switch(o){case"FIRST":if("GET"===r)return[i+"[0]",t.MEMBER];if("GET_REMOVE"===r)return[i+".pop(0)",t.FUNCTION_CALL];if("REMOVE"===r)return i+".pop(0)\n";break;case"LAST":if("GET"===r)return[i+"[-1]",t.MEMBER];if("GET_REMOVE"===r)return[i+".pop()",t.FUNCTION_CALL];if("REMOVE"===r)return i+".pop()\n";break;case"FROM_START":if(e=n.getAdjustedInt(e,"AT"),"GET"===r)return[i+"["+e+"]",t.MEMBER];if("GET_REMOVE"===r)return[i+".pop("+e+")",t.FUNCTION_CALL];if("REMOVE"===r)return i+".pop("+e+")\n";break;case"FROM_END":if(e=n.getAdjustedInt(e,"AT",1,!0),"GET"===r)return[i+"["+e+"]",t.MEMBER];if("GET_REMOVE"===r)return[i+".pop("+e+")",t.FUNCTION_CALL];if("REMOVE"===r)return i+".pop("+e+")\n";break;case"RANDOM":if(n.definitions_.import_random="import random","GET"===r)return["random.choice("+i+")",t.FUNCTION_CALL];if(i=n.provideFunction_("lists_remove_random_item",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  x = int(random.random() * len(myList))\n  return myList.pop(x)\n`)+"("+i+")","GET_REMOVE"===r)return[i,t.FUNCTION_CALL];if("REMOVE"===r)return i+"\n"}throw Error("Unhandled combination (lists_getIndex).")},lists_getSublist:function(e,n){const o=n.valueToCode(e,"LIST",t.MEMBER)||"[]";var i=e.getFieldValue("WHERE1");const a=e.getFieldValue("WHERE2");switch(i){case"FROM_START":0===(i=n.getAdjustedInt(e,"AT1"))&&(i="");break;case"FROM_END":i=n.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":i="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(a){case"FROM_START":e=n.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=n.getAdjustedInt(e,"AT2",0,!0),r.isNumber$$module$build$src$core$utils$string(String(e))?0===e&&(e=""):(n.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[o+"["+i+" : "+e+"]",t.MEMBER]},lists_indexOf:function(e,n){const r=n.valueToCode(e,"FIND",t.NONE)||"[]",o=n.valueToCode(e,"VALUE",t.NONE)||"''";let i=" -1",a="",s=" - 1";return e.workspace.options.oneBasedIndex&&(i=" 0",a=" + 1",s=""),[("FIRST"===e.getFieldValue("END")?n.provideFunction_("first_index",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = my_list.index(elem)${a}\n  except: index =${i}\n  return index\n`):n.provideFunction_("last_index",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = len(my_list) - my_list[::-1].index(elem)${s}\n  except: index =${i}\n  return index\n`))+"("+o+", "+r+")",t.FUNCTION_CALL]},lists_isEmpty:function(e,n){return["not len("+(n.valueToCode(e,"VALUE",t.NONE)||"[]")+")",t.LOGICAL_NOT]},lists_length:function(e,n){return["len("+(n.valueToCode(e,"VALUE",t.NONE)||"[]")+")",t.FUNCTION_CALL]},lists_repeat:function(e,n){return["["+(n.valueToCode(e,"ITEM",t.NONE)||"None")+"] * "+(e=n.valueToCode(e,"NUM",t.MULTIPLICATIVE)||"0"),t.MULTIPLICATIVE]},lists_reverse:function(e,n){return["list(reversed("+(n.valueToCode(e,"LIST",t.NONE)||"[]")+"))",t.FUNCTION_CALL]},lists_setIndex:function(e,n){let o=n.valueToCode(e,"LIST",t.MEMBER)||"[]";const i=e.getFieldValue("MODE")||"GET";var a=e.getFieldValue("WHERE")||"FROM_START";const s=n.valueToCode(e,"TO",t.NONE)||"None";switch(a){case"FIRST":if("SET"===i)return o+"[0] = "+s+"\n";if("INSERT"===i)return o+".insert(0, "+s+")\n";break;case"LAST":if("SET"===i)return o+"[-1] = "+s+"\n";if("INSERT"===i)return o+".append("+s+")\n";break;case"FROM_START":if(n=n.getAdjustedInt(e,"AT"),"SET"===i)return o+"["+n+"] = "+s+"\n";if("INSERT"===i)return o+".insert("+n+", "+s+")\n";break;case"FROM_END":if(n=n.getAdjustedInt(e,"AT",1,!0),"SET"===i)return o+"["+n+"] = "+s+"\n";if("INSERT"===i)return o+".insert("+n+", "+s+")\n";break;case"RANDOM":if(n.definitions_.import_random="import random",o.match(/^\w+$/)?e="":(a=(e=n.nameDB_.getDistinctName("tmp_list",r.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+"\n",o=e,e=a),e+=(n=n.nameDB_.getDistinctName("tmp_x",r.NameType$$module$build$src$core$names.VARIABLE))+" = int(random.random() * len("+o+"))\n","SET"===i)return e+(o+"[")+n+"] = "+s+"\n";if("INSERT"===i)return e+(o+".insert(")+n+", "+s+")\n"}throw Error("Unhandled combination (lists_setIndex).")},lists_sort:function(e,n){const r=n.valueToCode(e,"LIST",t.NONE)||"[]",o=e.getFieldValue("TYPE");return e="1"===e.getFieldValue("DIRECTION")?"False":"True",[n.provideFunction_("lists_sort",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):\n  def try_float(s):\n    try:\n      return float(s)\n    except:\n      return 0\n  key_funcs = {\n    "NUMERIC": try_float,\n    "TEXT": str,\n    "IGNORE_CASE": lambda s: str(s).lower()\n  }\n  key_func = key_funcs[type]\n  list_cpy = list(my_list)\n  return sorted(list_cpy, key=key_func, reverse=reverse)\n`)+"("+r+', "'+o+'", '+e+")",t.FUNCTION_CALL]},lists_split:function(e,n){var r=e.getFieldValue("MODE");if("SPLIT"===r)e=(r=n.valueToCode(e,"INPUT",t.MEMBER)||"''")+".split("+(e=n.valueToCode(e,"DELIM",t.NONE))+")";else{if("JOIN"!==r)throw Error("Unknown mode: "+r);r=n.valueToCode(e,"INPUT",t.NONE)||"[]",e=(n.valueToCode(e,"DELIM",t.MEMBER)||"''")+".join("+r+")"}return[e,t.FUNCTION_CALL]}},_={};_.controls_if=o,_.controls_ifelse=o,_.logic_boolean=function(e,n){return["TRUE"===e.getFieldValue("BOOL")?"True":"False",t.ATOMIC]},_.logic_compare=function(e,n){const r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],o=t.RELATIONAL;return[(n.valueToCode(e,"A",o)||"0")+" "+r+" "+(e=n.valueToCode(e,"B",o)||"0"),o]},_.logic_negate=function(e,n){return["not "+(n.valueToCode(e,"BOOL",t.LOGICAL_NOT)||"True"),t.LOGICAL_NOT]},_.logic_null=function(e,n){return["None",t.ATOMIC]},_.logic_operation=function(e,n){const r="AND"===e.getFieldValue("OP")?"and":"or",o="and"===r?t.LOGICAL_AND:t.LOGICAL_OR;let i=n.valueToCode(e,"A",o);return e=n.valueToCode(e,"B",o),i||e?(n="and"===r?"True":"False",i||(i=n),e||(e=n)):e=i="False",[i+" "+r+" "+e,o]},_.logic_ternary=function(e,n){const r=n.valueToCode(e,"IF",t.CONDITIONAL)||"False";return[(n.valueToCode(e,"THEN",t.CONDITIONAL)||"None")+" if "+r+" else "+(e=n.valueToCode(e,"ELSE",t.CONDITIONAL)||"None"),t.CONDITIONAL]};var m={controls_flow_statements:function(e,t){let n="";if(t.STATEMENT_PREFIX&&(n+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(n+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX){const r=e.getSurroundLoop();r&&!r.suppressPrefixSuffix&&(n+=t.injectId(t.STATEMENT_PREFIX,r))}switch(e.getFieldValue("FLOW")){case"BREAK":return n+"break\n";case"CONTINUE":return n+"continue\n"}throw Error("Unknown flow statement.")},controls_for:function(e,n){const o=n.getVariableName(e.getFieldValue("VAR"));var i=n.valueToCode(e,"FROM",t.NONE)||"0",a=n.valueToCode(e,"TO",t.NONE)||"0",s=n.valueToCode(e,"BY",t.NONE)||"1";let u=n.statementToCode(e,"DO");u=n.addLoopTrap(u,e)||n.PASS;let l="";e=function(){return n.provideFunction_("upRange",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start <= stop:\n    yield start\n    start += abs(step)\n`)};const E=function(){return n.provideFunction_("downRange",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start >= stop:\n    yield start\n    start -= abs(step)\n`)};if(r.isNumber$$module$build$src$core$utils$string(i)&&r.isNumber$$module$build$src$core$utils$string(a)&&r.isNumber$$module$build$src$core$utils$string(s))i=Number(i),a=Number(a),s=Math.abs(Number(s)),0==i%1&&0==a%1&&0==s%1?(i<=a?(a++,e=0===i&&1===s?a:i+", "+a,1!==s&&(e+=", "+s)):e=i+", "+--a+", -"+s,e="range("+e+")"):(e=i<a?e():E(),e+="("+i+", "+a+", "+s+")");else{const t=function(e,t){return r.isNumber$$module$build$src$core$utils$string(e)?e=String(Number(e)):e.match(/^\w+$/)||(t=n.nameDB_.getDistinctName(o+t,r.NameType$$module$build$src$core$names.VARIABLE),l+=t+" = "+e+"\n",e=t),e};i=t(i,"_start"),a=t(a,"_end"),s=t(s,"_inc"),"number"==typeof i&&"number"==typeof a?(e=i<a?e():E(),e+="("+i+", "+a+", "+s+")"):e="("+i+" <= "+a+") and "+e()+"("+i+", "+a+", "+s+") or "+E()+"("+i+", "+a+", "+s+")"}return l+="for "+o+" in "+e+":\n"+u},controls_forEach:function(e,n){const r=n.getVariableName(e.getFieldValue("VAR")),o=n.valueToCode(e,"LIST",t.RELATIONAL)||"[]";let i=n.statementToCode(e,"DO");return i=n.addLoopTrap(i,e)||n.PASS,"for "+r+" in "+o+":\n"+i}};m.controls_repeat=i,m.controls_repeat_ext=i,m.controls_whileUntil=function(e,n){const r="UNTIL"===e.getFieldValue("MODE");let o=n.valueToCode(e,"BOOL",r?t.LOGICAL_NOT:t.NONE)||"False",i=n.statementToCode(e,"DO");return i=n.addLoopTrap(i,e)||n.PASS,r&&(o="not "+o),"while "+o+":\n"+i};var I={math_arithmetic:function(e,n){var r={ADD:[" + ",t.ADDITIVE],MINUS:[" - ",t.ADDITIVE],MULTIPLY:[" * ",t.MULTIPLICATIVE],DIVIDE:[" / ",t.MULTIPLICATIVE],POWER:[" ** ",t.EXPONENTIATION]}[e.getFieldValue("OP")];const o=r[0];return r=r[1],[(n.valueToCode(e,"A",r)||"0")+o+(e=n.valueToCode(e,"B",r)||"0"),r]},math_atan2:function(e,n){n.definitions_.import_math="import math";const r=n.valueToCode(e,"X",t.NONE)||"0";return["math.atan2("+(n.valueToCode(e,"Y",t.NONE)||"0")+", "+r+") / math.pi * 180",t.MULTIPLICATIVE]},math_change:function(e,n){n.definitions_.from_numbers_import_Number="from numbers import Number";const r=n.valueToCode(e,"DELTA",t.ADDITIVE)||"0";return(e=n.getVariableName(e.getFieldValue("VAR")))+" = ("+e+" if isinstance("+e+", Number) else 0) + "+r+"\n"},math_constant:function(e,n){const r={PI:["math.pi",t.MEMBER],E:["math.e",t.MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",t.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",t.MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",t.MEMBER],INFINITY:["float('inf')",t.ATOMIC]};return"INFINITY"!==(e=e.getFieldValue("CONSTANT"))&&(n.definitions_.import_math="import math"),r[e]},math_constrain:function(e,n){return["min(max("+(n.valueToCode(e,"VALUE",t.NONE)||"0")+", "+(n.valueToCode(e,"LOW",t.NONE)||"0")+"), "+(e=n.valueToCode(e,"HIGH",t.NONE)||"float('inf')")+")",t.FUNCTION_CALL]},math_modulo:function(e,n){return[(n.valueToCode(e,"DIVIDEND",t.MULTIPLICATIVE)||"0")+" % "+(e=n.valueToCode(e,"DIVISOR",t.MULTIPLICATIVE)||"0"),t.MULTIPLICATIVE]},math_number:function(e,n){return 1/0===(e=Number(e.getFieldValue("NUM")))?['float("inf")',t.FUNCTION_CALL]:-1/0===e?['-float("inf")',t.UNARY_SIGN]:[String(e),0>e?t.UNARY_SIGN:t.ATOMIC]},math_number_property:function(e,n){var r={EVEN:[" % 2 == 0",t.MULTIPLICATIVE,t.RELATIONAL],ODD:[" % 2 == 1",t.MULTIPLICATIVE,t.RELATIONAL],WHOLE:[" % 1 == 0",t.MULTIPLICATIVE,t.RELATIONAL],POSITIVE:[" > 0",t.RELATIONAL,t.RELATIONAL],NEGATIVE:[" < 0",t.RELATIONAL,t.RELATIONAL],DIVISIBLE_BY:[null,t.MULTIPLICATIVE,t.RELATIONAL],PRIME:[null,t.NONE,t.FUNCTION_CALL]};const o=e.getFieldValue("PROPERTY"),[i,a,s]=r[o];if(r=n.valueToCode(e,"NUMBER_TO_CHECK",a)||"0","PRIME"===o)n.definitions_.import_math="import math",n.definitions_.from_numbers_import_Number="from numbers import Number",e=n.provideFunction_("math_isPrime",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(n):\n  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  # If n is not a number but a string, try parsing it.\n  if not isinstance(n, Number):\n    try:\n      n = float(n)\n    except:\n      return False\n  if n == 2 or n == 3:\n    return True\n  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.\n  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:\n    return False\n  # Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for x in range(6, int(math.sqrt(n)) + 2, 6):\n    if n % (x - 1) == 0 or n % (x + 1) == 0:\n      return False\n  return True\n`)+"("+r+")";else if("DIVISIBLE_BY"===o){if("0"===(e=n.valueToCode(e,"DIVISOR",t.MULTIPLICATIVE)||"0"))return["False",t.ATOMIC];e=r+" % "+e+" == 0"}else e=r+i;return[e,s]},math_on_list:function(e,n){const r=e.getFieldValue("OP");switch(e=n.valueToCode(e,"LIST",t.NONE)||"[]",r){case"SUM":n="sum("+e+")";break;case"MIN":n="min("+e+")";break;case"MAX":n="max("+e+")";break;case"AVERAGE":n.definitions_.from_numbers_import_Number="from numbers import Number",n=n.provideFunction_("math_mean",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = [e for e in myList if isinstance(e, Number)]\n  if not localList: return\n  return float(sum(localList)) / len(localList)\n`)+"("+e+")";break;case"MEDIAN":n.definitions_.from_numbers_import_Number="from numbers import Number",n=n.provideFunction_("math_median",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = sorted([e for e in myList if isinstance(e, Number)])\n  if not localList: return\n  if len(localList) % 2 == 0:\n    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0\n  else:\n    return localList[(len(localList) - 1) // 2]\n`)+"("+e+")";break;case"MODE":n=n.provideFunction_("math_modes",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(some_list):\n  modes = []\n  # Using a lists of [item, count] to keep count rather than dict\n  # to avoid "unhashable" errors when the counted item is itself a list or dict.\n  counts = []\n  maxCount = 1\n  for item in some_list:\n    found = False\n    for count in counts:\n      if count[0] == item:\n        count[1] += 1\n        maxCount = max(maxCount, count[1])\n        found = True\n    if not found:\n      counts.append([item, 1])\n  for counted_item, item_count in counts:\n    if item_count == maxCount:\n      modes.append(counted_item)\n  return modes\n`)+"("+e+")";break;case"STD_DEV":n.definitions_.import_math="import math",n=n.provideFunction_("math_standard_deviation",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(numbers):\n  n = len(numbers)\n  if n == 0: return\n  mean = float(sum(numbers)) / n\n  variance = sum((x - mean) ** 2 for x in numbers) / n\n  return math.sqrt(variance)\n`)+"("+e+")";break;case"RANDOM":n.definitions_.import_random="import random",n="random.choice("+e+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.FUNCTION_CALL]},math_random_float:function(e,n){return n.definitions_.import_random="import random",["random.random()",t.FUNCTION_CALL]},math_random_int:function(e,n){return n.definitions_.import_random="import random",["random.randint("+(n.valueToCode(e,"FROM",t.NONE)||"0")+", "+(e=n.valueToCode(e,"TO",t.NONE)||"0")+")",t.FUNCTION_CALL]}};I.math_round=a,I.math_single=a,I.math_trig=a;var O={procedures_callnoreturn:function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+"\n"},procedures_callreturn:function(e,n){const r=n.getProcedureName(e.getFieldValue("NAME")),o=[],i=e.getVars();for(let r=0;r<i.length;r++)o[r]=n.valueToCode(e,"ARG"+r,t.NONE)||"None";return[r+"("+o.join(", ")+")",t.FUNCTION_CALL]}};O.procedures_defnoreturn=s,O.procedures_defreturn=s,O.procedures_ifreturn=function(e,n){let r="if "+(n.valueToCode(e,"CONDITION",t.NONE)||"False")+":\n";return n.STATEMENT_SUFFIX&&(r+=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)),e.hasReturnValue_?(e=n.valueToCode(e,"VALUE",t.NONE)||"None",r+=n.INDENT+"return "+e+"\n"):r+=n.INDENT+"return\n",r};var A=/^\s*'([^']|\\')*'\s*$/,L=function(e){return A.test(e)?[e,t.ATOMIC]:["str("+e+")",t.FUNCTION_CALL]},C={text:function(e,n){return[n.quote_(e.getFieldValue("TEXT")),t.ATOMIC]},text_append:function(e,n){const r=n.getVariableName(e.getFieldValue("VAR"));return e=n.valueToCode(e,"TEXT",t.NONE)||"''",r+" = str("+r+") + "+L(e)[0]+"\n"},text_changeCase:function(e,n){const r={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[e.getFieldValue("CASE")];return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+r,t.FUNCTION_CALL]},text_charAt:function(e,n){const r=e.getFieldValue("WHERE")||"FROM_START",o=n.valueToCode(e,"VALUE","RANDOM"===r?t.NONE:t.MEMBER)||"''";switch(r){case"FIRST":return[o+"[0]",t.MEMBER];case"LAST":return[o+"[-1]",t.MEMBER];case"FROM_START":return[o+"["+(e=n.getAdjustedInt(e,"AT"))+"]",t.MEMBER];case"FROM_END":return[o+"["+(e=n.getAdjustedInt(e,"AT",1,!0))+"]",t.MEMBER];case"RANDOM":return n.definitions_.import_random="import random",[n.provideFunction_("text_random_letter",`\ndef ${n.FUNCTION_NAME_PLACEHOLDER_}(text):\n  x = int(random.random() * len(text))\n  return text[x]\n`)+"("+o+")",t.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},text_count:function(e,n){return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+".count("+(e=n.valueToCode(e,"SUB",t.NONE)||"''")+")",t.FUNCTION_CALL]},text_getSubstring:function(e,n){var o=e.getFieldValue("WHERE1");const i=e.getFieldValue("WHERE2"),a=n.valueToCode(e,"STRING",t.MEMBER)||"''";switch(o){case"FROM_START":0===(o=n.getAdjustedInt(e,"AT1"))&&(o="");break;case"FROM_END":o=n.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":o="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(i){case"FROM_START":e=n.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=n.getAdjustedInt(e,"AT2",0,!0),r.isNumber$$module$build$src$core$utils$string(String(e))?0===e&&(e=""):(n.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[a+"["+o+" : "+e+"]",t.MEMBER]},text_indexOf:function(e,n){const r="FIRST"===e.getFieldValue("END")?"find":"rfind",o=n.valueToCode(e,"FIND",t.NONE)||"''";return n=(n.valueToCode(e,"VALUE",t.MEMBER)||"''")+"."+r+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.ADDITIVE]:[n,t.FUNCTION_CALL]},text_isEmpty:function(e,n){return["not len("+(n.valueToCode(e,"VALUE",t.NONE)||"''")+")",t.LOGICAL_NOT]},text_join:function(e,n){switch(e.itemCount_){case 0:return["''",t.ATOMIC];case 1:return e=n.valueToCode(e,"ADD0",t.NONE)||"''",L(e);case 2:var o=n.valueToCode(e,"ADD0",t.NONE)||"''";return e=n.valueToCode(e,"ADD1",t.NONE)||"''",[L(o)[0]+" + "+L(e)[0],t.ADDITIVE];default:o=[];for(let r=0;r<e.itemCount_;r++)o[r]=n.valueToCode(e,"ADD"+r,t.NONE)||"''";return["''.join([str("+(e=n.nameDB_.getDistinctName("x",r.NameType$$module$build$src$core$names.VARIABLE))+") for "+e+" in ["+o.join(", ")+"]])",t.FUNCTION_CALL]}},text_length:function(e,n){return["len("+(n.valueToCode(e,"VALUE",t.NONE)||"''")+")",t.FUNCTION_CALL]},text_multiline:function(e,n){return e=n.multiline_quote_(e.getFieldValue("TEXT")),n=-1!==e.indexOf("+")?t.ADDITIVE:t.ATOMIC,[e,n]},text_print:function(e,n){return"print("+(n.valueToCode(e,"TEXT",t.NONE)||"''")+")\n"}};C.text_prompt=u,C.text_prompt_ext=u,C.text_replace=function(e,n){return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+".replace("+(n.valueToCode(e,"FROM",t.NONE)||"''")+", "+(e=n.valueToCode(e,"TO",t.NONE)||"''")+")",t.MEMBER]},C.text_reverse=function(e,n){return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+"[::-1]",t.MEMBER]},C.text_trim=function(e,n){const r={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[e.getFieldValue("MODE")];return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+r,t.FUNCTION_CALL]};var p={};p.variables_get=l,p.variables_set=E;var f={};f.variables_get_dynamic=l,f.variables_set_dynamic=E;var R=new d;R.addReservedWords("math,random,Number");var M=Object.assign({},N,c,_,m,I,O,C,p,f);for(const e in M)R.forBlock[e]=M[e];var F={};return F.Order=t,F.PythonGenerator=d,F.pythonGenerator=R,F.__namespace__=r,F})?r.apply(t,o):r)||(e.exports=i)}}]);