[aliases]
test = pytest

[tool:pytest]
addopts = 
	--tb native
	-W ignore
	--cov=altai
	--cov-append
	--durations=50
	--durations-min=1.0
	--timeout=600
	--timeout_method=thread
markers = 
	tf1: runs only tests marked with tf1 to allow testing for algorithms depending on TF1.x behaviour

[flake8]
max-line-length = 120
exclude = 
	doc/source/conf.py
	.eggs/

[mypy]
ignore_missing_imports = True
no_implicit_optional = True
show_error_codes = True
warn_unused_ignores = True
warn_redundant_casts = True

[mypy-conf]
ignore_errors = True

[tox:tox]
envlist = 
	default
	tensorflow
	torch
	shap
	ray
	all

[testenv:licenses]
basepython = python
deps = 
	pip-licenses
extras = all
commands = 
	pip-licenses \
	--from=mixed \
	--format=csv \
	--output-file=./licenses/license_info.csv
	pip-licenses \
	--from=mixed \
	--format=plain-vertical \
	--with-license-file \
	--no-license-path \
	--output-file=./licenses/license.txt

[testenv:default]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
passenv = COMMAND
commands = {env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=default}

[testenv:ray]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
extras = 
	ray
passenv = COMMAND
commands = {env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=ray}

[testenv:tensorflow]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
extras = 
	tensorflow
commands = 
	{env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=tensorflow}

[testenv:torch]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
extras = 
	torch
commands = 
	{env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=torch}

[testenv:shap]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
extras = 
	shap
commands = 
	{env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=shap}

[testenv:all]
basepython = python
deps = pytest
	pytest-cov
	pytest-timeout
extras = 
	all
commands = 
	{env:COMMAND:pytest --no-cov altai/tests/test_dep_management.py --opt-dep=all}

[egg_info]
tag_build = 
tag_date = 0

