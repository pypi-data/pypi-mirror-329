export const ids=["79920"];export const modules={50875:function(t,e,n){n.d(e,{Eu:()=>o,hZ:()=>r,o9:()=>c});var a=n(27486),i=n(11259);const s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return s[t%s.length]}function r(t,e){const n=e.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,i.Rq)(n)}const c=(0,a.Z)((t=>s.map(((e,n)=>r(n,t)))),((t,e)=>t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1")))},6736:function(t,e,n){n.d(e,{f:()=>o});var a=n(44249),i=n(72621),s=(n(39527),n(36993),n(15093));const o=t=>(0,a.Z)(null,(function(t,e){class n extends e{constructor(...e){super(...e),t(this)}}return{F:n,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,i.Z)(n,"connectedCallback",this,3)([]),this._checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,i.Z)(n,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,i.Z)(n,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this._checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"_checkSubscribed",value:function(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some((t=>void 0===this[t]))&&(this.__unsubs=this.hassSubscribe())}}]}}),t)},18709:function(t,e,n){n.a(t,(async function(t,a){try{n.r(e),n.d(e,{HuiEnergyDevicesGraphCard:()=>m});var i=n(44249),s=(n(92745),n(39527),n(67670),n(41360),n(13334),n(57243)),o=n(15093),r=n(35359),c=n(27486),d=n(50875),u=n(50602),h=n(25179),l=n(1118),f=n(17705),v=n(6736),b=n(93331),g=(n(54977),n(36522)),p=n(48066),_=t([h,l,u]);[h,l,u]=_.then?(await _)():_;let m=(0,i.Z)([(0,o.Mo)("hui-energy-devices-graph-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_chartData",value:()=>[]},{kind:"field",decorators:[(0,o.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,l.UB)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._data=t,this._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,b.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?s.dy` <ha-card> ${this._config.title?s.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="content ${(0,r.$)({"has-header":!!this._config.title})}"> <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._createOptions(this._chartData)}" .height="${28*(this._chartData[0]?.data?.length||0)+50+"px"}" @chart-click="${this._handleChartClick}"></ha-chart-base> </div> </ha-card> `:s.Ld}},{kind:"method",key:"_renderTooltip",value:function(t){const e=`<h4 style="text-align: center; margin: 0;">${this._getDeviceName(t.value[1])}</h4>`,n=`${(0,u.uf)(t.value[0],this.hass.locale,(0,u.l4)(void 0,this.hass.entities[t.value[1]]))} kWh`;return`${e}${t.marker} ${t.seriesName}: ${n}`}},{kind:"field",key:"_createOptions",value(){return(0,c.Z)((t=>{const e=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches;return{xAxis:{type:"value",name:"kWh"},yAxis:{type:"category",inverse:!0,triggerEvent:!0,data:t[0]?.data?.map((t=>t.value[1])),axisLabel:{formatter:this._getDeviceName.bind(this),overflow:"truncate",fontSize:12,margin:5,width:Math.min(e?100:200,Math.max(...t[0]?.data?.map((t=>(0,p.U)(this._getDeviceName(t.value[1]),12)+5))||[]))}},grid:{top:5,left:5,right:40,bottom:0,containLabel:!0},tooltip:{show:!0,formatter:this._renderTooltip.bind(this)}}}))}},{kind:"method",key:"_getDeviceName",value:function(t){return this._data?.prefs.device_consumption.find((e=>e.stat_consumption===t))?.name||(0,f.Kd)(this.hass,t,this._data?.statsMetadata[t])}},{kind:"method",key:"_getStatistics",value:async function(t){const e=t.stats,n=t.statsCompare,a=[],i=[],s=[{type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:a,barWidth:n?10:20,cursor:"default"}];n&&s.push({type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.previous_energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:i,barWidth:10,cursor:"default"});const o=getComputedStyle(this);t.prefs.device_consumption.forEach(((t,s)=>{const r=t.stat_consumption in e&&(0,f.Kj)(e[t.stat_consumption])||0,c=(0,d.hZ)(s,o);if(a.push({id:s,value:[r,t.stat_consumption],itemStyle:{color:c+"7F",borderColor:c}}),n){const e=t.stat_consumption in n&&(0,f.Kj)(n[t.stat_consumption])||0;i.push({id:s,value:[e,t.stat_consumption],itemStyle:{color:c+"32",borderColor:c+"7F"}})}})),a.sort(((t,e)=>e.value[0]-t.value[0])),a.length=this._config?.max_devices||a.length,this._chartData=s,await this.updateComplete}},{kind:"method",key:"_handleChartClick",value:function(t){"axisLabel"===t.detail.targetType&&t.detail.value&&!(0,f.Hs)(t.detail.value)&&(0,g.B)(this,"hass-more-info",{entityId:t.detail.value})}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}ha-chart-base{--chart-max-height:none}`}]}}),(0,v.f)(s.oi));a()}catch(t){a(t)}}))},48066:function(t,e,n){let a;function i(t,e,n="Roboto, Noto, sans-serif"){a||(a=document.createElement("canvas"));const i=a.getContext("2d");if(!i)return 0;i.font=`${e}px ${n}`;const s=i.measureText(t);return Math.ceil(Math.max(s.actualBoundingBoxRight+s.actualBoundingBoxLeft,s.width))}n.d(e,{U:()=>i})},32424:function(t,e,n){n.d(e,{E:()=>s});var a=n(53907),i=n(18112);function s(t,e,n){const s=(0,i.Q)(t,n?.in);return isNaN(e)?(0,a.L)(n?.in||t,NaN):e?(s.setDate(s.getDate()+e),s):s}},38836:function(t,e,n){n.d(e,{T:()=>s});var a=n(23711),i=n(76808);function s(t,e,n){return(0,a.n)(t,e*i.vh,n)}},23711:function(t,e,n){n.d(e,{n:()=>s});var a=n(53907),i=n(18112);function s(t,e,n){return(0,a.L)(n?.in||t,+(0,i.Q)(t)+e)}},23459:function(t,e,n){n.d(e,{z:()=>s});var a=n(53907),i=n(18112);function s(t,e,n){const s=(0,i.Q)(t,n?.in);if(isNaN(e))return(0,a.L)(n?.in||t,NaN);if(!e)return s;const o=s.getDate(),r=(0,a.L)(n?.in||t,s.getTime());r.setMonth(s.getMonth()+e+1,0);return o>=r.getDate()?r:(s.setFullYear(r.getFullYear(),r.getMonth(),o),s)}},2425:function(t,e,n){n.d(e,{U:()=>i});var a=n(18112);function i(t,e){const n=+(0,a.Q)(t)-+(0,a.Q)(e);return n<0?-1:n>0?1:n}},14276:function(t,e,n){n.d(e,{_:()=>i});var a=n(18112);function i(t,e){return+(0,a.Q)(t)-+(0,a.Q)(e)}},5376:function(t,e,n){n.d(e,{X:()=>o});var a=n(34151),i=n(76808),s=n(14276);function o(t,e,n){const o=(0,s._)(t,e)/i.yJ;return(0,a.u)(n?.roundingMethod)(o)}},6542:function(t,e,n){n.d(e,{d:()=>r});var a=n(18492),i=n(2425);function s(t,e,n){const[i,s]=(0,a.d)(n?.in,t,e);return 12*(i.getFullYear()-s.getFullYear())+(i.getMonth()-s.getMonth())}var o=n(3938);function r(t,e,n){const[r,c,d]=(0,a.d)(n?.in,t,t,e),u=(0,i.U)(c,d),h=Math.abs(s(c,d));if(h<1)return 0;1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-u*h);let l=(0,i.U)(c,d)===-u;(0,o.h)(r)&&1===h&&1===(0,i.U)(r,d)&&(l=!1);const f=u*(h-+l);return 0===f?0:f}},96500:function(t,e,n){n.d(e,{i:()=>i});var a=n(18112);function i(t,e){const n=(0,a.Q)(t,e?.in);return n.setHours(23,59,59,999),n}},2621:function(t,e,n){n.d(e,{V:()=>i});var a=n(18112);function i(t,e){const n=(0,a.Q)(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}},86319:function(t,e,n){n.d(e,{b:()=>i});var a=n(18112);function i(t,e){return 1===(0,a.Q)(t,e?.in).getDate()}},3938:function(t,e,n){n.d(e,{h:()=>o});var a=n(96500),i=n(2621),s=n(18112);function o(t,e){const n=(0,s.Q)(t,e?.in);return+(0,a.i)(n,e)==+(0,i.V)(n,e)}}};
//# sourceMappingURL=79920.4a1ad54613e22550.js.map