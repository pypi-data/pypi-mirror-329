export const ids=["64434"];export const modules={17803:function(e,i,t){t.d(i,{I:()=>a,_:()=>s});const a=(e,i,t,a)=>{const[s,n,o]=e.split(".",3);return Number(s)>i||Number(s)===i&&(void 0===a?Number(n)>=t:Number(n)>t)||void 0!==a&&Number(s)===i&&Number(n)===t&&Number(o)>=a},s=e=>e.includes("dev")},83456:function(e,i,t){var a=t(44249),s=t(92444),n=t(76688),o=t(57243),r=t(15093);(0,a.Z)([(0,r.Mo)("ha-checkbox")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[n.W,o.iv`:host{--mdc-theme-secondary:var(--primary-color)}`]}]}}),s.A)},66929:function(e,i,t){t.d(i,{Ij:()=>s,S7:()=>a});const a=(e,i)=>e.callWS({type:"config/core/update",...i}),s=e=>e.callApi("POST","config/core/check_config")},56785:function(e,i,t){t.d(i,{js:()=>n,rY:()=>s,yd:()=>l,yz:()=>r});t(92519),t(42179),t(89256),t(24931),t(88463),t(57449),t(19814);var a=t(17803);const s=e=>e.data,n=e=>"object"==typeof e?"object"==typeof e.body?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e,o=new Set([502,503,504]),r=e=>!!(e&&e.status_code&&o.has(e.status_code))||!(!e||!e.message||!e.message.includes("ERR_CONNECTION_CLOSED")&&!e.message.includes("ERR_CONNECTION_RESET")),l=async(e,i)=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:`/${i}/stats`,method:"get"}):s(await e.callApi("GET",`hassio/${i}/stats`))},67044:function(e,i,t){t.d(i,{AP:()=>o,MY:()=>r,Or:()=>l,Sj:()=>n,Sx:()=>h,oJ:()=>d,ou:()=>c});var a=t(17803),s=t(56785);const n=async e=>{if((0,a.I)(e.config.version,2021,2,4))return e.callWS({type:"supervisor/api",endpoint:"/host/info",method:"get"});const i=await e.callApi("GET","hassio/host/info");return(0,s.rY)(i)},o=async e=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/os/info",method:"get"}):(0,s.rY)(await e.callApi("GET","hassio/os/info")),r=async e=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/host/reboot",method:"post",timeout:null}):e.callApi("POST","hassio/host/reboot"),l=async e=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/host/shutdown",method:"post",timeout:null}):e.callApi("POST","hassio/host/shutdown"),d=async(e,i)=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/host/options",method:"post",data:i}):e.callApi("POST","hassio/host/options",i),h=async(e,i)=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/os/datadisk/move",method:"post",timeout:null,data:{device:i}}):e.callApi("POST","hassio/os/datadisk/move"),c=async e=>(0,a.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/os/datadisk/list",method:"get",timeout:null}):(0,s.rY)(await e.callApi("GET","/os/datadisk/list"))},74569:function(e,i,t){var a=t(44249),s=t(57243),n=t(15093),o=t(72344),r=(t(87979),t(72621)),l=(t(92519),t(42179),t(89256),t(24931),t(88463),t(57449),t(19814),t(39527),t(99790),t(13334),t(31622),t(99426),t(54977),t(83456),t(92745),t(14394),t(36522)),d=t(28008);t(30509),t(37583);const h=e=>s.dy`${e.map(((i,t)=>[s.dy`<span>${i.address}/${i.network_prefix}</span>`,t<e.length-1?", ":s.Ld]))}`;(0,a.Z)([(0,n.Mo)("ha-network")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"networkConfig",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_expanded",value:void 0},{kind:"method",key:"render",value:function(){if(void 0===this.networkConfig)return s.Ld;const e=this.networkConfig.configured_adapters||[];return s.dy` <ha-settings-row> <span slot="prefix"> <ha-checkbox id="auto_configure" @change="${this._handleAutoConfigureCheckboxClick}" .checked="${!e.length}" name="auto_configure"> </ha-checkbox> </span> <span slot="heading" data-for="auto_configure"> ${this.hass.localize("ui.panel.config.network.adapter.auto_configure")} </span> <span slot="description" data-for="auto_configure"> ${this.hass.localize("ui.panel.config.network.adapter.detected")}: ${i=this.networkConfig.adapters,i.map((e=>e.auto?s.dy`${e.name} (${h([...e.ipv4,...e.ipv6])})`:""))} </span> </ha-settings-row> ${e.length||this._expanded?this.networkConfig.adapters.map((i=>s.dy`<ha-settings-row> <span slot="prefix"> <ha-checkbox id="${i.name}" @change="${this._handleAdapterCheckboxClick}" .checked="${e.includes(i.name)}" .adapter="${i.name}" name="${i.name}"> </ha-checkbox> </span> <span slot="heading"> ${this.hass.localize("ui.panel.config.network.adapter.adapter")}: ${i.name} ${i.default?s.dy`<ha-svg-icon .path="${"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"}"></ha-svg-icon> (${this.hass.localize("ui.common.default")})`:s.Ld} </span> <span slot="description"> ${h([...i.ipv4,...i.ipv6])} </span> </ha-settings-row>`)):s.Ld} `;var i}},{kind:"method",key:"_handleAutoConfigureCheckboxClick",value:function(e){const i=e.currentTarget;if(void 0===this.networkConfig)return;let t=[...this.networkConfig.configured_adapters];if(i.checked)this._expanded=!1,t=[];else{this._expanded=!0;for(const e of this.networkConfig.adapters)if(e.default){t=[e.name];break}}(0,l.B)(this,"network-config-changed",{configured_adapters:t})}},{kind:"method",key:"_handleAdapterCheckboxClick",value:function(e){const i=e.currentTarget,t=i.name;if(void 0===this.networkConfig)return;const a=[...this.networkConfig.configured_adapters];if(i.checked)a.push(t);else{const e=a.indexOf(t,0);a.splice(e,1)}(0,l.B)(this,"network-config-changed",{configured_adapters:a})}},{kind:"get",static:!0,key:"styles",value:function(){return[d.Qx,s.iv`.error{color:var(--error-color)}ha-settings-row{padding:0;--paper-time-input-justify-content:flex-end;--settings-row-content-display:contents;--settings-row-prefix-display:contents}span[slot=description],span[slot=heading]{cursor:pointer}`]}}]}}),s.oi);t(34595);var c=t(17803),u=t(56785);const f=async e=>(0,c.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/network/info",method:"get"}):(0,u.rY)(await e.callApi("GET","hassio/network/info")),p=e=>{const[i,t]=e.split("/"),a=i.includes(":");return{ip:i,mask:t?g(t,a):null}},_=(e,i)=>`${e}/${v(i)}`,g=(e,i=!1)=>{const t=parseInt(e,10);if(i){const e="ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff",i=Math.floor(t/16),a=t%16,s=a?parseInt("1".repeat(a)+"0".repeat(16-a),2).toString(16):"";return e.split(":").slice(0,i).concat(s).concat(Array(8-i-(s?1:0)).fill("0")).join(":")}const a=~(2**(32-t)-1);return[a>>>24&255,a>>>16&255,a>>>8&255,255&a].join(".")},v=e=>e.includes(":")?e.split(":").map((e=>e?(parseInt(e,16).toString(2).match(/1/g)||[]).length:0)).reduce(((e,i)=>e+i),0):e.split(".").reduce(((e,i)=>e+(parseInt(i,10).toString(2).match(/1/g)||[]).length),0);(0,a.Z)([(0,n.Mo)("ha-config-network")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_networkConfig",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_error",value:void 0},{kind:"method",key:"render",value:function(){return this.hass.userData?.showAdvanced&&(0,o.p)(this.hass,"network")?s.dy` <ha-card outlined header="${this.hass.localize("ui.panel.config.network.network_adapter")}"> <div class="card-content"> ${this._error?s.dy` <ha-alert alert-type="error">${this._error.message||this._error.code}</ha-alert> `:""} <p> ${this.hass.localize("ui.panel.config.network.network_adapter_info")} </p> <ha-network @network-config-changed="${this._configChanged}" .hass="${this.hass}" .networkConfig="${this._networkConfig}"></ha-network> </div> <div class="card-actions"> <mwc-button @click="${this._save}"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.save_button")} </mwc-button> </div> </ha-card> `:s.Ld}},{kind:"method",key:"firstUpdated",value:function(e){(0,r.Z)(t,"firstUpdated",this,3)([e]),(0,o.p)(this.hass,"network")&&this._load()}},{kind:"method",key:"_load",value:async function(){this._error=void 0;try{const i=await(e=this.hass,e.callWS({type:"network"}));if((0,o.p)(this.hass,"hassio")){const e=await f(this.hass),t=new Set(e.interfaces.map((e=>e.interface)));t.size&&(i.adapters=i.adapters.filter((e=>t.has(e.name))))}this._networkConfig=i}catch(e){this._error=e.message||e}var e}},{kind:"method",key:"_save",value:async function(){this._error=void 0;try{await(e=this.hass,i=this._networkConfig?.configured_adapters||[],e.callWS({type:"network/configure",config:{configured_adapters:i}}))}catch(e){this._error=e.message||e}var e,i}},{kind:"method",key:"_configChanged",value:function(e){this._networkConfig={...this._networkConfig,configured_adapters:e.detail.configured_adapters}}},{kind:"get",static:!0,key:"styles",value:function(){return[d.Qx,s.iv`.error{color:var(--error-color)}ha-settings-row{padding:0}.card-actions{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center}`]}}]}}),s.oi);t(75656),t(50100),t(18084);const m=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;t(55486),t(1888),t(83166),t(59826);var k=t(94616),w=t(66929),y=t(87865),$=t(72473),x=t(11225);const b="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",C="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",S="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z";(0,a.Z)([(0,n.Mo)("ha-config-url-form")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_working",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_urls",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_external_url",value:()=>""},{kind:"field",decorators:[(0,n.SB)()],key:"_internal_url",value:()=>""},{kind:"field",decorators:[(0,n.SB)()],key:"_cloudStatus",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_showCustomExternalUrl",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_showCustomInternalUrl",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_unmaskedExternalUrl",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_unmaskedInternalUrl",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_cloudChecked",value:()=>!1},{kind:"method",key:"render",value:function(){const e=["storage","default"].includes(this.hass.config.config_source),i=this._working||!e;if(void 0===this._cloudStatus||void 0===this._urls)return s.Ld;const t=this._showCustomInternalUrl?this._internal_url:this._urls?.internal||"",a=this._showCustomExternalUrl?this._external_url:(this._cloudChecked?this._urls?.cloud:this._urls?.external)||"";let n,r,l;return null===this._cloudStatus?(n=!1,r=!1,l=!1):(l=this._cloudStatus.http_use_ssl,this._cloudStatus.logged_in?(n=!0,r=this._cloudStatus.active_subscription&&this._cloudStatus.prefs.remote_enabled):(n=!1,r=!1)),s.dy` <ha-card outlined .header="${this.hass.localize("ui.panel.config.url.caption")}"> <div class="card-content"> ${e?"":s.dy` <ha-alert> ${this.hass.localize("ui.panel.config.core.section.core.core_config.edit_requires_storage")} </ha-alert> `} ${this._error?s.dy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="description"> ${this.hass.localize("ui.panel.config.url.description")} </div> ${n?s.dy` <h4> ${this.hass.localize("ui.panel.config.url.external_url_label")} </h4> <ha-settings-row slim> <span slot="heading"> ${this.hass.localize("ui.panel.config.url.external_use_ha_cloud")} </span> <ha-switch .disabled="${i}" .checked="${this._cloudChecked}" @change="${this._toggleCloud}"></ha-switch> </ha-settings-row> `:""} <div class="url-container"> <div class="textfield-container"> <ha-textfield name="external_url" type="url" placeholder="https://example.duckdns.org:8123" .value="${this._unmaskedExternalUrl||this._showCustomExternalUrl&&e?a:(0,x.t)(a)}" @change="${this._handleChange}" .disabled="${i||!this._showCustomExternalUrl}" .suffix="${s.dy`<div style="width:24px"></div>`}"></ha-textfield> ${this._showCustomExternalUrl&&e?s.Ld:s.dy` <ha-icon-button class="toggle-unmasked-url" toggles .label="${this.hass.localize(`ui.panel.config.common.${this._unmaskedExternalUrl?"hide":"show"}_url`)}" @click="${this._toggleUnmaskedExternalUrl}" .path="${this._unmaskedExternalUrl?C:S}"></ha-icon-button> `} </div> <ha-button .url="${a}" @click="${this._copyURL}"> <ha-svg-icon slot="icon" .path="${b}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.common.copy_link")} </ha-button> </div> ${n||!(0,o.p)(this.hass,"cloud")?"":s.dy` <div class="row"> <div class="flex"></div> <a href="/config/cloud">${this.hass.localize("ui.panel.config.url.external_get_ha_cloud")}</a> </div> `} ${!this._showCustomExternalUrl&&n?s.dy` ${r?s.dy` <div class="row"> <div class="flex"></div> <a href="/config/cloud">${this.hass.localize("ui.panel.config.url.manage_ha_cloud")}</a> </div> `:s.dy` <ha-alert alert-type="error"> ${this.hass.localize("ui.panel.config.url.ha_cloud_remote_not_enabled")} <a href="/config/cloud" slot="action"><mwc-button .label="${this.hass.localize("ui.panel.config.url.enable_remote")}"></mwc-button></a> </ha-alert> `} `:""} <h4> ${this.hass.localize("ui.panel.config.url.internal_url_label")} </h4> <ha-settings-row slim> <span slot="heading"> ${this.hass.localize("ui.panel.config.url.internal_url_automatic")} </span> <span slot="description"> ${this.hass.localize("ui.panel.config.url.internal_url_automatic_description")} </span> <ha-switch .disabled="${i}" .checked="${!this._showCustomInternalUrl}" @change="${this._toggleInternalAutomatic}"></ha-switch> </ha-settings-row> <div class="url-container"> <div class="textfield-container"> <ha-textfield name="internal_url" type="url" placeholder="${this.hass.localize("ui.panel.config.url.internal_url_placeholder")}" .value="${this._unmaskedInternalUrl||this._showCustomInternalUrl&&e?t:(0,x.t)(t)}" @change="${this._handleChange}" .disabled="${i||!this._showCustomInternalUrl}" .suffix="${s.dy`<div style="width:24px"></div>`}"></ha-textfield> ${this._showCustomInternalUrl&&e?s.Ld:s.dy` <ha-icon-button class="toggle-unmasked-url" toggles .label="${this.hass.localize(`ui.panel.config.common.${this._unmaskedInternalUrl?"hide":"show"}_url`)}" @click="${this._toggleUnmaskedInternalUrl}" .path="${this._unmaskedInternalUrl?C:S}"></ha-icon-button> `} </div> <ha-button .url="${t}" @click="${this._copyURL}"> <ha-svg-icon slot="icon" .path="${b}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.common.copy_link")} </ha-button> </div> ${!l||t&&t.startsWith("https://")&&(d=new URL(t).hostname,!m.test(d))?"":s.dy` <ha-alert .alertType="${this._showCustomInternalUrl?"info":"warning"}" .title="${this.hass.localize("ui.panel.config.url.internal_url_https_error_title")}"> ${this.hass.localize("ui.panel.config.url.internal_url_https_error_description")} </ha-alert> `} </div> <div class="card-actions"> <mwc-button @click="${this._save}" .disabled="${i}"> ${this.hass.localize("ui.panel.config.core.section.core.core_config.save_button")} </mwc-button> </div> </ha-card> `;var d}},{kind:"method",key:"firstUpdated",value:function(e){(0,r.Z)(t,"firstUpdated",this,3)([e]),(0,o.p)(this.hass,"cloud")?(0,k.LI)(this.hass).then((e=>{this._cloudStatus=e,this._showCustomExternalUrl=!(this._cloudStatus.logged_in&&!this.hass.config.external_url)})):this._cloudStatus=null,this._fetchUrls()}},{kind:"method",key:"_toggleCloud",value:function(e){this._cloudChecked=e.currentTarget.checked,this._showCustomExternalUrl=!this._cloudChecked}},{kind:"method",key:"_toggleInternalAutomatic",value:function(e){this._showCustomInternalUrl=!e.currentTarget.checked}},{kind:"method",key:"_toggleUnmaskedInternalUrl",value:function(){this._unmaskedInternalUrl=!this._unmaskedInternalUrl}},{kind:"method",key:"_toggleUnmaskedExternalUrl",value:function(){this._unmaskedExternalUrl=!this._unmaskedExternalUrl}},{kind:"method",key:"_copyURL",value:async function(e){const i=e.currentTarget.url;await(0,y.v)(i),(0,$.C)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"method",key:"_handleChange",value:function(e){const i=e.currentTarget;this[`_${i.name}`]=i.value||""}},{kind:"method",key:"_save",value:async function(){this._working=!0,this._error=void 0;try{await(0,w.S7)(this.hass,{external_url:this._showCustomExternalUrl&&this._external_url||null,internal_url:this._showCustomInternalUrl&&this._internal_url||null}),await this._fetchUrls()}catch(e){this._error=e.message||e}finally{this._working=!1}}},{kind:"method",key:"_fetchUrls",value:async function(){var e;this._urls=await(e=this.hass,e.callWS({type:"network/url"})),this._cloudChecked=this._urls?.cloud===this._urls?.external&&!this.hass.config.external_url,this._showCustomInternalUrl=!!this.hass.config.internal_url,this._showCustomExternalUrl=!(this._cloudStatus?.logged_in&&!this.hass.config.external_url),this._internal_url=this._urls?.internal??"",this._external_url=this._urls?.external??""}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`.description{margin-bottom:1em}.row{display:flex;flex-direction:row;margin:0 -8px;align-items:center;padding:8px 0}.secondary{color:var(--secondary-text-color)}.flex{flex:1}.row>*{margin:0 8px}ha-alert{display:block;margin:16px 0}.card-actions{display:flex;flex-direction:row-reverse}a{color:var(--primary-color);text-decoration:none}.url-container{display:flex;align-items:center;gap:8px;margin-top:8px}.textfield-container{position:relative;flex:1}.textfield-container ha-textfield{display:block}.toggle-unmasked-url{position:absolute;top:8px;right:8px;inset-inline-start:initial;inset-inline-end:8px;--mdc-icon-button-size:40px;--mdc-icon-size:20px;color:var(--secondary-text-color);direction:var(--direction)}`}]}}),s.oi);t(2060),t(87319),t(97206),t(41307),t(23334),t(72781);var z=t(67044),U=t(76131);(0,a.Z)([(0,n.Mo)("supervisor-hostname")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_processing",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_hostname",value:void 0},{kind:"method",key:"firstUpdated",value:function(){this._fetchHostInfo()}},{kind:"method",key:"_fetchHostInfo",value:async function(){const e=await(0,z.Sj)(this.hass);this._hostname=e.hostname}},{kind:"method",key:"render",value:function(){return this._hostname?s.dy` <ha-card class="no-padding" outlined .header="${this.hass.localize("ui.panel.config.network.supervisor.hostname.title")}"> <div class="card-content"> <p> ${this.hass.localize("ui.panel.config.network.supervisor.hostname.description")} </p> <ha-textfield .disabled="${this._processing}" .value="${this._hostname}" @change="${this._handleChange}" placeholder="homeassistant"> </ha-textfield> </div> <div class="card-actions"> <mwc-button @click="${this._save}" .disabled="${this._processing}"> ${this._processing?s.dy`<ha-circular-progress indeterminate size="small"> </ha-circular-progress>`:this.hass.localize("ui.common.save")} </mwc-button> </div> </ha-card> `:s.Ld}},{kind:"method",key:"_handleChange",value:function(e){this._hostname=e.target.value}},{kind:"method",key:"_save",value:async function(){this._processing=!0;try{await(0,z.oJ)(this.hass,{hostname:this._hostname})}catch(e){(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.network.supervisor.hostname.failed_to_set_hostname"),text:(0,u.js)(e)})}finally{this._processing=!1}}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`ha-textfield{width:100%}.card-actions{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center}.card-content>p{padding-bottom:1em}`}]}}),s.oi);t(67670),t(41360),t(99619),t(56820);var A=t(67064);t(34273),t(34326),t(7285);const I="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",L="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",M="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z",E=["ipv4","ipv6"],T={ipv4:{Cloudflare:["1.1.1.1","1.0.0.1"],Google:["8.8.8.8","8.8.4.4"],Quad9:["9.9.9.9","149.112.112.112"],NextDNS:["45.90.28.0","45.90.30.0"],AdGuard:["94.140.14.140","94.140.14.141"]},ipv6:{Cloudflare:["2606:4700:4700::1111","2606:4700:4700::1001"],Google:["2001:4860:4860::8888","2001:4860:4860::8844"],Quad9:["2620:fe::fe","2620:fe::9"],NextDNS:["2a05:d014:a000::","2a05:d014:a001::"],AdGuard:["94.140.14.140","94.140.14.141"]}};(0,a.Z)([(0,n.Mo)("supervisor-network")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_accessPoints",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_curTabIndex",value:()=>0},{kind:"field",decorators:[(0,n.SB)()],key:"_dirty",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_interface",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_interfaces",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_processing",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_scanning",value:()=>!1},{kind:"field",decorators:[(0,n.SB)()],key:"_wifiConfiguration",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_dnsMenuOpen",value:()=>!1},{kind:"method",key:"firstUpdated",value:function(){this._fetchNetworkInfo()}},{kind:"method",key:"_fetchNetworkInfo",value:async function(){const e=await f(this.hass);this._interfaces=e.interfaces.sort(((e,i)=>e.primary>i.primary?-1:1)),this._interface={...this._interfaces[this._curTabIndex]}}},{kind:"method",key:"render",value:function(){return this._interface?s.dy` <ha-card outlined .header="${this.hass.localize("ui.panel.config.network.supervisor.title")}"> ${this._interfaces.length>1?s.dy`<mwc-tab-bar .activeIndex="${this._curTabIndex}" @MDCTabBar:activated="${this._handleTabActivated}">${this._interfaces.map((e=>s.dy`<mwc-tab .id="${e.interface}" .label="${e.interface}"> </mwc-tab>`))} </mwc-tab-bar>`:s.Ld} ${(0,A.F)(this._renderTab())} </ha-card> `:s.Ld}},{kind:"method",key:"_renderTab",value:function(){return s.dy`<div class="card-content"> ${"wireless"===this._interface?.type?s.dy` <ha-expansion-panel .header="${this.hass.localize("ui.panel.config.network.supervisor.wifi")}" outlined .expanded="${!this._interface?.wifi?.ssid}"> ${this._interface?.wifi?.ssid?s.dy`<p> <ha-svg-icon slot="icon" .path="${M}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.network.supervisor.connected_to",{ssid:this._interface?.wifi?.ssid})} </p>`:s.Ld} <ha-button class="scan" @click="${this._scanForAP}" .disabled="${this._scanning}"> ${this._scanning?s.dy`<ha-circular-progress indeterminate size="small"> </ha-circular-progress>`:this.hass.localize("ui.panel.config.network.supervisor.scan_ap")} <ha-svg-icon slot="icon" .path="${M}"></ha-svg-icon> </ha-button> ${this._accessPoints.length?s.dy` <mwc-list> ${this._accessPoints.map((e=>s.dy` <ha-list-item twoline @click="${this._selectAP}" .activated="${e.ssid===this._wifiConfiguration?.ssid}" .ap="${e}"> <span>${e.ssid}</span> <span slot="secondary"> ${e.mac} - ${this.hass.localize("ui.panel.config.network.supervisor.signal_strength")}: ${e.signal} </span> </ha-list-item> `))} </mwc-list> `:s.Ld} ${this._wifiConfiguration?s.dy` <div class="radio-row"> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.open")}"> <ha-radio @change="${this._handleRadioValueChangedAp}" .ap="${this._wifiConfiguration}" value="open" name="auth" .checked="${void 0===this._wifiConfiguration.auth||"open"===this._wifiConfiguration.auth}"> </ha-radio> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.wep")}"> <ha-radio @change="${this._handleRadioValueChangedAp}" .ap="${this._wifiConfiguration}" value="wep" name="auth" .checked="${"wep"===this._wifiConfiguration.auth}"> </ha-radio> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.wpa")}"> <ha-radio @change="${this._handleRadioValueChangedAp}" .ap="${this._wifiConfiguration}" value="wpa-psk" name="auth" .checked="${"wpa-psk"===this._wifiConfiguration.auth}"> </ha-radio> </ha-formfield> </div> ${"wpa-psk"===this._wifiConfiguration.auth||"wep"===this._wifiConfiguration.auth?s.dy` <ha-password-field id="psk" .label="${this.hass.localize("ui.panel.config.network.supervisor.wifi_password")}" .version="${"wifi"}" @change="${this._handleInputValueChangedWifi}"> </ha-password-field> `:s.Ld} `:s.Ld} </ha-expansion-panel> `:s.Ld} ${E.map((e=>this._interface[e]?this._renderIPConfiguration(e):s.Ld))} ${this._dirty?s.dy`<ha-alert alert-type="warning"> ${this.hass.localize("ui.panel.config.network.supervisor.warning")} </ha-alert>`:s.Ld} </div> <div class="card-actions"> <ha-button @click="${this._updateNetwork}" .disabled="${!this._dirty}"> ${this._processing?s.dy`<ha-circular-progress indeterminate size="small"> </ha-circular-progress>`:this.hass.localize("ui.common.save")} </ha-button> <ha-button @click="${this._clear}"> ${this.hass.localize("ui.panel.config.network.supervisor.reset")} </ha-button> </div>`}},{kind:"method",key:"_selectAP",value:function(e){this._wifiConfiguration=e.currentTarget.ap,E.forEach((e=>{"disabled"===this._interface[e].method&&(this._interface[e].method="auto")})),this._dirty=!0}},{kind:"method",key:"_scanForAP",value:async function(){if(this._interface){this._scanning=!0;try{const e=await(async(e,i)=>(0,c.I)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:`/network/interface/${i}/accesspoints`,method:"get",timeout:null}):(0,u.rY)(await e.callApi("GET",`hassio/network/interface/${i}/accesspoints`)))(this.hass,this._interface.interface);this._accessPoints=[],e.accesspoints?.forEach((e=>{if(e.ssid){const i=this._accessPoints.find((i=>i.ssid===e.ssid));i?e.signal>i.signal&&(this._accessPoints=this._accessPoints.filter((i=>i.ssid!==e.ssid)),this._accessPoints.push(e)):this._accessPoints.push(e)}}))}catch(e){(0,U.showAlertDialog)(this,{title:"Failed to scan for accesspoints",text:(0,u.js)(e)})}finally{this._scanning=!1}}}},{kind:"method",key:"_renderIPConfiguration",value:function(e){if("wireless"===this._interface?.type&&!this._wifiConfiguration?.ssid&&!this._interface.wifi?.ssid)return s.Ld;const i=this._interface[e]?.nameservers||[];0===i.length&&i.push("");const t="auto"===this._interface[e]?.method;return s.dy` <ha-expansion-panel .header="${`IPv${e.charAt(e.length-1)}`}" outlined> <div class="radio-row"> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.auto")}"> <ha-radio @change="${this._handleRadioValueChanged}" .version="${e}" value="auto" name="${e}method" .checked="${"auto"===this._interface[e]?.method}"> </ha-radio> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.static")}"> <ha-radio @change="${this._handleRadioValueChanged}" .version="${e}" value="static" name="${e}method" .checked="${"static"===this._interface[e]?.method}"> </ha-radio> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.panel.config.network.supervisor.disabled")}" class="warning"> <ha-radio @change="${this._handleRadioValueChanged}" .version="${e}" value="disabled" name="${e}method" .checked="${"disabled"===this._interface[e]?.method}"> </ha-radio> </ha-formfield> </div> ${["static","auto"].includes(this._interface[e].method)?s.dy` ${this._interface[e].address.map(((i,a)=>{const{ip:n,mask:o}=p(i);return s.dy` <div class="address-row"> <ha-textfield id="address" .label="${this.hass.localize("ui.panel.config.network.supervisor.ip")}" .version="${e}" .value="${n}" .index="${a}" @change="${this._handleInputValueChanged}" .disabled="${t}"> </ha-textfield> <ha-textfield id="netmask" .label="${this.hass.localize("ui.panel.config.network.supervisor.netmask")}" .version="${e}" .value="${o}" .index="${a}" @change="${this._handleInputValueChanged}" .disabled="${t}"> </ha-textfield> ${this._interface[e].address.length>1&&!t?s.dy` <ha-icon-button .label="${this.hass.localize("ui.common.delete")}" .path="${I}" .version="${e}" .index="${a}" @click="${this._removeAddress}"></ha-icon-button> `:s.Ld} </div> `}))} ${t?s.Ld:s.dy` <ha-button @click="${this._addAddress}" .version="${e}" class="add-address"> ${this.hass.localize("ui.panel.config.network.supervisor.add_address")} <ha-svg-icon slot="icon" .path="${L}"></ha-svg-icon> </ha-button> `} <ha-textfield id="gateway" .label="${this.hass.localize("ui.panel.config.network.supervisor.gateway")}" .version="${e}" .value="${this._interface[e].gateway||""}" @change="${this._handleInputValueChanged}" .disabled="${t}"> </ha-textfield> <div class="nameservers"> ${i.map(((i,t)=>s.dy` <div class="address-row"> <ha-textfield id="nameserver" .label="${this.hass.localize("ui.panel.config.network.supervisor.dns_server")}" .version="${e}" .value="${i}" .index="${t}" @change="${this._handleInputValueChanged}"> </ha-textfield> ${this._interface[e].nameservers?.length>1?s.dy` <ha-icon-button .label="${this.hass.localize("ui.common.delete")}" .path="${I}" .version="${e}" .index="${t}" @click="${this._removeNameserver}"></ha-icon-button> `:s.Ld} </div> `))} </div> <ha-button-menu @opened="${this._handleDNSMenuOpened}" @closed="${this._handleDNSMenuClosed}" .version="${e}" class="add-nameserver"> <ha-button slot="trigger"> ${this.hass.localize("ui.panel.config.network.supervisor.add_dns_server")} <ha-svg-icon slot="icon" .path="${this._dnsMenuOpen?"M7,10L12,15L17,10H7Z":L}"></ha-svg-icon> </ha-button> ${Object.entries(T[e]).map((([i,t])=>s.dy` <ha-list-item @click="${this._addPredefinedDNS}" .version="${e}" .addresses="${t}"> ${i} </ha-list-item> `))} <ha-list-item @click="${this._addCustomDNS}" .version="${e}"> ${this.hass.localize("ui.panel.config.network.supervisor.custom_dns")} </ha-list-item> </ha-button-menu> `:s.Ld} </ha-expansion-panel> `}},{kind:"method",key:"_updateNetwork",value:async function(){this._processing=!0;let e={};E.forEach((i=>{e[i]={method:this._interface[i]?.method||"auto",nameservers:this._interface[i]?.nameservers?.filter((e=>e.trim()))},"static"===this._interface[i]?.method&&(e[i]={...e[i],address:this._interface[i]?.address?.filter((e=>e.trim())),gateway:this._interface[i]?.gateway})})),this._wifiConfiguration&&(e={...e,wifi:{ssid:this._wifiConfiguration.ssid,mode:this._wifiConfiguration.mode,auth:this._wifiConfiguration.auth||"open"}},"open"!==e.wifi.auth&&(e.wifi={...e.wifi,psk:this._wifiConfiguration.psk})),e.enabled=!("disabled"===e.ipv4?.method&&"disabled"===e.ipv6?.method||"wireless"===this._interface.type&&void 0===this._wifiConfiguration&&!this._interface.wifi);try{await(async(e,i,t)=>{(0,c.I)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:`/network/interface/${i}/update`,method:"post",data:t,timeout:null}):await e.callApi("POST",`hassio/network/interface/${i}/update`,t)})(this.hass,this._interface.interface,e),this._dirty=!1,await this._fetchNetworkInfo()}catch(e){(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.network.supervisor.failed_to_change"),text:(0,u.js)(e)})}finally{this._processing=!1}}},{kind:"method",key:"_clear",value:async function(){await this._fetchNetworkInfo(),this._interface.ipv4.method="auto",this._interface.ipv4.nameservers=[],this._interface.ipv6.method="auto",this._interface.ipv6.nameservers=[],this._interface.wifi=null,this._wifiConfiguration=void 0,this._dirty=!0,this.requestUpdate("_interface")}},{kind:"method",key:"_handleTabActivated",value:async function(e){if(this._dirty){if(!await(0,U.showConfirmationDialog)(this,{text:this.hass.localize("ui.panel.config.network.supervisor.unsaved"),confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")}))return void this.requestUpdate("_interface")}this._curTabIndex=e.detail.index,this._interface={...this._interfaces[e.detail.index]}}},{kind:"method",key:"_handleRadioValueChanged",value:function(e){const i=e.target.value,t=e.target.version;i&&this._interface&&this._interface[t].method!==i&&(this._dirty=!0,this._interface[t].method=i,this.requestUpdate("_interface"))}},{kind:"method",key:"_handleRadioValueChangedAp",value:function(e){const i=e.target.value;this._wifiConfiguration.auth=i,this._dirty=!0,this.requestUpdate("_wifiConfiguration")}},{kind:"method",key:"_handleInputValueChanged",value:function(e){const i=e.target,t=i.value,a=e.target.version,s=i.id;if(t&&this._interface?.[a])if(this._dirty=!0,"address"===s){const i=e.target.index,{mask:s}=p(this._interface[a].address[i]),{mask:n}=p(t);this._interface[a].address[i]=_(t,n||s||""),this.requestUpdate("_interface")}else if("netmask"===s){const i=e.target.index,{ip:s}=p(this._interface[a].address[i]);this._interface[a].address[i]=_(s,t),this.requestUpdate("_interface")}else if("nameserver"===s){const i=e.target.index;this._interface[a].nameservers[i]=t,this.requestUpdate("_interface")}else this._interface[a][s]=t}},{kind:"method",key:"_handleInputValueChangedWifi",value:function(e){const i=e.target,t=i.value,a=i.id;t&&this._wifiConfiguration&&this._wifiConfiguration[a]!==t&&(this._dirty=!0,this._wifiConfiguration[a]=t)}},{kind:"method",key:"_addAddress",value:function(e){const i=e.target.version;this._interface[i].address.push("ipv4"===i?"0.0.0.0/24":"::/64"),this._dirty=!0,this.requestUpdate("_interface")}},{kind:"method",key:"_removeAddress",value:function(e){const i=e.target,t=i.index,a=i.version;this._interface[a].address.splice(t,1),this._dirty=!0,this.requestUpdate("_interface")}},{kind:"method",key:"_handleDNSMenuOpened",value:function(){this._dnsMenuOpen=!0}},{kind:"method",key:"_handleDNSMenuClosed",value:function(){this._dnsMenuOpen=!1}},{kind:"method",key:"_addPredefinedDNS",value:function(e){const i=e.target,t=i.version,a=i.addresses;this._interface[t].nameservers||(this._interface[t].nameservers=[]),this._interface[t].nameservers.push(...a),this._dirty=!0,this.requestUpdate("_interface")}},{kind:"method",key:"_addCustomDNS",value:function(e){const i=e.target.version;this._interface[i].nameservers||(this._interface[i].nameservers=[]),this._interface[i].nameservers.push(""),this._dirty=!0,this.requestUpdate("_interface")}},{kind:"method",key:"_removeNameserver",value:function(e){const i=e.target,t=i.index,a=i.version;this._interface[a].nameservers.splice(t,1),this._dirty=!0,this.requestUpdate("_interface")}},{kind:"get",static:!0,key:"styles",value:function(){return[s.iv`mwc-tab-bar{border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12));margin-bottom:24px}.content{display:block;padding:20px 24px}ha-button.warning{--mdc-theme-primary:var(--error-color)}ha-button.scan{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial}ha-expansion-panel{--expansion-panel-summary-padding:0 16px;margin:4px 0}ha-textfield{display:block;margin-top:16px}.address-row{display:flex;flex-direction:row;gap:8px;align-items:center}.address-row ha-textfield{flex:1}.address-row ha-icon-button{--mdc-icon-button-size:36px;margin-top:16px}.add-address,.add-nameserver{margin-top:16px}ha-list-item{--mdc-list-side-padding:10px}.card-actions{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center}ha-expansion-panel>:last-child{margin-bottom:16px}`]}}]}}),s.oi),(0,a.Z)([(0,n.Mo)("ha-config-section-network")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"method",key:"render",value:function(){return s.dy` <hass-subpage back-path="/config/system" .hass="${this.hass}" .narrow="${this.narrow}" .header="${this.hass.localize("ui.panel.config.network.caption")}"> <div class="content"> ${(0,o.p)(this.hass,"hassio")?s.dy`<supervisor-hostname .hass="${this.hass}" .narrow="${this.narrow}"></supervisor-hostname> <supervisor-network .hass="${this.hass}"></supervisor-network>`:""} <ha-config-url-form .hass="${this.hass}"></ha-config-url-form> <ha-config-network .hass="${this.hass}"></ha-config-network> </div> </hass-subpage> `}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`.content{padding:28px 20px 0;max-width:1040px;margin:0 auto}ha-config-network,ha-config-url-form,supervisor-hostname,supervisor-network{display:block;margin:0 auto;margin-bottom:24px;max-width:600px}`}]}}),s.oi)}};
//# sourceMappingURL=64434.8fb717736e9e64e2.js.map