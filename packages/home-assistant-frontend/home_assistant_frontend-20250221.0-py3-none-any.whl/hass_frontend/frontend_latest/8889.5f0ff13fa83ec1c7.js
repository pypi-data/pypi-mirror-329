export const ids=["8889"];export const modules={96804:function(a,t,i){i.d(t,{U:()=>o});var e=i(36522);const s=()=>Promise.all([i.e("7442"),i.e("51747")]).then(i.bind(i,60906)),o=(a,t)=>{(0,e.B)(a,"show-dialog",{dialogTag:"ha-dialog-restore-backup",dialogImport:s,dialogParams:t})}},13526:function(a,t,i){i.a(a,(async function(a,e){try{i.r(t);var s=i(44249),o=i(72621),c=(i(39527),i(99790),i(13334),i(57243)),n=i(15093),l=i(64214),d=i(73850),r=i(83523),h=(i(99426),i(59826),i(34273),i(54977),i(97206),i(23334),i(7285),i(19993),i(74633),i(26779)),u=(i(87979),i(88238)),p=i(90698),k=(i(29232),i(96804)),g=i(36522),m=i(76131),b=i(9807),v=i(72344),f=a([l,b,h]);[l,b,h]=f.then?(await f)():f;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",_="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",$="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",x="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z",A="M4,5C2.89,5 2,5.89 2,7V17C2,18.11 2.89,19 4,19H20C21.11,19 22,18.11 22,17V7C22,5.89 21.11,5 20,5H4M4.5,7A1,1 0 0,1 5.5,8A1,1 0 0,1 4.5,9A1,1 0 0,1 3.5,8A1,1 0 0,1 4.5,7M7,7H20V17H7V7M8,8V16H11V8H8M12,8V16H15V8H12M16,8V16H19V8H16M9,9H10V10H9V9M13,9H14V10H13V9M17,9H18V10H17V9Z",w=a=>{const t=Object.keys(a.agents),i=a.failed_agent_ids??[];return[...t.filter((a=>!i.includes(a))),...i].map((t=>({...a.agents[t]??{protected:!1,size:0},id:t,success:!i.includes(t)}))).sort(((a,t)=>(0,h.Ef)(a.id,t.id)))};(0,s.Z)([(0,n.Mo)("ha-config-backup-details")],(function(a,t){class i extends t{constructor(...t){super(...t),a(this)}}return{F:i,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"backup-id"})],key:"backupId",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"agents",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_backup",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_agents",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_selectedData",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_addonsInfo",value:void 0},{kind:"method",key:"firstUpdated",value:function(a){(0,o.Z)(i,"firstUpdated",this,3)([a]),this.backupId?this._fetchBackup():this._error="Backup id not defined"}},{kind:"method",key:"render",value:function(){if(!this.hass)return c.Ld;const a=(0,v.p)(this.hass,"hassio");return c.dy` <hass-subpage back-path="/config/backup/backups" .hass="${this.hass}" .narrow="${this.narrow}" .header="${this._backup?.name||this.hass.localize("ui.panel.config.backup.details.header")}"> <ha-button-menu slot="toolbar-icon" @action="${this._handleAction}"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${_}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${$}"></ha-svg-icon> ${this.hass.localize("ui.common.download")} </ha-list-item> <ha-list-item graphic="icon" class="warning"> <ha-svg-icon slot="graphic" .path="${y}"></ha-svg-icon> ${this.hass.localize("ui.common.delete")} </ha-list-item> </ha-button-menu> <div class="content"> ${this._error&&c.dy`<ha-alert alert-type="error">${this._error}</ha-alert>`} ${null===this._backup?c.dy` <ha-alert alert-type="warning" .title="${this.hass.localize("ui.panel.config.backup.details.not_found")}"> ${this.hass.localize("ui.panel.config.backup.details.not_found_description",{backupId:this.backupId})} </ha-alert> `:this._backup?c.dy` <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.details.summary.title")} </div> <div class="card-content"> <ha-md-list class="summary"> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.backup_type")} </span> <span slot="supporting-text"> ${this.hass.localize(`ui.panel.config.backup.type.${(0,h.Vn)(this._backup,a)}`)} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.details.summary.size")} </span> <span slot="supporting-text"> ${(0,p.d)((0,h.En)(this._backup))} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${this.hass.localize("ui.panel.config.backup.details.summary.created")} </span> <span slot="supporting-text"> ${(0,l.o0)(new Date(this._backup.date),this.hass.locale,this.hass.config)} </span> </ha-md-list-item> </ha-md-list> </div> </ha-card> <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.details.restore.title")} </div> <div class="card-content"> <ha-backup-data-picker .hass="${this.hass}" .data="${this._backup}" .value="${this._selectedData}" @value-changed="${this._selectedBackupChanged}" .addonsInfo="${this._addonsInfo}"> </ha-backup-data-picker> </div> <div class="card-actions"> <ha-button @click="${this._restore}" .disabled="${this._isRestoreDisabled()}" class="danger"> ${this.hass.localize("ui.panel.config.backup.details.restore.action")} </ha-button> </div> </ha-card> <ha-card> <div class="card-header"> ${this.hass.localize("ui.panel.config.backup.details.locations.title")} </div> <div class="card-content"> <ha-md-list> ${this._agents.map((a=>{const t=a.id,i=(0,d.M)(t),e=(0,h.Sw)(this.hass.localize,t,this.agents),s=a.success,o=!a.success,n=!a.protected;return c.dy` <ha-md-list-item> ${(0,h.V1)(t)?c.dy` <ha-svg-icon .path="${x}" slot="start"> </ha-svg-icon> `:(0,h.BR)(t)?c.dy` <ha-svg-icon .path="${A}" slot="start"></ha-svg-icon> `:c.dy` <img .src="${(0,u.X1)({domain:i,type:"icon",useFallback:!0,darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" alt="${`${i} logo`}" slot="start"> `} <div slot="headline">${e}</div> <div slot="supporting-text"> ${o?c.dy` <span class="dot error"></span> <span> ${this.hass.localize("ui.panel.config.backup.details.locations.backup_failed")} </span> `:n?c.dy` <span class="dot warning"></span> <span> ${this.hass.localize("ui.panel.config.backup.details.locations.unencrypted")}</span> `:c.dy` <span class="dot success"></span> <span>${this.hass.localize("ui.panel.config.backup.details.locations.encrypted")}</span> `} </div>  ${s?c.dy` <ha-button-menu slot="end" @action="${this._handleAgentAction}" .agent="${t}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${_}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${$}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.backup.details.locations.download")} </ha-list-item> </ha-button-menu> `:c.Ld} </ha-md-list-item> `}))} </ha-md-list> </div> </ha-card> `:c.dy`<ha-circular-progress active></ha-circular-progress>`} </div> </hass-subpage> `}},{kind:"method",key:"_selectedBackupChanged",value:function(a){a.stopPropagation(),this._selectedData=a.detail.value}},{kind:"method",key:"_isRestoreDisabled",value:function(){return!this._selectedData||!(this._selectedData?.database_included||this._selectedData?.homeassistant_included||this._selectedData.addons.length||this._selectedData.folders.length)}},{kind:"method",key:"_restore",value:function(){this._backup&&this._selectedData&&(0,k.U)(this,{backup:this._backup,selectedData:this._selectedData})}},{kind:"method",key:"_fetchBackup",value:async function(){try{const a=await(0,h.Ye)(this.hass,this.backupId);this._backup=a.backup,this._agents=w(a.backup)}catch(a){this._error=a?.message||this.hass.localize("ui.panel.config.backup.details.error")}}},{kind:"method",key:"_handleAction",value:function(a){switch(a.detail.index){case 0:this._downloadBackup();break;case 1:this._deleteBackup()}}},{kind:"method",key:"_handleAgentAction",value:function(a){const t=a.currentTarget.agent;this._downloadBackup(t)}},{kind:"method",key:"_downloadBackup",value:async function(a){await(0,b.w)(this.hass,this,this._backup,this.config,a)}},{kind:"method",key:"_deleteBackup",value:async function(){await(0,m.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.dialogs.delete.title"),text:this.hass.localize("ui.panel.config.backup.dialogs.delete.text"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})&&(await(0,h.Ug)(this.hass,this._backup.backup_id),(0,g.B)(this,"ha-refresh-backup-info"),(0,r.c)("/config/backup"))}},{kind:"field",static:!0,key:"styles",value:()=>c.iv`.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:grid;margin-bottom:24px}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list-item img{width:48px}ha-md-list-item ha-svg-icon[slot=start]{--mdc-icon-size:48px;color:var(--primary-text-color)}ha-md-list.summary ha-md-list-item{--md-list-item-supporting-text-size:1rem;--md-list-item-label-text-size:0.875rem;--md-list-item-label-text-color:var(--secondary-text-color);--md-list-item-supporting-text-color:var(--primary-text-color)}.warning{color:var(--error-color)}.warning ha-svg-icon{color:var(--error-color)}ha-button.danger{--mdc-theme-primary:var(--error-color)}ha-backup-data-picker{display:block}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:normal}.dot{display:block;position:relative;width:8px;height:8px;background-color:var(--disabled-color);border-radius:50%;flex:none}.dot.success{background-color:var(--success-color)}.dot.warning{background-color:var(--warning-color)}.dot.error{background-color:var(--error-color)}.card-header{padding-bottom:8px}`}]}}),c.oi);e()}catch(a){e(a)}}))}};
//# sourceMappingURL=8889.5f0ff13fa83ec1c7.js.map