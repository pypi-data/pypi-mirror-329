"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["62885"],{68958:function(e,t,s){s.d(t,{t:()=>a});s(92745),s(77439),s(19423),s(39527),s(41360),s(88972);class i{constructor(e=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=e,e===window.localStorage&&window.addEventListener("storage",(e=>{e.key&&this.hasKey(e.key)&&(this._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,this._listeners[e.key]&&this._listeners[e.key].forEach((t=>t(e.oldValue?JSON.parse(e.oldValue):e.oldValue,this._storage[e.key]))))}))}addFromStorage(e){if(!this._storage[e]){const t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}subscribeChanges(e,t){return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],()=>{this.unsubscribeChanges(e,t)}}unsubscribeChanges(e,t){if(!(e in this._listeners))return;const s=this._listeners[e].indexOf(t);-1!==s&&this._listeners[e].splice(s,1)}hasKey(e){return e in this._storage}getValue(e){return this._storage[e]}setValue(e,t){const s=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(i){}finally{this._listeners[e]&&this._listeners[e].forEach((e=>e(s,t)))}}}const n={},a=e=>t=>{const s=e.storage||"localStorage";let a;s&&s in n?a=n[s]:(a=new i(window[s]),n[s]=a);const o=String(t.key),r=e.key||String(t.key),d=t.initializer?t.initializer():void 0;a.addFromStorage(r);const l=!1!==e.subscribe?e=>a.subscribeChanges(r,((s,i)=>{e.requestUpdate(t.key,s)})):void 0,c=()=>a.hasKey(r)?e.deserializer?e.deserializer(a.getValue(r)):a.getValue(r):d;return{kind:"method",placement:"prototype",key:t.key,descriptor:{set(s){((s,i)=>{let n;e.state&&(n=c()),a.setValue(r,e.serializer?e.serializer(i):i),e.state&&s.requestUpdate(t.key,n)})(this,s)},get(){return c()},enumerable:!0,configurable:!0},finisher(s){if(e.state&&e.subscribe){const e=s.prototype.connectedCallback,t=s.prototype.disconnectedCallback;s.prototype.connectedCallback=function(){e.call(this),this[`__unbsubLocalStorage${o}`]=null==l?void 0:l(this)},s.prototype.disconnectedCallback=function(){var e;t.call(this),null===(e=this[`__unbsubLocalStorage${o}`])||void 0===e||e.call(this),this[`__unbsubLocalStorage${o}`]=void 0}}e.state&&s.createProperty(t.key,Object.assign({noAccessor:!0},e.stateOptions))}}}},20130:function(e,t,s){var i=s(61701),n=s(72621),a=(s(71695),s(47021),s(39785)),o=s(52876),r=s(50778),d=s(57243),l=s(5111);let c,u,h,b=e=>e;(0,i.Z)([(0,r.Mo)("ha-fab")],(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"method",key:"firstUpdated",value:function(e){(0,n.Z)(s,"firstUpdated",this,3)([e]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}},{kind:"field",static:!0,key:"styles",value(){return[o.W,(0,d.iv)(c||(c=b`:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`)),"rtl"===l.E.document.dir?(0,d.iv)(u||(u=b`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`)):(0,d.iv)(h||(h=b``))]}}]}}),a._)},78586:function(e,t,s){s.d(t,{JG:()=>d,PT:()=>r,ho:()=>a});s(71695),s(92745),s(19423),s(40251),s(47021);var i=s(62212);const n=(e,t)=>e.subscribeMessage((e=>{const s=Object.assign({},t.state||{});if(e.add)for(const t of e.add)s[t.source]=t;if(e.remove)for(const t of e.remove)delete s[t.source];t.setState(s,!0)}),{type:"bluetooth/subscribe_scanner_details"}),a=(e,t)=>(0,i.B)("_bluetoothScannerDetails",(()=>Promise.resolve({})),n,e,t),o=(e,t)=>e.subscribeMessage((e=>{const s=[...t.state||[]];if(e.add)for(const t of e.add){const e=s.findIndex((e=>e.address===t.address));-1===e?s.push(t):s[e]=t}if(e.change)for(const t of e.change){const e=s.findIndex((e=>e.address===t.address));-1!==e&&(s[e]=t)}if(e.remove)for(const t of e.remove){const e=s.findIndex((e=>e.address===t.address));-1!==e&&s.splice(e,1)}t.setState(s,!0)}),{type:"bluetooth/subscribe_advertisements"}),r=(e,t)=>(0,i.B)("_bluetoothDeviceRows",(()=>Promise.resolve([])),o,e,t),d=(e,t,s)=>{const i={type:"bluetooth/subscribe_connection_allocations"};return s&&(i.config_entry_id=s),e.subscribeMessage((e=>t(e)),i)}},57948:function(e,t,s){s.a(e,(async function(e,i){try{s.r(t),s.d(t,{BluetoothAdvertisementMonitorPanel:()=>k});var n=s(61701),a=s(72621),o=(s(71695),s(19423),s(92551),s(39527),s(99790),s(67670),s(13334),s(47021),s(57243)),r=s(50778),d=s(27486),l=s(68958),c=(s(20130),s(23334),s(78586)),u=s(38419),h=s(28008),b=s(23273),_=e([u]);u=(_.then?(await _)():_)[0];let f,v,g=e=>e,k=(0,n.Z)([(0,r.Mo)("bluetooth-advertisement-monitor")],(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({attribute:"is-wide",type:Boolean})],key:"isWide",value(){return!1}},{kind:"field",decorators:[(0,r.SB)()],key:"_data",value(){return[]}},{kind:"field",decorators:[(0,r.SB)()],key:"_scanners",value(){return{}}},{kind:"field",decorators:[(0,r.SB)()],key:"_sourceDevices",value(){return{}}},{kind:"field",decorators:[(0,l.t)({key:"bluetooth-advertisement-table-grouping",state:!1,subscribe:!1})],key:"_activeGrouping",value(){return"source"}},{kind:"field",decorators:[(0,l.t)({key:"bluetooth-advertisement-table-collapsed",state:!1,subscribe:!1})],key:"_activeCollapsed",value(){return[]}},{kind:"field",key:"_unsub_advertisements",value:void 0},{kind:"field",key:"_unsub_scanners",value:void 0},{kind:"method",key:"connectedCallback",value:function(){if((0,a.Z)(s,"connectedCallback",this,3)([]),this.hass){this._unsub_advertisements=(0,c.PT)(this.hass.connection,(e=>{this._data=e})),this._unsub_scanners=(0,c.ho)(this.hass.connection,(e=>{this._scanners=e}));const e=Object.values(this.hass.devices).filter((e=>e.connections.find((e=>"bluetooth"===e[0]))));this._sourceDevices=Object.fromEntries(e.map((e=>[e.connections.find((e=>"bluetooth"===e[0]))[1],e])))}}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.Z)(s,"disconnectedCallback",this,3)([]),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}},{kind:"field",key:"_columns",value(){return(0,d.Z)((e=>({address:{title:e("ui.panel.config.bluetooth.address"),sortable:!0,filterable:!0,showNarrow:!0,main:!0,hideable:!1,moveable:!1,direction:"asc",flex:1},name:{title:e("ui.panel.config.bluetooth.name"),filterable:!0,sortable:!0},device:{title:e("ui.panel.config.bluetooth.device"),filterable:!0,sortable:!0,template:e=>(0,o.dy)(f||(f=g`${0}`),e.device||"-")},source:{title:e("ui.panel.config.bluetooth.source"),filterable:!0,sortable:!0,groupable:!0},source_address:{title:e("ui.panel.config.bluetooth.source_address"),filterable:!0,sortable:!0,defaultHidden:!0},rssi:{title:e("ui.panel.config.bluetooth.rssi"),type:"numeric",maxWidth:"60px",sortable:!0}})))}},{kind:"field",key:"_dataWithNamedSourceAndIds",value(){return(0,d.Z)((e=>e.map((e=>{const t=this._sourceDevices[e.address],s=this._sourceDevices[e.source],i=this._scanners[e.source];return Object.assign(Object.assign({},e),{},{id:e.address,source_address:e.source,source:(null==s?void 0:s.name_by_user)||(null==s?void 0:s.name)||(null==i?void 0:i.name)||e.source,device:(null==t?void 0:t.name_by_user)||(null==t?void 0:t.name)||void 0})}))))}},{kind:"method",key:"render",value:function(){return(0,o.dy)(v||(v=g` <hass-tabs-subpage-data-table .hass="${0}" .narrow="${0}" .route="${0}" .columns="${0}" .data="${0}" @row-click="${0}" .initialGroupColumn="${0}" .initialCollapsedGroups="${0}" @grouping-changed="${0}" @collapsed-changed="${0}" clickable></hass-tabs-subpage-data-table> `),this.hass,this.narrow,this.route,this._columns(this.hass.localize),this._dataWithNamedSourceAndIds(this._data),this._handleRowClicked,this._activeGrouping,this._activeCollapsed,this._handleGroupingChanged,this._handleCollapseChanged)}},{kind:"method",key:"_handleGroupingChanged",value:function(e){this._activeGrouping=e.detail.value}},{kind:"method",key:"_handleCollapseChanged",value:function(e){this._activeCollapsed=e.detail.value}},{kind:"method",key:"_handleRowClicked",value:function(e){const t=this._data.find((t=>t.address===e.detail.id));(0,b.o)(this,{entry:t})}},{kind:"field",static:!0,key:"styles",value(){return h.Qx}}]}}),o.oi);i()}catch(f){i(f)}}))},23273:function(e,t,s){s.d(t,{o:()=>a});s(71695),s(40251),s(47021);var i=s(36522);const n=()=>s.e("11407").then(s.bind(s,30274)),a=(e,t)=>{(0,i.B)(e,"show-dialog",{dialogTag:"dialog-bluetooth-device-info",dialogImport:n,dialogParams:t})}},92551:function(e,t,s){var i=s(40810),n=s(73994),a=s(60848);i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return n(e,(function(e,s){a(t,e,s)}),{AS_ENTRIES:!0}),t}})}}]);
//# sourceMappingURL=62885.6af10714a3314d8d.js.map