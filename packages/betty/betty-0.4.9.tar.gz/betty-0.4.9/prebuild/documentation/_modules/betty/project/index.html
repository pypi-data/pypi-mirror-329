<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="author" title="About these documents" href="../../../about/" /><link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" />

    <link rel="shortcut icon" href="../../../_static/betty-512x512.png"/><!-- Generated with Sphinx 8.2.1 and Furo 2024.08.06 -->
        <title>betty.project - Betty documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../"><div class="brand">Betty  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/betty-512x512.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Betty  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../usage/">Usage</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Usage</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/ancestry/">Ancestry</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Ancestry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/citation/">Citation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/date/">Dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/enclosure/">Enclosure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/event/">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/event-type/">Event Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/file/">File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/file-reference/">File reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/gender/">Gender</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/link/">Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/media-type/">Media Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/name/">Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/note/">Note</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/person/">Person</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/person-name/">Person Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/place/">Place</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/place-type/">Place Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/presence/">Presence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/presence-role/">Presence Role</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/privacy/">Privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/source/">Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/ancestry/static-translations/">Static translations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/assets/">Asset Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/cli/">The command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/configuration/">Application configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/copyright-notice/">Copyright notices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/env/">Environment variables</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/extension/">Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/cotton-candy/">The <em>Cotton Candy</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/deriver/">The <em>Deriver</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/gramps/">The <em>Gramps</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/http-api-doc/">The <em>HTTP API Documentation</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/maps/">The <em>Maps</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/privatizer/">The <em>Privatizer</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/raspberry-mint/">The <em>Raspberry Mint</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/trees/">The <em>Trees</em> extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/extension/wikipedia/">The <em>Wikipedia</em> extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/gedcom/">GEDCOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/license/">Licenses</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/project/">Projects</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Projects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/project/configuration/">Project configuration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../usage/templating/">Templating</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Templating</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/templating/filters/">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/templating/globals/">Globals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/templating/tests/">Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/translation/">Translations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../development/">Development</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Development</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../development/betty/">Developing Betty itself</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Developing Betty itself</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development/betty/commands/">Helpful commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/betty/installation/">Installing a development environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/betty/localization/">Localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/betty/test/">Testing Betty’s source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development/event-dispatcher/">Event dispatching</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../development/plugin/">Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Plugins</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/command/">CLI command plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/copyright-notice/">Copyright notice plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/entity-type/">Entity type plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/event-type/">Event type plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/extension/">Extension plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/gender/">Gender plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/license/">License plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/place-type/">Place type plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/presence-role/">Presence role plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/renderer/">Renderer plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development/plugin/serde-format/">Serialization format plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development/test/">Testing your source code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../py-modindex/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Glossary</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../about/">About</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of About</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../about/contributing/">Contributing to Betty</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Contributing to Betty</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/code-of-conduct/">Code of Conduct</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/license/">Copyright &amp; license</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/sponsors/">Sponsors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/versions/">Versions</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for betty.project</h1><div class="highlight"><pre>
<span></span>&quot;&quot;&quot;
Provide the project API.

Projects are how people use Betty. A project is a workspace, starting out with the user&#39;s configuration,
and combining it with the resulting ancestry, allowing the user to perform tasks, such as generating a
site from the entire project.
&quot;&quot;&quot;

from __future__ import annotations

import logging
from contextlib import asynccontextmanager, AsyncExitStack
from graphlib import TopologicalSorter
from pathlib import Path
from typing import (
    final,
    Self,
    TYPE_CHECKING,
    TypeVar,
    Iterator,
    overload,
    cast,
    Awaitable,
)

from aiofiles.tempfile import TemporaryDirectory
from typing_extensions import override

from betty import fs, event_dispatcher, model
from betty.ancestry import Ancestry
from betty.ancestry.event_type import EVENT_TYPE_REPOSITORY
from betty.ancestry.gender import GENDER_REPOSITORY, Gender
from betty.ancestry.place_type import PLACE_TYPE_REPOSITORY, PlaceType
from betty.ancestry.presence_role import PRESENCE_ROLE_REPOSITORY, PresenceRole
from betty.assets import AssetRepository
from betty.concurrent import AsynchronizedLock
from betty.config import Configurable
from betty.copyright_notice import CopyrightNotice, COPYRIGHT_NOTICE_REPOSITORY
from betty.core import CoreComponent
from betty.event_dispatcher import EventDispatcher, EventHandlerRegistry
from betty.factory import TargetFactory
from betty.hashid import hashid
from betty.job import Context
from betty.json.schema import Schema, JsonSchemaReference
from betty.locale.localizable import _
from betty.locale.localizer import LocalizerRepository
from betty.model import Entity, EntityReferenceCollectionSchema
from betty.plugin import resolve_identifier
from betty.plugin.proxy import ProxyPluginRepository
from betty.plugin.static import StaticPluginRepository
from betty.project import extension
from betty.project.config import ProjectConfiguration
from betty.project.extension import Extension, Theme, sort_extension_type_graph
from betty.project.factory import ProjectDependentFactory
from betty.project.url import (
    LocalizedUrlGenerator as ProjectLocalizedUrlGenerator,
    StaticUrlGenerator as ProjectStaticUrlGenerator,
    new_project_url_generator,
)
from betty.render import Renderer, SequentialRenderer, RENDERER_REPOSITORY
from betty.string import kebab_case_to_lower_camel_case
from betty.typing import internal
from betty.warnings import deprecated

if TYPE_CHECKING:
    from betty.license import License
    from betty.url import LocalizedUrlGenerator, StaticUrlGenerator, UrlGenerator
    from betty.ancestry.event_type import EventType
    from betty.machine_name import MachineName
    from betty.plugin import PluginIdentifier
    from collections.abc import Sequence
    from collections.abc import AsyncIterator
    from betty.app import App
    from betty.jinja2 import Environment
    from betty.plugin import PluginRepository

_T = TypeVar(&quot;_T&quot;)
_EntityT = TypeVar(&quot;_EntityT&quot;, bound=Entity)

_ProjectDependentT = TypeVar(&quot;_ProjectDependentT&quot;)


<div class="viewcode-block" id="Project">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project">[docs]</a>
@final
class Project(Configurable[ProjectConfiguration], TargetFactory, CoreComponent):
    &quot;&quot;&quot;
    Define a Betty project.

    A project combines project configuration and the resulting ancestry.
    &quot;&quot;&quot;

<div class="viewcode-block" id="Project.__init__">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project.__init__">[docs]</a>
    def __init__(
        self,
        app: App,
        configuration: ProjectConfiguration,
        *,
        ancestry: Ancestry,
    ):
        super().__init__(configuration=configuration)
        self._app = app
        self._ancestry = ancestry

        self._assets: AssetRepository | None = None
        self._assets_lock = AsynchronizedLock.threading()
        self._localizers: LocalizerRepository | None = None
        self._localizers_lock = AsynchronizedLock.threading()
        self._url_generator: UrlGenerator | None = None
        self._url_generator_lock = AsynchronizedLock.threading()
        self._localized_url_generator: LocalizedUrlGenerator | None = None
        self._localized_url_generator_lock = AsynchronizedLock.threading()
        self._static_url_generator: StaticUrlGenerator | None = None
        self._static_url_generator_lock = AsynchronizedLock.threading()
        self._jinja2_environment: Environment | None = None
        self._jinja2_environment_lock = AsynchronizedLock.threading()
        self._renderer: Renderer | None = None
        self._renderer_lock = AsynchronizedLock.threading()
        self._extensions: ProjectExtensions | None = None
        self._extensions_lock = AsynchronizedLock.threading()
        self._event_dispatcher: EventDispatcher | None = None
        self._copyright_notice: CopyrightNotice | None = None
        self._copyright_notice_lock = AsynchronizedLock.threading()
        self._copyright_notice_repository: PluginRepository[CopyrightNotice] | None = (
            None
        )
        self._license: License | None = None
        self._license_lock = AsynchronizedLock.threading()
        self._license_repository: PluginRepository[License] | None = None
        self._licenses_lock = AsynchronizedLock.threading()
        self._event_type_repository: PluginRepository[EventType] | None = None
        self._place_type_repository: PluginRepository[PlaceType] | None = None
        self._presence_role_repository: PluginRepository[PresenceRole] | None = None
        self._gender_repository: PluginRepository[Gender] | None = None
        self._entity_type_repository: PluginRepository[Entity] | None = None
        self._extension_repository: PluginRepository[Extension] | None = None</div>


<div class="viewcode-block" id="Project.new">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project.new">[docs]</a>
    @classmethod
    async def new(
        cls,
        app: App,
        *,
        configuration: ProjectConfiguration,
        ancestry: Ancestry | None = None,
    ) -&gt; Self:
        &quot;&quot;&quot;
        Create a new instance.
        &quot;&quot;&quot;
        return cls(
            app,
            configuration,
            ancestry=await Ancestry.new() if ancestry is None else ancestry,
        )</div>


<div class="viewcode-block" id="Project.new_temporary">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project.new_temporary">[docs]</a>
    @classmethod
    @asynccontextmanager
    async def new_temporary(
        cls,
        app: App,
        *,
        configuration: ProjectConfiguration | None = None,
        ancestry: Ancestry | None = None,
    ) -&gt; AsyncIterator[Self]:
        &quot;&quot;&quot;
        Creat a new, temporary, isolated project.

        The project will not leave any traces on the system, except when it uses
        global Betty functionality such as caches.
        &quot;&quot;&quot;
        async with AsyncExitStack() as stack:
            if configuration is None:
                project_directory_path_str = await stack.enter_async_context(
                    TemporaryDirectory()
                )
                configuration = await ProjectConfiguration.new(
                    Path(
                        project_directory_path_str,  # type: ignore[arg-type]
                    )
                    / &quot;betty.json&quot;
                )
            yield await cls.new(app, configuration=configuration, ancestry=ancestry)</div>


<div class="viewcode-block" id="Project.bootstrap">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project.bootstrap">[docs]</a>
    @override
    async def bootstrap(self) -&gt; None:
        await super().bootstrap()
        try:
            for project_extension_batch in await self.extensions:
                batch_event_handlers = EventHandlerRegistry()
                for project_extension in project_extension_batch:
                    await project_extension.bootstrap()
                    self._shutdown_stack.append(project_extension)
                    project_extension.register_event_handlers(batch_event_handlers)
                self.event_dispatcher.add_registry(batch_event_handlers)
            await self._assert_configuration()
        except BaseException:
            await self.shutdown()
            raise</div>


    async def _assert_configuration(self) -&gt; None:
        await self.configuration.entity_types.validate(self.entity_type_repository)

    @property
    def app(self) -&gt; App:
        &quot;&quot;&quot;
        The application this project is run within.
        &quot;&quot;&quot;
        return self._app

    @property
    def name(self) -&gt; MachineName:
        &quot;&quot;&quot;
        The project name.

        If no project name was configured, this defaults to the hash of the configuration file path.
        &quot;&quot;&quot;
        if self._configuration.name is None:
            return hashid(str(self._configuration.configuration_file_path))
        return self._configuration.name

    @property
    def ancestry(self) -&gt; Ancestry:
        &quot;&quot;&quot;
        The project&#39;s ancestry.
        &quot;&quot;&quot;
        return self._ancestry

    @property
    def assets(self) -&gt; Awaitable[AssetRepository]:
        &quot;&quot;&quot;
        The assets file system.
        &quot;&quot;&quot;
        return self._get_assets()

    async def _get_assets(self) -&gt; AssetRepository:
        async with self._assets_lock:
            if self._assets is None:
                self.assert_bootstrapped()
                asset_paths = [self.configuration.assets_directory_path]
                extensions = await self.extensions
                for extension in extensions.flatten():
                    extension_assets_directory_path = extension.assets_directory_path()
                    if extension_assets_directory_path is not None:
                        asset_paths.append(extension_assets_directory_path)
                # Mimic :py:attr:`betty.app.App.assets`.
                asset_paths.append(fs.ASSETS_DIRECTORY_PATH)
                self._assets = AssetRepository(*asset_paths)
        return self._assets

    @property
    def localizers(self) -&gt; Awaitable[LocalizerRepository]:
        &quot;&quot;&quot;
        The available localizers.
        &quot;&quot;&quot;
        return self._get_localizers()

    async def _get_localizers(self) -&gt; LocalizerRepository:
        async with self._localizers_lock:
            if self._localizers is None:
                self.assert_bootstrapped()
                self._localizers = LocalizerRepository(await self.assets)
        return self._localizers

    @property
    def url_generator(self) -&gt; Awaitable[UrlGenerator]:
        &quot;&quot;&quot;
        The URL generator.
        &quot;&quot;&quot;
        return self._get_url_generator()

    async def _get_url_generator(self) -&gt; UrlGenerator:
        async with self._url_generator_lock:
            if self._url_generator is None:
                self.assert_bootstrapped()
                self._url_generator = await new_project_url_generator(self)
        return self._url_generator

    @property
    @deprecated(
        &quot;This service has been deprecated since Betty 0.4.8, and will be removed in Betty 0.5. Instead use `Project.url_generator`.&quot;
    )
    def localized_url_generator(self) -&gt; Awaitable[LocalizedUrlGenerator]:
        &quot;&quot;&quot;
        The URL generator for localizable resources.
        &quot;&quot;&quot;
        return self._get_localized_url_generator()

    async def _get_localized_url_generator(self) -&gt; LocalizedUrlGenerator:
        async with self._localized_url_generator_lock:
            if self._localized_url_generator is None:
                self.assert_bootstrapped()
                self._localized_url_generator = (
                    await ProjectLocalizedUrlGenerator.new_for_project(self)
                )
        return self._localized_url_generator

    @property
    @deprecated(
        &quot;This service has been deprecated since Betty 0.4.8, and will be removed in Betty 0.5. Instead use `Project.url_generator`.&quot;
    )
    def static_url_generator(self) -&gt; Awaitable[StaticUrlGenerator]:
        &quot;&quot;&quot;
        The URL generator for static resources.
        &quot;&quot;&quot;
        return self._get_static_url_generator()

    async def _get_static_url_generator(self) -&gt; StaticUrlGenerator:
        async with self._static_url_generator_lock:
            if self._static_url_generator is None:
                self.assert_bootstrapped()
                self._static_url_generator = (
                    await ProjectStaticUrlGenerator.new_for_project(self)
                )
        return self._static_url_generator

    @property
    def jinja2_environment(self) -&gt; Awaitable[Environment]:
        &quot;&quot;&quot;
        The Jinja2 environment.
        &quot;&quot;&quot;
        return self._get_jinja2_environment()

    async def _get_jinja2_environment(self) -&gt; Environment:
        async with self._jinja2_environment_lock:
            if not self._jinja2_environment:
                from betty.jinja2 import Environment

                self.assert_bootstrapped()
                self._jinja2_environment = await Environment.new_for_project(self)

        return self._jinja2_environment

    @property
    def renderer(self) -&gt; Awaitable[Renderer]:
        &quot;&quot;&quot;
        The (file) content renderer.
        &quot;&quot;&quot;
        return self._get_renderer()

    async def _get_renderer(self) -&gt; Renderer:
        async with self._renderer_lock:
            if not self._renderer:
                self.assert_bootstrapped()
                self._renderer = SequentialRenderer(
                    [
                        await self.new_target(plugin)
                        for plugin in await RENDERER_REPOSITORY.select()
                    ]
                )
        return self._renderer

    @property
    def extensions(self) -&gt; Awaitable[ProjectExtensions]:
        &quot;&quot;&quot;
        The enabled extensions.
        &quot;&quot;&quot;
        return self._get_extensions()

    async def _get_extensions(self) -&gt; ProjectExtensions:
        async with self._extensions_lock:
            if self._extensions is None:
                self._extensions = await self._init_extensions()
        return self._extensions

    async def _init_extensions(self) -&gt; ProjectExtensions:
        self.assert_bootstrapped()
        extensions = {}
        for extension_configuration in self.configuration.extensions.values():
            extension = await self.extension_repository.get(extension_configuration.id)
            extension_requirement = await extension.requirement()
            extension_requirement.assert_met()
            extensions[extension] = extension_configuration

        extensions_sorter = TopologicalSorter[type[Extension]]()
        await sort_extension_type_graph(extensions_sorter, extensions)
        extensions_sorter.prepare()

        theme_count = 0
        project_extension_instances = []
        while extensions_sorter.is_active():
            extensions_batch = extensions_sorter.get_ready()
            extension_instances_batch = []
            for extension in extensions_batch:
                if issubclass(extension, Theme):
                    theme_count += 1
                if extension in extensions:
                    extension_instance = await extensions[
                        extension
                    ].new_plugin_instance(self.extension_repository)
                else:
                    extension_instance = await self.extension_repository.new_target(
                        extension
                    )
                extension_instances_batch.append(extension_instance)
                extensions_sorter.done(extension)
            project_extension_instances.append(
                sorted(
                    extension_instances_batch,
                    key=lambda extension_instance: extension_instance.plugin_id(),
                )
            )
        initialized_extensions = ProjectExtensions(project_extension_instances)

        # Users may not realize no theme is enabled, and be confused by their site looking bare.
        # Warn them out of courtesy.
        if theme_count == 0:
            logging.getLogger().warning(
                _(
                    &#39;Your project has no theme enabled. This means your site\&#39;s pages may look bare. Try the &quot;raspberry-mint&quot; extension.&#39;
                ).localize(await self.app.localizer)
            )

        return initialized_extensions

    @property
    def event_dispatcher(self) -&gt; EventDispatcher:
        &quot;&quot;&quot;
        The event dispatcher.
        &quot;&quot;&quot;
        if self._event_dispatcher is None:
            self.assert_bootstrapped()
            self._event_dispatcher = EventDispatcher()

        return self._event_dispatcher

<div class="viewcode-block" id="Project.new_target">
<a class="viewcode-back" href="../../../betty.project/#betty.project.Project.new_target">[docs]</a>
    @override
    async def new_target(self, cls: type[_T]) -&gt; _T:
        &quot;&quot;&quot;
        Create a new instance.

        :return:
            #. If ``cls`` extends :py:class:`betty.project.factory.ProjectDependentFactory`, this will call return
                ``cls``&#39;s ``new()``&#39;s return value.
            #. If ``cls`` extends :py:class:`betty.app.factory.AppDependentFactory`, this will call return ``cls``&#39;s
                ``new()``&#39;s return value.
            #. If ``cls`` extends :py:class:`betty.factory.IndependentFactory`, this will call return ``cls``&#39;s
                ``new()``&#39;s return value.
            #. Otherwise ``cls()`` will be called without arguments, and the resulting instance will be returned.

        :raises FactoryError: raised when ``cls`` could not be instantiated.
        &quot;&quot;&quot;
        if issubclass(cls, ProjectDependentFactory):
            return cast(_T, await cls.new_for_project(self))
        return await self.app.new_target(cls)</div>


    @property
    def logo(self) -&gt; Path:
        &quot;&quot;&quot;
        The path to the logo file.
        &quot;&quot;&quot;
        return (
            self._configuration.logo
            or fs.ASSETS_DIRECTORY_PATH / &quot;public&quot; / &quot;static&quot; / &quot;betty-512x512.png&quot;
        )

    @property
    def copyright_notice(self) -&gt; Awaitable[CopyrightNotice]:
        &quot;&quot;&quot;
        The overall project copyright.
        &quot;&quot;&quot;
        return self._get_copyright_notice()

    async def _get_copyright_notice(self) -&gt; CopyrightNotice:
        async with self._copyright_notice_lock:
            if self._copyright_notice is None:
                self.assert_bootstrapped()
                self._copyright_notice = (
                    await self.configuration.copyright_notice.new_plugin_instance(
                        self.copyright_notice_repository
                    )
                )
        return self._copyright_notice

    @property
    def copyright_notice_repository(self) -&gt; PluginRepository[CopyrightNotice]:
        &quot;&quot;&quot;
        The copyright notices available to this project.

        Read more about :doc:`/development/plugin/copyright-notice`.
        &quot;&quot;&quot;
        if self._copyright_notice_repository is None:
            self.assert_bootstrapped()
            self._copyright_notice_repository = ProxyPluginRepository(
                COPYRIGHT_NOTICE_REPOSITORY,
                StaticPluginRepository(
                    *self.configuration.copyright_notices.new_plugins()
                ),
                factory=self.new_target,
            )

        return self._copyright_notice_repository

    @property
    def license(self) -&gt; Awaitable[License]:
        &quot;&quot;&quot;
        The overall project license.
        &quot;&quot;&quot;
        return self._get_license()

    async def _get_license(self) -&gt; License:
        async with self._license_lock:
            if self._license is None:
                self._license = await self.configuration.license.new_plugin_instance(
                    await self.license_repository
                )
        return self._license

    @property
    def license_repository(self) -&gt; Awaitable[PluginRepository[License]]:
        &quot;&quot;&quot;
        The licenses available to this project.

        Read more about :doc:`/development/plugin/license`.
        &quot;&quot;&quot;
        return self._get_licenses()

    async def _get_licenses(self) -&gt; PluginRepository[License]:
        async with self._licenses_lock:
            if self._license_repository is None:
                self.assert_bootstrapped()
                self._license_repository = ProxyPluginRepository(
                    await self._app.spdx_license_repository,
                    StaticPluginRepository(*self.configuration.licenses.new_plugins()),
                    factory=self.new_target,
                )

        return self._license_repository

    @property
    def event_type_repository(self) -&gt; PluginRepository[EventType]:
        &quot;&quot;&quot;
        The event types available to this project.
        &quot;&quot;&quot;
        if self._event_type_repository is None:
            self.assert_bootstrapped()
            self._event_type_repository = ProxyPluginRepository(
                EVENT_TYPE_REPOSITORY,
                StaticPluginRepository(*self.configuration.event_types.new_plugins()),
                factory=self.new_target,
            )

        return self._event_type_repository

    @property
    def place_type_repository(self) -&gt; PluginRepository[PlaceType]:
        &quot;&quot;&quot;
        The place types available to this project.
        &quot;&quot;&quot;
        if self._place_type_repository is None:
            self.assert_bootstrapped()
            self._place_type_repository = ProxyPluginRepository(
                PLACE_TYPE_REPOSITORY,
                StaticPluginRepository(*self.configuration.place_types.new_plugins()),
                factory=self.new_target,
            )

        return self._place_type_repository

    @property
    def presence_role_repository(self) -&gt; PluginRepository[PresenceRole]:
        &quot;&quot;&quot;
        The presence roles available to this project.
        &quot;&quot;&quot;
        if self._presence_role_repository is None:
            self.assert_bootstrapped()
            self._presence_role_repository = ProxyPluginRepository(
                PRESENCE_ROLE_REPOSITORY,
                StaticPluginRepository(
                    *self.configuration.presence_roles.new_plugins()
                ),
                factory=self.new_target,
            )

        return self._presence_role_repository

    @property
    def gender_repository(self) -&gt; PluginRepository[Gender]:
        &quot;&quot;&quot;
        The genders available to this project.

        Read more about :doc:`/development/plugin/gender`.
        &quot;&quot;&quot;
        if self._gender_repository is None:
            self.assert_bootstrapped()
            self._gender_repository = ProxyPluginRepository(
                GENDER_REPOSITORY,
                StaticPluginRepository(*self.configuration.genders.new_plugins()),
                factory=self.new_target,
            )

        return self._gender_repository

    @property
    def entity_type_repository(self) -&gt; PluginRepository[Entity]:
        &quot;&quot;&quot;
        The entity types available to this project.

        Read more about :doc:`/development/plugin/entity-type`.
        &quot;&quot;&quot;
        if self._entity_type_repository is None:
            self.assert_bootstrapped()
            self._entity_type_repository = ProxyPluginRepository(
                model.ENTITY_TYPE_REPOSITORY, factory=self.new_target
            )

        return self._entity_type_repository

    @property
    def extension_repository(self) -&gt; PluginRepository[Extension]:
        &quot;&quot;&quot;
        The extensions available to this project.

        Read more about :doc:`/development/plugin/extension`.
        &quot;&quot;&quot;
        if self._extension_repository is None:
            self.assert_bootstrapped()
            self._extension_repository = ProxyPluginRepository(
                extension.EXTENSION_REPOSITORY, factory=self.new_target
            )

        return self._extension_repository</div>



_ExtensionT = TypeVar(&quot;_ExtensionT&quot;, bound=Extension)


<div class="viewcode-block" id="ProjectExtensions">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectExtensions">[docs]</a>
@internal
@final
class ProjectExtensions:
    &quot;&quot;&quot;
    Manage the extensions running within the :py:class:`betty.project.Project`.
    &quot;&quot;&quot;

<div class="viewcode-block" id="ProjectExtensions.__init__">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectExtensions.__init__">[docs]</a>
    def __init__(self, project_extensions: Sequence[Sequence[Extension]]):
        super().__init__()
        self._project_extensions = project_extensions</div>


    @overload
    def __getitem__(self, extension_id: MachineName) -&gt; Extension:
        pass

    @overload
    def __getitem__(self, extension_type: type[_ExtensionT]) -&gt; _ExtensionT:
        pass

    def __getitem__(
        self, extension_identifier: PluginIdentifier[Extension]
    ) -&gt; Extension:
        extension_id = resolve_identifier(extension_identifier)
        for project_extension in self.flatten():
            if project_extension.plugin_id() == extension_id:
                return project_extension
        raise KeyError(f&#39;Unknown extension of type &quot;{extension_identifier}&quot;&#39;)

    def __iter__(self) -&gt; Iterator[Iterator[Extension]]:
        &quot;&quot;&quot;
        Iterate over all extensions, in topologically sorted batches.

        Each item is a batch of extensions. Items are ordered because later items depend
        on earlier items. The extensions in each item do not depend on each other and their
        order has no meaning. However, implementations SHOULD sort the extensions in each
        item in a stable fashion for reproducability.
        &quot;&quot;&quot;
        # Use a generator so we discourage calling code from storing the result.
        for batch in self._project_extensions:
            yield (project_extension for project_extension in batch)

<div class="viewcode-block" id="ProjectExtensions.flatten">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectExtensions.flatten">[docs]</a>
    def flatten(self) -&gt; Iterator[Extension]:
        &quot;&quot;&quot;
        Get a sequence of topologically sorted extensions.
        &quot;&quot;&quot;
        for batch in self:
            yield from batch</div>


    def __contains__(self, extension_identifier: PluginIdentifier[Extension]) -&gt; bool:
        try:
            self[extension_identifier]
        except KeyError:
            return False
        else:
            return True</div>



<div class="viewcode-block" id="ProjectEvent">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectEvent">[docs]</a>
class ProjectEvent(event_dispatcher.Event):
    &quot;&quot;&quot;
    An event that is dispatched within the context of a :py:class:`betty.project.Project`.
    &quot;&quot;&quot;

<div class="viewcode-block" id="ProjectEvent.__init__">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectEvent.__init__">[docs]</a>
    def __init__(self, job_context: ProjectContext):
        self._job_context = job_context</div>


    @property
    def project(self) -&gt; Project:
        &quot;&quot;&quot;
        The :py:class:`betty.project.Project` this event is dispatched within.
        &quot;&quot;&quot;
        return self.job_context.project

    @property
    def job_context(self) -&gt; ProjectContext:
        &quot;&quot;&quot;
        The site generation job context.
        &quot;&quot;&quot;
        return self._job_context</div>



<div class="viewcode-block" id="ProjectSchema">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectSchema">[docs]</a>
@final
class ProjectSchema(ProjectDependentFactory, Schema):
    &quot;&quot;&quot;
    A JSON Schema for a project.
    &quot;&quot;&quot;

<div class="viewcode-block" id="ProjectSchema.def_url">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectSchema.def_url">[docs]</a>
    @classmethod
    async def def_url(cls, project: Project, def_name: str) -&gt; str:
        &quot;&quot;&quot;
        Get the URL to a project&#39;s JSON Schema definition.
        &quot;&quot;&quot;
        return f&quot;{await cls.url(project)}#/$defs/{def_name}&quot;</div>


<div class="viewcode-block" id="ProjectSchema.url">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectSchema.url">[docs]</a>
    @classmethod
    async def url(cls, project: Project) -&gt; str:
        &quot;&quot;&quot;
        Get the URL to a project&#39;s JSON Schema.
        &quot;&quot;&quot;
        url_generator = await project.url_generator
        return url_generator.generate(&quot;betty-static:///schema.json&quot;, absolute=True)</div>


<div class="viewcode-block" id="ProjectSchema.www_path">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectSchema.www_path">[docs]</a>
    @classmethod
    def www_path(cls, project: Project) -&gt; Path:
        &quot;&quot;&quot;
        Get the path to the schema file in a site&#39;s public WWW directory.
        &quot;&quot;&quot;
        return project.configuration.www_directory_path / &quot;schema.json&quot;</div>


<div class="viewcode-block" id="ProjectSchema.new_for_project">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectSchema.new_for_project">[docs]</a>
    @override
    @classmethod
    async def new_for_project(cls, project: Project) -&gt; Self:
        from betty import model

        schema = cls()
        schema._schema[&quot;$id&quot;] = await cls.url(project)

        # Add entity schemas.
        async for entity_type in model.ENTITY_TYPE_REPOSITORY:
            entity_type_schema = await entity_type.linked_data_schema(project)
            entity_type_schema.embed(schema)
            def_name = f&quot;{kebab_case_to_lower_camel_case(entity_type.plugin_id())}EntityCollectionResponse&quot;
            schema.defs[def_name] = {
                &quot;type&quot;: &quot;object&quot;,
                &quot;properties&quot;: {
                    &quot;collection&quot;: EntityReferenceCollectionSchema().embed(schema),
                },
            }

        # Add the HTTP error response.
        schema.defs[&quot;errorResponse&quot;] = {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;$schema&quot;: JsonSchemaReference().embed(schema),
                &quot;message&quot;: {
                    &quot;type&quot;: &quot;string&quot;,
                },
            },
            &quot;required&quot;: [
                &quot;$schema&quot;,
                &quot;message&quot;,
            ],
            &quot;additionalProperties&quot;: False,
        }

        schema._schema[&quot;anyOf&quot;] = [
            {&quot;$ref&quot;: f&quot;#/$defs/{def_name}&quot;} for def_name in schema.defs
        ]

        return schema</div>
</div>



<div class="viewcode-block" id="ProjectContext">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectContext">[docs]</a>
class ProjectContext(Context):
    &quot;&quot;&quot;
    A job context for a project.
    &quot;&quot;&quot;

<div class="viewcode-block" id="ProjectContext.__init__">
<a class="viewcode-back" href="../../../betty.project/#betty.project.ProjectContext.__init__">[docs]</a>
    def __init__(self, project: Project):
        super().__init__()
        self._project = project</div>


    @property
    def project(self) -&gt; Project:
        &quot;&quot;&quot;
        The Betty project this job context is run within.
        &quot;&quot;&quot;
        return self._project</div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Bart Feenstra and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=187304be"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    </body>
</html>