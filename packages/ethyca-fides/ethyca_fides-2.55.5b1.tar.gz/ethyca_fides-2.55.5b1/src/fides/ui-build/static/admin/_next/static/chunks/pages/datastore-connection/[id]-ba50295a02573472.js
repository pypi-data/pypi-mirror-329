(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6446],{10463:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/[id]",function(){return n(13337)}])},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return f},Ot:function(){return u},c6:function(){return i},cj:function(){return p},e$:function(){return l},fn:function(){return o},iC:function(){return h},nU:function(){return d},tB:function(){return c}});var r,i,s=n(41164);let a="An unexpected error occurred. Please try again.",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"==typeof e&&null!=e&&"status"in e}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:l(e,t.message)}}return t},f=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let h={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},p=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},9699:function(e,t,n){"use strict";var r=n(24246),i=n(41748),s=n(34090);t.Z=e=>{let{disabled:t=!1,displayHelpIcon:n=!0,helpIconVisibility:a=!1,isRequired:l=!1,label:o,placeholder:u,type:c="text",...d}=e,{id:f,autoFocus:h}=d,[p,g]=(0,s.U$)(d);return(0,r.jsxs)(i.NIc,{display:"flex",isRequired:l,isInvalid:!!(g.error&&g.touched),children:[o&&(0,r.jsx)(i.lXp,{color:"gray.900",fontSize:"14px",fontWeight:"semibold",htmlFor:f,minWidth:"150px",children:o}),(0,r.jsxs)(i.gCW,{align:"flex-start",w:"inherit",children:["number"===c&&(0,r.jsxs)(i.Y2U,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,r.jsx)(i.zuI,{...p,autoComplete:"off",autoFocus:h}),(0,r.jsxs)(i.FiK,{children:[(0,r.jsx)(i.WQu,{}),(0,r.jsx)(i.Y_d,{})]})]}),"text"===c&&(0,r.jsx)(i.IIB,{...p,autoComplete:"off",autoFocus:h,color:"gray.700",isDisabled:t,placeholder:u,size:"sm"}),"textarea"===c&&(0,r.jsx)(i.gxH,{...p,autoComplete:"off",autoFocus:h,color:"gray.700",placeholder:u,resize:"none",size:"sm",value:p.value||""}),(0,r.jsx)(i.J1D,{children:g.error})]}),n&&(0,r.jsx)(i.kCb,{alignContent:"center",h:"32px",visibility:a?"visible":"hidden",children:(0,r.jsx)(i.ITP,{marginLeft:"8px",_hover:{cursor:"pointer"}})})]})}},13337:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(24246),i=n(73025),s=n(41748),a=n(86677),l=n(27378),o=n(44296),u=n(53359),c=n(87162),d=n(69477),f=n(84421),h=n(36848),p=n(37541),g=n(59201),x=n(35894),y=n(4894),m=n(89468),v=n(91694),j=()=>{let e=(0,o.T)(),{connection:t,connectionOption:n}=(0,o.C)(d.ZZ),[i,a]=(0,l.useState)(void 0),u=(0,l.useMemo)(()=>()=>{let e=[];return(null==i?void 0:i.options)&&i.options.forEach(n=>{let i;switch(n){case x.H5.CONNECTOR_PARAMETERS:i={label:n,content:(0,r.jsx)(g.s,{})};break;case x.H5.DATASET_CONFIGURATION:i=(null==t?void 0:t.key)?{label:n,content:(0,r.jsx)(y.Z,{})}:void 0;break;case x.H5.DSR_CUSTOMIZATION:i=(null==t?void 0:t.key)?{label:n,content:(0,r.jsx)(m.Z,{})}:void 0}i&&e.push(i)}),e},[null==t?void 0:t.key,null==i?void 0:i.options]);return(0,l.useEffect)(()=>{if(n){let t=x.IM.find(e=>e.type===(null==n?void 0:n.type));t&&(a(t),e((0,d.nj)(x.Ss[2])))}return()=>{e((0,d.mc)())}},[n,e]),t&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{heading:"Connection manager",breadcrumbItems:[{title:"All connections",href:c.JR},{title:t.name}]}),(0,r.jsx)(s.X6q,{fontSize:"md",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,r.jsxs)(s.xuv,{alignItems:"center",display:"flex",children:[(0,r.jsx)(v.Z,{data:n}),(0,r.jsx)(s.xvT,{ml:"8px",children:t.name})]})}),(0,r.jsx)(s.gCW,{alignItems:"stretch",flex:"1",gap:"18px",children:(0,r.jsx)(h.Z,{data:u(),flexGrow:1,isLazy:!0})})]}):null},b=n(46042),_=()=>{let e=(0,o.T)(),t=(0,a.useRouter)(),{id:n}=t.query,{errorAlert:h}=(0,u.V)(),p=(0,o.C)(d.y_),[g,x]=(0,l.useState)(!0),y=(e,t)=>t.find(t=>{var n;return t.identifier===e.connection_type&&t.identifier!==b.Rj.SAAS||t.identifier===(null===(n=e.saas_config)||void 0===n?void 0:n.type)});return(0,l.useEffect)(()=>{let r=()=>{h("An error occurred while loading ".concat(t.query.id)),t.push(c.JR,void 0,{shallow:!0})},i=async t=>{try{let n=[];n.push(e(f.DM.endpoints.getDatastoreConnectionByKey.initiate(t))),0===p.length&&n.push(e(d.d8.endpoints.getAllConnectionTypes.initiate({search:""})));let i=await Promise.allSettled(n);if(i.every(e=>"fulfilled"===e.status)){e((0,d.lm)(i[0].value.data));let t=[...i[1]?i[1].value.data.items:p],n=y(i[0].value.data,t);e((0,d.yA)(n)),x(!1)}else r()}catch(e){r()}};return n&&i(n),()=>{}},[n]),(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(s.xuv,{display:"flex",h:"100vh",justifyContent:"center",children:(0,r.jsx)(s.M5Y,{children:(0,r.jsx)(s.$jN,{})})}),!g&&(0,r.jsx)(i.Z,{children:(0,r.jsx)(j,{})})]})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return o},XD:function(){return u},cz:function(){return c},hE:function(){return l},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,r.Ln)({status:"number",data:{}},e),l=e=>(0,r.Ln)({detail:"string"},e),o=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});let r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?i in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e]));class a{static narrow(e){return new a(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a(e=>t(e)&&n(e))}}new a(e=>!0)}},function(e){e.O(0,[3005,8986,9822,2888,9774,179],function(){return e(e.s=10463)}),_N_E=e.O()}]);