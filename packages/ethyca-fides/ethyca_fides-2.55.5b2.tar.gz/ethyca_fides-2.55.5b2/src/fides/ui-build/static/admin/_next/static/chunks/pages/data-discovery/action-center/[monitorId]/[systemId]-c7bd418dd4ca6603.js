(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{58095:function(e,t,n){var s=n(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,n){for(var s=-1,i=null==e?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}},95372:function(e){e.exports=function(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return -1}},8817:function(e,t,n){var s=n(95372),i=n(1129),a=n(58263);e.exports=function(e,t,n){return t==t?a(e,t,n):s(e,i,n)}},1129:function(e){e.exports=function(e){return e!=e}},74833:function(e,t,n){var s=n(56127),i=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(i,""):e}},92198:function(e,t,n){var s=n(52485),i=n(58095),a=n(21796),r=n(65581),o=n(47111),l=n(43735);e.exports=function(e,t,n){var d=-1,c=i,u=e.length,m=!0,h=[],v=h;if(n)m=!1,c=a;else if(u>=200){var g=t?null:o(e);if(g)return l(g);m=!1,c=r,v=new s}else v=t?[]:h;e:for(;++d<u;){var p=e[d],f=t?t(p):p;if(p=n||0!==p?p:0,m&&f==f){for(var x=v.length;x--;)if(v[x]===f)continue e;t&&v.push(f),h.push(p)}else c(v,f,n)||(v!==h&&v.push(f),h.push(p))}return h}},56632:function(e,t,n){var s=n(89278),i=n(80068),a=n(50098);e.exports=function(e){return function(t,n,r){var o=Object(t);if(!i(t)){var l=s(n,3);t=a(t),n=function(e){return l(o[e],e,o)}}var d=e(t,n,r);return d>-1?o[l?t[d]:d]:void 0}}},47111:function(e,t,n){var s=n(46151),i=n(50344),a=n(43735),r=s&&1/a(new s([,-0]))[1]==1/0?function(e){return new s(e)}:i;e.exports=r},58263:function(e){e.exports=function(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return -1}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var s=n(11611),i=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,d,c,u,m,h,v=0,g=!1,p=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=l,s=d;return l=d=void 0,v=t,u=e.apply(s,n)}function y(e){var n=e-h,s=e-v;return void 0===h||n>=t||n<0||p&&s>=c}function j(){var e,n,s,a=i();if(y(a))return b(a);m=setTimeout(j,(e=a-h,n=a-v,s=t-e,p?o(s,c-n):s))}function b(e){return(m=void 0,f&&l)?x(e):(l=d=void 0,u)}function C(){var e,n=i(),s=y(n);if(l=arguments,d=this,h=n,s){if(void 0===m)return v=e=h,m=setTimeout(j,t),g?x(e):u;if(p)return clearTimeout(m),m=setTimeout(j,t),x(h)}return void 0===m&&(m=setTimeout(j,t)),u}return t=a(t)||0,s(n)&&(g=!!n.leading,c=(p="maxWait"in n)?r(a(n.maxWait)||0,t):c,f="trailing"in n?!!n.trailing:f),C.cancel=function(){void 0!==m&&clearTimeout(m),v=0,l=h=d=m=void 0},C.flush=function(){return void 0===m?u:b(i())},C}},64925:function(e,t,n){var s=n(56632)(n(66259));e.exports=s},66259:function(e,t,n){var s=n(95372),i=n(89278),a=n(47991),r=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return -1;var l=null==n?0:a(n);return l<0&&(l=r(o+l,0)),s(e,i(t,3),l)}},50344:function(e){e.exports=function(){}},82846:function(e,t,n){var s=n(77400);e.exports=function(){return s.Date.now()}},94919:function(e,t,n){var s=n(91936),i=1/0;e.exports=function(e){return e?(e=s(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,n){var s=n(94919);e.exports=function(e){var t=s(e),n=t%1;return t==t?n?t-n:t:0}},91936:function(e,t,n){var s=n(74833),i=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=l.test(e);return n||d.test(e)?c(e.slice(2),n?2:8):o.test(e)?r:+e}},83766:function(e,t,n){var s=n(92198);e.exports=function(e){return e&&e.length?s(e):[]}},25654:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/[systemId]",function(){return n(95103)}])},65464:function(e,t,n){"use strict";var s=n(24246),i=n(96013),a=n(88038),r=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,mainProps:a}=e;return(0,s.jsxs)(i.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,s.jsxs)(r(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(i.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...a,children:t})]})}},37541:function(e,t,n){"use strict";var s=n(24246),i=n(96013),a=n(53614);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:d,...c}=e;return(0,s.jsxs)("div",{...c,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,s.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,s.jsx)(i.X6q,{className:n||o?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,s.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,s.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},74588:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var s=n(24246),i=n(96013),a=n(55372),r=n.n(a);let o=e=>{let{data:t}=e;return(0,s.jsxs)(i.jqI,{gap:12,title:"".concat(t.primaryName||"").concat(t.primaryName?": ":"").concat(t.name," - ").concat(t.description),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:t.primaryName||t.name}),t.primaryName&&": ".concat(t.name)]}),(0,s.jsx)("em",{children:t.description})]})},l=e=>{let{options:t,...n}=e,a=null==t?void 0:t.map(e=>({...e,className:r().option}));return(0,s.jsx)(i.WPr,{options:a,autoFocus:!0,variant:"borderless",optionRender:o,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...n})}},78973:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var s=n(24246),i=n(96013),a=n(34090),r=n(27378),o=n(39514),l=n(34803);let d=e=>{let{name:t,label:n,labelProps:d,tooltip:c,isRequired:u,layout:m="inline",...h}=e,[v,g,{setValue:p}]=(0,a.U$)(t),f=!!(g.touched&&g.error),[x,y]=(0,r.useState)("");v.value||"tags"!==h.mode&&"multiple"!==h.mode||(v.value=[]),"tags"===h.mode&&"string"==typeof v.value&&(v.value=[v.value]);let j="tags"===h.mode?(e,t)=>e?e.value!==x||v.value.includes(x)?h.optionRender?h.optionRender(e,t):e.label:'Create "'.concat(x,'"'):void 0:h.optionRender||void 0,b=e=>{y(e),h.onSearch&&h.onSearch(e)},C=(e,t)=>{p(e),h.onChange&&h.onChange(e,t)};return"inline"===m?(0,s.jsx)(i.NIc,{isInvalid:f,isRequired:u,children:(0,s.jsxs)(i.rjZ,{templateColumns:n?"1fr 3fr":"1fr",children:[n?(0,s.jsx)(l.__,{htmlFor:h.id||t,...d,children:n}):null,(0,s.jsxs)(i.jqI,{align:"center",children:[(0,s.jsxs)(i.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,s.jsx)(i.WPr,{...v,id:h.id||t,"data-testid":"controlled-select-".concat(v.name),...h,optionRender:j,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:v.value||void 0}),(0,s.jsx)(l.Bc,{isInvalid:f,message:g.error,fieldName:v.name})]}),c?(0,s.jsx)(o.Z,{label:c}):null]})]})}):(0,s.jsx)(i.NIc,{isInvalid:f,isRequired:u,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.jqI,{align:"center",children:[n?(0,s.jsx)(l.__,{htmlFor:h.id||t,fontSize:"xs",my:0,mr:1,...d,children:n}):null,c?(0,s.jsx)(o.Z,{label:c}):null]}),(0,s.jsx)(i.WPr,{...v,id:h.id||t,"data-testid":"controlled-select-".concat(v.name),...h,optionRender:j,onSearch:"tags"===h.mode?b:void 0,onChange:C,value:v.value||void 0}),(0,s.jsx)(l.Bc,{isInvalid:f,message:g.error,fieldName:v.name})]})})}},53359:function(e,t,n){"use strict";n.d(t,{H:function(){return a},V:function(){return s.V}});var s=n(75139),i=n(60136);let a=()=>{let{errorAlert:e}=(0,s.V)();return{handleError:t=>{let n="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?n=t.data.detail:(0,i.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}}},75139:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var s=n(24246),i=n(96013);let a=()=>{let e=(0,i.pmc)();return{errorAlert:(t,n,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[n&&(0,s.jsx)(i.CdC,{children:n}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)},successAlert:(t,n,a)=>{let r={...a,position:(null==a?void 0:a.position)||"top",render:e=>{let{onClose:a}=e;return(0,s.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,s.jsx)(i.zMQ,{}),(0,s.jsxs)(i.xuv,{children:[n&&(0,s.jsx)(i.CdC,{children:n}),(0,s.jsx)(i.XaZ,{children:t})]}),(0,s.jsx)(i.PZ7,{onClick:a,position:"relative",right:0,size:"sm",top:-1})]})}};(null==a?void 0:a.id)&&e.isActive(a.id)?e.update(a.id,r):e(r)}}}},73269:function(e,t,n){"use strict";n.d(t,{Gt:function(){return m},eB:function(){return h},oI:function(){return u}});var s=n(24246),i=n(34090),a=n(27378),r=n(44296),o=n(3073),l=n(77650);let d=(0,a.createRef)(),c=(0,a.createRef)(),u=()=>{let e=(0,r.T)(),t=(0,r.C)(o.DB),n=(0,a.useCallback)(()=>{c.current=void 0,d.current=void 0},[]),s=(0,a.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!0),n())},[e,n]),i=(0,a.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!1),n())},[e,n]);return{attemptAction:(0,a.useCallback)(()=>t?(e((0,o.h7)()),d.current||(d.current=new Promise(e=>{c.current=e})),d.current):Promise.resolve(!0),[t,e]),onConfirm:s,onClose:i}},m=e=>{let{id:t,name:n}=e,{dirty:s}=(0,i.u6)(),l=(0,r.T)();return(0,a.useEffect)(()=>(l((0,o.Zu)({id:t,name:n})),()=>{l((0,o.dz)({id:t}))}),[l,t,n]),(0,a.useEffect)(()=>{l((0,o.$p)({id:t,isDirty:s}))},[s,l,t]),null},h=()=>{let{onConfirm:e,onClose:t}=u(),n=(0,r.C)(o.uv);return(0,s.jsx)(l.Z,{isOpen:n,onClose:t,onConfirm:e,isCentered:!0,title:"Unsaved Changes",message:"You have unsaved changes"})}},19310:function(e,t,n){"use strict";var s=n(24246),i=n(64925),a=n.n(i),r=n(27378),o=n(44296),l=n(91650),d=n(79851),c=n(47411);let u=()=>{let{isLoading:e}=(0,d.fd)(),t=(0,o.C)(d.U3),{isLoading:n}=(0,c.MO)(),s=(0,o.C)(c.qb),{isLoading:i}=(0,l.te)();return{dataUses:t,dataSubjects:(0,o.C)(l.ZL),dataCategories:s,isLoading:e||n||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:n,isLoading:i}=u(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=t(e);if(!s)return{};let i=t(o(e,n)),a=!!s.parent_key;return{name:s.name||void 0,primaryName:a&&(null==i?void 0:i.name)!==s.name&&(null==i?void 0:i.name)||void 0}},d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:i,primaryName:a}=l(e,t,n);return i?a?(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("strong",{children:[a,":"]})," ",i]},e):(0,s.jsx)("strong",{children:i},e):e},c=t=>a()(e,{fides_key:t}),m=e=>a()(t,{fides_key:e}),h=e=>a()(n,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>d(e,c,1),getDataUseDisplayNameProps:e=>l(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:m,getDataCategoryDisplayName:e=>d(e,m,2),getDataCategoryDisplayNameProps:e=>l(e,m,2),getDataSubjects:()=>n,getDataSubjectByKey:h,getDataSubjectDisplayName:e=>{let t=h(e);return t?t.name:e},getPrimaryKey:o,isLoading:i}}},98198:function(e,t,n){"use strict";var s=n(24246),i=n(96013);t.Z=e=>{let{title:t,children:n,isOpen:a,onClose:r,...o}=e;return(0,s.jsxs)(i.u_l,{isOpen:a,onClose:r,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...o,children:[(0,s.jsx)(i.ZAr,{}),(0,s.jsxs)(i.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,s.jsx)(i.xBx,{p:0,children:(0,s.jsx)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,s.jsx)(i.X6q,{as:"h3",size:"sm",children:t})})}),(0,s.jsx)(i.fef,{pb:4,overflow:"auto",children:n})]})]})}},53614:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var s=n(24246),i=n(96013),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=i.AntTypography,d=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},d=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,s.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,children:o.title})),d)?o.title=(0,s.jsx)(i.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,s.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,s.jsx)(i.zrq,{items:a,...n})}},22770:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var s=n(24246),i=n(66726),a=n.n(i),r=n(27378),o=n(33312);let l=e=>{let{value:t,onChange:n}=e,[i,l]=(0,r.useState)(t),d=a()(n,500),c=(0,r.useCallback)(e=>{l(e),d(e)},[]);return(0,s.jsx)(o.Z,{search:i,onChange:c,onClear:()=>{l(""),n("")}})}},83543:function(e,t,n){"use strict";n.d(t,{Ak:function(){return h},EY:function(){return c},Ud:function(){return a},Vr:function(){return v},WJ:function(){return o},nP:function(){return d},nS:function(){return u},rs:function(){return l},sX:function(){return m},wi:function(){return r}});var s=n(21618),i=n(36768);let{useGetAggregateMonitorResultsQuery:a,useGetDiscoveredSystemAggregateQuery:r,useGetDiscoveredAssetsQuery:o,useAddMonitorResultSystemsMutation:l,useIgnoreMonitorResultSystemsMutation:d,useAddMonitorResultAssetsMutation:c,useIgnoreMonitorResultAssetsMutation:u,useUpdateAssetsSystemMutation:m,useUpdateAssetsDataUseMutation:h,useUpdateAssetsMutation:v}=s.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:s}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:s,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:s=20,search:i}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:s,search:i,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:s=1,size:i=20,search:a}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:n,page:s,size:i,search:a,diff_status:"addition"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,s=(0,i.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/promote?").concat(s)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,s=(0,i.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(s)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]})})})},89721:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});let s=["essential","functional.service.improve","personalize","analytics","marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"];t.Z=e=>s.includes(e)},74473:function(e,t,n){"use strict";var s=n(24246);n(27378),t.Z=e=>{let{children:t,className:n,...i}=e;return(0,s.jsx)("div",{className:"relative flex w-full flex-wrap items-center gap-2 overflow-x-auto py-2 ".concat(n||""),...i,children:t})}},55827:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});let s=e=>e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")},56048:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(24246),i=n(96013),a=n(34090),r=n(27378),o=n(44296),l=n(34803);let d=(0,i.IUT)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,s.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})});var c=n(39514),u=n(62711);let{Text:m}=i.AntTypography,h=e=>{let{searchText:t,suggestion:n,...i}=e;return t&&n?(0,s.jsxs)(m,{"aria-hidden":!0,style:{pointerEvents:"none",position:"absolute",zIndex:10,top:"var(--ant-line-width)",bottom:"var(--ant-line-width)",left:"var(--ant-padding-sm)",lineHeight:"calc(var(--ant-control-height) - var(--ant-line-width))"},...i,children:[(0,s.jsx)(m,{className:"text-transparent",children:t}),(0,s.jsx)(m,{type:"secondary",children:n.substring(t.length)})]}):null},v="Create new system",g=e=>{let{active:t,disabled:n,onRefreshSuggestions:a}=e,r={bg:t?"complimentary.500":"gray.100"};return(0,s.jsxs)(i.gCW,{children:[(0,s.jsx)(i.LZC,{minHeight:"18px"}),(0,s.jsxs)(i.v2r,{children:[(0,s.jsx)(i.j2t,{as:i.hU,size:"sm",isDisabled:n,icon:(0,s.jsx)(d,{color:t?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:r},...r}),(0,s.jsx)(i.qyq,{children:(0,s.jsx)(i.sNh,{onClick:a,children:(0,s.jsx)(i.xvT,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})};var p=e=>{var t,n;let{label:d,isCreate:m,lockedForGVL:p,options:f,isLoading:x,onVendorSelected:y}=e,j=(0,o.C)(u.bN),[b,C,{setValue:w}]=(0,a.U$)("name"),S=!!(C.touched&&C.error),_={...b,value:null!==(t=b.value)&&void 0!==t?t:""},{touched:k,values:I,setTouched:R,setFieldValue:N,validateForm:T}=(0,a.u6)(),[A,D]=(0,r.useState)(!0),z=null!==(n=f.find(e=>e.value===_.value))&&void 0!==n?n:{label:_.value,value:_.value,description:""},P=(e,t)=>!!(null==t?void 0:t.label.toLowerCase().startsWith(e.toLowerCase())),[q,Z]=(0,r.useState)(""),M=(0,r.useMemo)(()=>f.filter(e=>P(q,e)),[f,q]),E=(0,r.useMemo)(()=>{let e=f;return m&&q&&(e=[...f,{label:"".concat(v,' "').concat(q,'"...'),value:q}]),e},[m,f,q]),L=!!q&&M.length>0,U=p&&!m;(0,r.useEffect)(()=>{D(!_.value&&!I.vendor_id)},[_.value,I.vendor_id,D]),(0,r.useEffect)(()=>{T()},[A,T]);let W=async()=>{Z(""),N("vendor_id",void 0),await w(""),R({...k,vendor_id:!1,name:!1}),y(void 0)},B=async e=>{if(e){let t=f.some(t=>t.value===e.value)?e.value:void 0;N("vendor_id",t),await w(e.label.startsWith(v)?e.value:e.label),R({...k,vendor_id:!0,name:!0}),y(t)}},F=async e=>{_.onBlur(e),q&&await w(q),R({...k,name:!0})},O=async e=>{M.length>0&&q!==M[0].label?(e.preventDefault(),Z(M[0].label),N("vendor_id",M[0].value),await w(M[0].label),y(M[0].value)):(N("vendor_id",void 0),await w(q)),R({...k,name:!0})},V=(0,s.jsx)(i.NIc,{isInvalid:S,isRequired:!0,width:"100%",children:(0,s.jsxs)(i.gCW,{alignItems:"start",position:"relative",width:"100%",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:"vendorName",fontSize:"xs",my:0,mr:1,children:d}),(0,s.jsx)(c.Z,{label:"Enter the system name"})]}),(0,s.jsxs)(i.xuv,{width:"100%",className:"relative",children:[(0,s.jsx)(i.WPr,{id:"vendorName",labelInValue:!0,autoFocus:!0,allowClear:!0,options:E,loading:x,filterOption:(e,t)=>P(e,t)||!!(null==t?void 0:t.label.startsWith(v)),optionFilterProp:"label",value:z,placeholder:"Enter system name...",disabled:U,onChange:B,onSearch:Z,onClear:W,onBlur:F,onInputKeyDown:e=>{q&&"Tab"===e.key&&O(e)},status:S?"error":void 0,"data-testid":"vendor-name-select"}),(0,s.jsx)(h,{searchText:q,suggestion:M.length?M[0].label:""})]}),(0,s.jsx)(l.Bc,{isInvalid:S,message:C.error,fieldName:"name"})]})});return(0,s.jsxs)(i.Ugi,{alignItems:"flex-start",width:"full",children:[A?V:(0,s.jsx)(l.j0,{autoFocus:!0,id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:U,isRequired:!0,inputRightElement:U?null:(0,s.jsx)(i.PZ7,{onClick:W,size:"sm","data-testid":"clear-btn"})}),(0,s.jsx)(g,{active:!!I.vendor_id||L,disabled:!I.vendor_id||"showing"===j,onRefreshSuggestions:()=>y(I.vendor_id)})]})}},43894:function(e,t,n){"use strict";n.d(t,{Sv:function(){return v},Yb:function(){return h},dQ:function(){return g},lm:function(){return p}});var s=n(24246),i=n(96013),a=n(34090),r=n(27378),o=n(44296),l=n(34803),d=n(39514),c=n(96878),u=n(62711);let m=(e,t,n)=>{var s,i;let[l,d,{setValue:m,setTouched:h}]=(0,a.U$)({name:e,type:n||void 0}),v=!!(d.touched&&d.error),{error:g}=d,p={...l,value:null!==(s=l.value)&&void 0!==s?s:""},[f,x]=(0,r.useState)(null!==(i=p.value)&&void 0!==i?i:""),{values:y}=(0,a.u6)(),{vendor_id:j}=y,b=(0,o.C)((0,c.$e)(j||"")),C=(0,o.C)(u.bN),w=(0,r.useRef)();return(0,r.useEffect)(()=>{"showing"===C&&x(p.value)},[C,x]),(0,r.useEffect)(()=>{if("showing"===C&&b){let n=t?t(b):b[e];p.value!==n&&(m(n),setTimeout(()=>{var e;h(!0),null===(e=w.current)||void 0===e||e.blur()},300))}},[C,m,b,w.current]),(0,r.useEffect)(()=>{"hiding"===C&&m(f)},[C,m,f]),{field:p,isInvalid:v,isShowingSuggestions:C,error:g,inputRef:w}},h=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:o,name:c,placeholder:u,id:h}=e,{field:v,isInvalid:g,isShowingSuggestions:p,error:f,inputRef:x}=m(c,o);return(0,s.jsx)(i.NIc,{isInvalid:g,isRequired:r,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.kCb,{alignItems:"center",children:[(0,s.jsx)(l.__,{htmlFor:h||c,fontSize:"xs",my:0,mr:1,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(l.oi,{...v,ref:x,isRequired:r,isDisabled:a,"data-testid":"input-".concat(v.name),placeholder:u,isPassword:!1,color:"showing"===p?"complimentary.500":"gray.800"}),(0,s.jsx)(l.Bc,{isInvalid:g,message:f,fieldName:v.name})]})})},v=e=>{let{label:t,tooltip:n,disabled:a,isRequired:r=!1,dictField:o,name:c,id:u}=e,{field:h,isInvalid:v,isShowingSuggestions:g,error:p}=m(c,o);return(0,s.jsx)(i.NIc,{isInvalid:v,isRequired:r,children:(0,s.jsxs)(i.gCW,{alignItems:"start",children:[(0,s.jsxs)(i.kCb,{alignItems:"center",children:[(0,s.jsx)(l.__,{htmlFor:u||c,fontSize:"xs",my:0,mr:1,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.gxH,{...h,size:"sm","data-testid":"input-".concat(h.name),focusBorderColor:"primary.600",color:"showing"===g?"complimentary.500":"gray.800",isDisabled:a}),(0,s.jsx)(l.Bc,{isInvalid:v,message:p,fieldName:h.name})]})})},g=e=>{let{label:t,tooltip:n,dictField:r,name:o,id:c,disabled:u}=e,{field:h,isInvalid:v,error:g}=m(o,r,"checkbox");return(0,s.jsxs)(i.NIc,{isInvalid:v,width:"full",children:[(0,s.jsxs)(i.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:c||o,fontSize:"xs",my:0,mr:0,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.Ugi,{children:(0,s.jsx)(a.gN,{name:h.name,children:e=>{let{form:{setFieldValue:t}}=e;return(0,s.jsx)(i.rAg,{checked:h.checked,onChange:e=>{t(h.name,e)},disabled:u,className:"mr-2","data-testid":"input-".concat(h.name),size:"small"})}})})]}),(0,s.jsx)(l.Bc,{isInvalid:v,message:g,fieldName:h.name})]})},p=e=>{let{label:t,tooltip:n,dictField:r,name:o,id:c,disabled:u}=e,{field:h,isInvalid:v,error:g,isShowingSuggestions:p}=m(o,r,"numeric"),{setFieldValue:f}=(0,a.u6)();return(0,s.jsxs)(i.NIc,{isInvalid:v,width:"full",children:[(0,s.jsxs)(i.xuv,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsxs)(i.Ugi,{spacing:1,children:[(0,s.jsx)(l.__,{htmlFor:c||o,fontSize:"xs",my:0,mr:0,children:t}),n?(0,s.jsx)(d.Z,{label:n}):null]}),(0,s.jsx)(i.Ugi,{children:(0,s.jsxs)(i.Y2U,{value:h.value,name:h.name,size:"xs",onBlur:h.onBlur,onChange:e=>{f(h.name,e)},w:"100%",colorScheme:"terracotta",inputMode:"numeric","data-testid":"input-".concat(h.name),color:"showing"===p?"complimentary.500":"gray.800",focusBorderColor:"primary.600",isDisabled:u,children:[(0,s.jsx)(i.zuI,{}),(0,s.jsxs)(i.FiK,{children:[(0,s.jsx)(i.WQu,{}),(0,s.jsx)(i.Y_d,{})]})]})})]}),(0,s.jsx)(l.Bc,{isInvalid:v,message:g,fieldName:h.name})]})}},95103:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return es}});var s=n(24246),i=n(86677),a=n(27378),r=n(65464),o=n(87162),l=n(37541),d=n(59003),c=n(92222),u=n(96013),m=n(83766),h=n.n(m),v=n(60136),g=n(53359),p=n(8540),f=n(83543),x=n(98198),y=n(74588),j=n(19310),b=n(89721),C=e=>{let{selectedTaxonomies:t,...n}=e,{getDataUseDisplayNameProps:i,getDataUses:a}=(0,j.Z)(),r=a().filter(e=>e.active&&b.g.includes(e.fides_key)).filter(e=>!t.includes(e.fides_key)).map(e=>{let{name:t,primaryName:n}=i(e.fides_key);return{value:e.fides_key,name:t,primaryName:n,description:e.description||""}});return(0,s.jsx)(y.l,{options:r,...n})};let{Text:w}=u.AntTypography;var S=e=>{let{onSave:t,isSaving:n,onClose:i,...r}=e,[o,l]=(0,a.useState)([]),d=()=>{l([]),i()};return(0,s.jsxs)(x.Z,{title:"Add consent category",...r,onClose:d,children:[(0,s.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)(w,{children:"Assign consent categories to selected assets. This configures the system for consent management. Consent categories apply to both individual assets and the system."}),(0,s.jsx)(C,{mode:"tags",selectedTaxonomies:o,onSelect:(e,t)=>l([...o,t.value]),variant:"outlined"})]}),(0,s.jsxs)(u.jqI,{justify:"space-between",children:[(0,s.jsx)(u.wpx,{htmlType:"reset",onClick:d,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:!o.length,loading:n,onClick:()=>t(o),"data-testid":"save-btn",children:"Save"})]})]})},_=n(22770),k=n(31374);let I=e=>{let{children:t,className:n,style:i,...a}=e;return(0,s.jsx)(u.wpx,{...a,type:"text",className:"w-full justify-start ".concat(n),style:{fontWeight:600,padding:"var(--ant-select-option-padding)",backgroundColor:"var(--ant-select-option-selected-bg)",...i},children:t})};var R=n(36768);let N=(e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I,{onClick:t,"data-testid":"add-new-system",id:"add-new-system",children:"Add new system +"}),e]}),T=e=>{var t;let{onAddSystem:n,...i}=e,[r,o]=(0,a.useState)(),{data:l,isFetching:d}=(0,k.xF)({page:1,size:25,search:r||void 0}),c=null==l?void 0:null===(t=l.items)||void 0===t?void 0:t.map(e=>({value:e.fides_key,label:e.name})),m=(0,a.useCallback)(e=>{(null==e?void 0:e.length)>1&&o(e),(null==e?void 0:e.length)===0&&o(void 0)},[o]),h=(0,a.useMemo)(()=>(0,R.Ds)(m,300),[m]);return(0,s.jsx)(u.WPr,{placeholder:"Search...","aria-label":"Search for a system to select",dropdownStyle:{minWidth:"500px"},dropdownRender:n?e=>N(e,n):void 0,"data-testid":"system-select",...i,filterOption:!1,options:c,onSearch:h,loading:i.loading||d})};var A=n(34090),D=n(59389),z=n(44296),P=n(11596),q=n(78973),Z=n(34803),M=n(73269),E=n(55827),L=n(96878),U=n(62711),W=n(43894),B=n(56048);let{Text:F}=u.AntTypography,O={name:"",vendor_id:void 0,description:"",tags:[]},V=e=>{let{onSuccessfulSubmit:t,toastOnSuccess:n,...i}=e,[r,o]=(0,a.useState)(!1),l=(0,z.T)(),{tcf:d,dictionaryService:c}=(0,P.hz)(),{isLoading:m}=(0,L.Rd)(void 0,{skip:!c}),h=(0,z.C)(L.o),p=(0,z.C)(U.gU),[f]=(0,k.in)(),[y]=(0,L.Qk)(),[j]=(0,k.f7)(),{successAlert:b,errorAlert:C}=(0,g.V)(),{setSuggestions:w,setLockedForGVL:S}=U.dictSuggestionsSlice.actions,_=(0,a.useRef)(null),I=(0,a.useMemo)(()=>D.Ry().shape({name:D.Z_().required().label("System name").test("is-unique","",async(e,t)=>{let{data:n}=await f({page:1,size:10,search:e});return!((null==n?void 0:n.items)||[]).filter(t=>t.name===e).some(t=>t.name===e)||t.createError({message:'You already have a system called "'.concat(e,'". Please specify a unique name for this system.')})})}),[f]),R=e=>{if(c){if(!e){l(w("hiding")),l(S(!1));return}l(w("showing")),d&&(0,v.cj)(e)===v.c6.GVL?l(S(!0)):l(S(!1))}},N=()=>{i.onClose(),l(w("initial")),l(S(!1))},T=async e=>{if(o(!0),e.vendor_id){let s=await y([e.vendor_id]);if((0,v.D4)(s))C((0,v.e$)(s.error));else{let{data:e}=s,i=e.systems[0];null==t||t(i.fides_key,i.name),n&&b("".concat(e.name," has been added to your system inventory."))}}else{let s={...e,fides_key:(0,E.E)(e.name),system_type:"",body:"",privacy_declarations:[]},i=await j(s);if((0,v.D4)(i))C((0,v.e$)(i.error));else{let{fides_key:s,name:a}=i.data;null==t||t(s,a),n&&b("".concat(e.name," has been added to your system inventory."))}N()}o(!1)};return(0,s.jsx)(x.Z,{title:"Add New System",...i,onClose:N,children:(0,s.jsx)(A.J9,{initialValues:O,onSubmit:T,validationSchema:I,innerRef:_,children:e=>{let{dirty:t,isValid:n}=e;return(0,s.jsxs)(A.l0,{children:[(0,s.jsx)(M.Gt,{id:"new-system-modal",name:"Add New System"}),(0,s.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)(F,{children:"Fides will add this system to your inventory and configure it for consent using the categories of consent listed below. Optionally, you can check if this system is listed within the Fides compass library by selecting the compass icon below."}),c?(0,s.jsx)(B.Z,{label:"System name",options:h,onVendorSelected:R,isCreate:!0,lockedForGVL:p,isLoading:m}):(0,s.jsx)(Z.j0,{id:"name",name:"name",label:"System name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. “Email Data Warehouse”",variant:"stacked",isRequired:!0}),(0,s.jsx)(W.Sv,{id:"description",name:"description",label:"Description",tooltip:"What services does this system perform?",disabled:p}),(0,s.jsx)(q.d,{mode:"tags",id:"tags",name:"tags",label:"System Tags",options:[],layout:"stacked",tooltip:"Are there any tags to associate with this system?",disabled:p})]}),(0,s.jsxs)(u.jqI,{justify:"space-between",children:[(0,s.jsx)(u.wpx,{htmlType:"reset",onClick:N,disabled:m||!t||!n,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:m||!t||!n,loading:r,"data-testid":"save-btn",children:"Save"})]})]})}})})},{Text:$}=u.AntTypography,H=e=>{let{onSave:t,isSaving:n,...i}=e,[r,o]=(0,a.useState)(),[l,d]=(0,a.useState)(!1),c=(0,a.useCallback)(e=>{e.preventDefault(),d(!0)},[]),m=()=>{d(!1)},h=()=>{o(void 0),i.onClose()};return(0,s.jsxs)(x.Z,{title:"Assign system",...i,onClose:h,children:[(0,s.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,s.jsx)($,{children:"Assign a system to the selected assets. If no system exists, select 'Add new system' to create one."}),(0,s.jsx)(T,{placeholder:"Search or select...",onSelect:(e,t)=>{o(t)},onAddSystem:c,value:r})]})," ",(0,s.jsxs)(u.jqI,{justify:"space-between",children:[(0,s.jsx)(u.wpx,{htmlType:"reset",onClick:h,"data-testid":"cancel-btn",children:"Cancel"}),(0,s.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:!r,loading:n,onClick:()=>{t(r)},"data-testid":"save-btn",children:"Save"})]}),l&&(0,s.jsx)(V,{isOpen:!0,onClose:m,onSuccessfulSubmit:(e,t)=>{m(),o({label:t,value:e})},toastOnSuccess:!0})]})};var G=n(74473),Y=n(43073),K=e=>{var t;let{asset:n}=e,[i,r]=(0,a.useState)(!1),[o]=(0,f.Ak)(),{successAlert:l,errorAlert:d}=(0,g.V)(),{getDataUseDisplayName:c}=(0,j.Z)(),m=async e=>{let t=n.data_uses||[],s=await o({monitorId:n.monitor_config_id,urnList:[n.urn],dataUses:[...t,e]});(0,Y.D4)(s)?d((0,v.e$)(s.error)):l("Consent category added to ".concat(n.resource_type,' "').concat(n.name,'" .'),"Confirmed"),r(!1)},h=async e=>{let t=n.data_uses||[],s=await o({monitorId:n.monitor_config_id,urnList:[n.urn],dataUses:t.filter(t=>t!==e)});(0,Y.D4)(s)?d((0,v.e$)(s.error)):l("Consent category removed from ".concat(n.resource_type,' "').concat(n.name,'".'),"Confirmed")},p=null===(t=n.data_uses)||void 0===t?void 0:t.filter(e=>(0,b.Z)(e));return(0,s.jsxs)(G.Z,{children:[!i&&(0,s.jsxs)(s.Fragment,{children:[null==p?void 0:p.map(e=>(0,s.jsx)(u.j8w,{"data-testid":"data-use-".concat(e),color:"white",closable:!0,onClose:()=>h(e),closeButtonLabel:"Remove data use",children:c(e)},e)),(0,s.jsx)(u.j8w,{onClick:()=>r(!0),"data-testid":"taxonomy-add-btn",addable:!0,"aria-label":"Add data use"})]}),i&&(0,s.jsx)(u.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,s.jsx)(C,{selectedTaxonomies:p||[],onSelect:m,onBlur:()=>r(!1),open:!0})})]})};let X=e=>{let{asset:t}=e,[n,{isLoading:i}]=(0,f.EY)(),[a,{isLoading:r}]=(0,f.nS)(),{successAlert:o,errorAlert:l}=(0,g.V)(),d=i||r,{urn:c,name:m,resource_type:h}=t,p=async()=>{let e=await n({urnList:[c]});(0,v.D4)(e)?l((0,v.e$)(e.error)):o("".concat(h,' "').concat(m,'" has been added to the system inventory.'),"Confirmed")},x=async()=>{let e=await a({urnList:[c]});(0,v.D4)(e)?l((0,v.e$)(e.error)):o("".concat(h,' "').concat(m,'" has been ignored and will not appear in future scans.'),"Ignored")};return(0,s.jsxs)(u.vyj,{children:[(0,s.jsx)(u.esZ,{title:t.system?void 0:"This asset requires a system before you can add it to the inventory.",children:(0,s.jsx)(u.wpx,{"data-testid":"add-btn",size:"small",onClick:p,disabled:!t.system||d,loading:i,children:"Add"})}),(0,s.jsx)(u.wpx,{"data-testid":"ignore-btn",size:"small",onClick:x,disabled:d,loading:r,children:"Ignore"})]})};var J=n(71533),Q=n(6111);let ee=e=>{let{aggregateSystem:t,monitorConfigId:n}=e,{resource_type:i,name:r,urn:o,system:l}=t,[d,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[p,{isLoading:f}]=(0,Q.NA)(),{successAlert:x,errorAlert:y}=(0,g.V)(),j=(0,a.useCallback)(e=>{e.preventDefault(),h(!0)},[]),b=async(e,t,s)=>{let a=await p({staged_resource_urn:o,monitor_config_id:n,system_key:e});(0,v.D4)(a)?y((0,v.e$)(a.error)):x(s?"".concat(t," has been added to your system inventory and the ").concat(i,' "').concat(r,'" has been assigned to that system.'):"".concat(i,' "').concat(r,'" has been assigned to ').concat(t,"."),"Confirmed"),c(!1)};return(0,s.jsxs)(s.Fragment,{children:[!d&&(0,s.jsx)("div",{style:(0,J.J9)(),children:l?(0,s.jsxs)(u.j8w,{onClick:()=>c(!0),"data-testid":"system-badge",children:[l,(0,s.jsx)(u.PJP.I8b,{})]}):(0,s.jsx)(u.j8w,{onClick:()=>c(!0),"data-testid":"add-system-btn",addable:!0})}),!!d&&(0,s.jsx)(T,{variant:"borderless",className:"w-full",autoFocus:!0,defaultOpen:!0,onBlur:e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.getAttribute("id"))!=="add-new-system"&&c(!1)},onAddSystem:j,onSelect:(e,t)=>b(e,t.label),loading:f}),m&&(0,s.jsx)(V,{isOpen:!0,onClose:()=>{h(!1)},onSuccessfulSubmit:(e,t)=>b(e,t,!0)})]})},et=()=>{let e=(0,c.Cl)();return{columns:[e.display({id:"select",cell:e=>{let{row:t}=e;return(0,s.jsx)(p.k,{isChecked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),dataTestId:"select-".concat(t.original.name||t.id)})},header:e=>{let{table:t}=e;return(0,s.jsx)(p.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40}),e.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(p.G3,{value:e.getValue()}),header:"Asset"}),e.accessor(e=>e.resource_type,{id:"resource_type",cell:e=>(0,s.jsx)(p.G3,{value:e.getValue()}),header:"Type"}),e.accessor(e=>e.system,{id:"system",cell:e=>!!e.row.original.monitor_config_id&&(0,s.jsx)(ee,{aggregateSystem:e.row.original,monitorConfigId:e.row.original.monitor_config_id}),header:"System",meta:{noPadding:!0,width:"auto"}}),e.display({id:"data_use",cell:e=>(0,s.jsx)(K,{asset:e.row.original}),header:"Categories of consent",meta:{width:"auto",disableRowClick:!0}}),e.accessor(e=>e.locations,{id:"locations",cell:e=>(0,s.jsx)(p.G3,{value:e.getValue().length>1?"".concat(e.getValue().length," locations"):e.getValue()[0]}),header:"Locations"}),e.accessor(e=>e.domain,{id:"domain",cell:e=>(0,s.jsx)(p.G3,{value:e.getValue()}),header:"Domain"}),e.display({id:"actions",cell:e=>(0,s.jsx)(X,{asset:e.row.original}),header:"Actions",meta:{width:"auto",disableRowClick:!0}})]}},en=e=>{let{monitorId:t,systemId:n,onSystemName:r}=e,l=(0,i.useRouter)(),[m,x]=(0,a.useState)(n),[y,j]=(0,a.useState)({}),[b,C]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[I,{isLoading:R}]=(0,f.EY)(),[N,{isLoading:T}]=(0,f.nS)(),[A,{isLoading:D}]=(0,f.rs)(),[z,{isLoading:P}]=(0,f.sX)(),[q,{isLoading:Z}]=(0,f.Vr)(),M=R||T||D||P,E=M||n===o.Kl,{PAGE_SIZES:L,pageSize:U,setPageSize:W,onPreviousPageClick:B,isPreviousPageDisabled:F,onNextPageClick:O,isNextPageDisabled:V,startRange:$,endRange:G,pageIndex:Y,setTotalPages:K,resetPageIndexToDefault:X}=(0,p.oi)(),[J,Q]=(0,a.useState)(""),{successAlert:ee,errorAlert:en}=(0,g.V)();(0,a.useEffect)(()=>{X()},[t,J,X]);let{data:es,isLoading:ei,isFetching:ea}=(0,f.WJ)({key:t,system:n,page:Y,size:U,search:J});(0,a.useEffect)(()=>{if(es){var e;let t=(null===(e=es.items[0])||void 0===e?void 0:e.system)||n||"";K(es.pages||1),x(t),null==r||r(t)}},[es,n,r,K]);let{columns:er}=et(),eo=(0,d.b7)({getCoreRowModel:(0,c.sC)(),columns:er,manualPagination:!0,data:(null==es?void 0:es.items)||[],columnResizeMode:"onChange",onRowSelectionChange:j,state:{rowSelection:y}}),el=eo.getSelectedRowModel().rows.map(e=>e.original.urn),ed=async()=>{let e=await I({urnList:el});(0,v.D4)(e)?en((0,v.e$)(e.error)):(eo.resetRowSelection(),ee("".concat(el.length," assets from ").concat(m," have been added to the system inventory."),"Confirmed"))},ec=async e=>{if("string"==typeof(null==e?void 0:e.value)){let n=await z({monitorId:t,urnList:el,systemKey:e.value});(0,v.D4)(n)?en((0,v.e$)(n.error)):(eo.resetRowSelection(),ee("".concat(el.length," assets have been assigned to ").concat(e.label,"."),"Confirmed"))}C(!1)},eu=async e=>{let n=null==es?void 0:es.items.filter(e=>el.includes(e.urn));if(!n)return;let s=n.map(t=>{let n=h()([...t.data_uses||[],...e]);return{urn:t.urn,data_uses:n}}),i=await q({monitorId:t,assets:s});(0,v.D4)(i)?en((0,v.e$)(i.error)):(eo.resetRowSelection(),ee("Consent categories added to ".concat(el.length," assets from ").concat(m,"."),"Confirmed"))},em=async()=>{let e=await N({urnList:el});(0,v.D4)(e)?en((0,v.e$)(e.error)):(eo.resetRowSelection(),ee("".concat(el.length," assets from ").concat(m," have been ignored and will not appear in future scans."),"Confirmed"))},eh=async()=>{let e=(null==es?void 0:es.items.length)||0,s=await A({monitor_config_key:t,resolved_system_ids:[n]});(0,v.D4)(s)?en((0,v.e$)(s.error)):(l.push("".concat(o.vi,"/").concat(t)),ee("".concat(e," assets from ").concat(m," have been added to the system inventory."),"Confirmed"))};return t&&n?ei?(0,s.jsx)(p.I4,{rowHeight:36,numRows:36}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.Q$,{children:[(0,s.jsx)(_.M,{value:J,onChange:Q}),(0,s.jsxs)(u.kCb,{alignItems:"center",children:[!!el.length&&(0,s.jsx)(u.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,"data-testid":"selected-count",children:"".concat(el.length," selected")}),(0,s.jsxs)(u.Ugi,{children:[(0,s.jsxs)(u.v2r,{children:[(0,s.jsx)(u.j2t,{as:u.wpx,icon:(0,s.jsx)(u.PJP._ME,{}),iconPosition:"end",loading:M,"data-testid":"bulk-actions-menu",disabled:!el.length||M,type:"primary",children:"Actions"}),(0,s.jsxs)(u.qyq,{children:[(0,s.jsx)(u.sNh,{fontSize:"small",onClick:ed,"data-testid":"bulk-add",children:"Add"}),(0,s.jsx)(u.sNh,{fontSize:"small",onClick:()=>k(!0),"data-testid":"bulk-add-data-use",children:"Add consent category"}),(0,s.jsx)(u.sNh,{fontSize:"small",onClick:()=>{C(!0)},"data-testid":"bulk-assign-system",children:"Assign system"}),(0,s.jsx)(u.RaW,{}),(0,s.jsx)(u.sNh,{fontSize:"small",onClick:em,"data-testid":"bulk-ignore",children:"Ignore"})]})]}),(0,s.jsx)(u.esZ,{title:E?"These assets require a system before you can add them to the inventory.":void 0,children:(0,s.jsx)(u.wpx,{onClick:eh,disabled:E,loading:D,type:"primary",icon:(0,s.jsx)(u.PJP.MCw,{}),iconPosition:"end","data-testid":"add-all",children:"Add all"})})]})]})]}),(0,s.jsx)(p.ZK,{tableInstance:eo,emptyTableNotice:(0,s.jsx)(u.oj8,{image:u.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,s.jsx)(p.s8,{totalRows:(null==es?void 0:es.items.length)||0,pageSizes:L,setPageSize:W,onPreviousPageClick:B,isPreviousPageDisabled:F||ea,onNextPageClick:O,isNextPageDisabled:V||ea,startRange:$,endRange:G}),(0,s.jsx)(H,{isOpen:b,onClose:()=>{C(!1)},onSave:ec,isSaving:P}),(0,s.jsx)(S,{isOpen:w,onClose:()=>{k(!1)},onSave:eu,isSaving:Z})]}):null};var es=()=>{let e=(0,i.useRouter)(),t=decodeURIComponent(e.query.monitorId),n=decodeURIComponent(e.query.systemId),[d,c]=(0,a.useState)(n===o.Kl?"Uncategorized assets":n);return(0,s.jsxs)(r.Z,{title:"Action center - Discovered assets",children:[(0,s.jsx)(l.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:o.vi},{title:t,href:"".concat(o.vi,"/").concat(t)},{title:n===o.Kl?"Uncategorized assets":d}]}),(0,s.jsx)(en,{monitorId:t,systemId:n,onSystemName:c})]})}},43073:function(e,t,n){"use strict";n.d(t,{Bw:function(){return s.Bw},D4:function(){return s.D4}});var s=n(41164)},55372:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[8033,5559,4554,2866,9278,8540,2888,9774,179],function(){return e(e.s=25654)}),_N_E=e.O()}]);