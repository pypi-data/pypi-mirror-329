(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{45550:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return a(73406)}])},33890:function(e,s,a){"use strict";var t=a(24246),i=a(41748),n=a(53359),o=a(90049),r=a(46042),l=a(35682),c=a(6111);s.Z=e=>{let{resource:s}=e,[a,{isLoading:d}]=(0,c.v8)(),[u,{isLoading:g}]=(0,c.cM)(),[x,{isLoading:I}]=(0,c.vi)(),j=g||I||d,{diff_status:h,child_diff_statuses:C,top_level_field_name:A}=s,{successAlert:f}=(0,n.V)(),L=h===r.LL.CLASSIFICATION_ADDITION||h===r.LL.CLASSIFICATION_UPDATE,_=C&&(C[r.LL.CLASSIFICATION_ADDITION]||C[r.LL.CLASSIFICATION_UPDATE]),m=(L||_)&&!A,T=L||_,S=m&&T,v=async()=>{await u({staged_resource_urn:s.urn}),f('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},p=async()=>{await x({staged_resource_urn:s.urn}),f("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},N=async()=>{await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,classify_monitored_resources:!0}),f("Reclassification of ".concat((0,o.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,t.jsxs)(i.Ugi,{onClick:e=>e.stopPropagation(),gap:2,children:[m&&(0,t.jsx)(l.Z,{title:"Confirm",icon:(0,t.jsx)(i.nQG,{}),onClick:v,disabled:j,loading:g}),T&&(0,t.jsx)(l.Z,{title:"Ignore",icon:(0,t.jsx)(i.tpL,{}),onClick:p,disabled:j,loading:I}),!S&&(0,t.jsx)(l.Z,{title:"Reclassify",icon:(0,t.jsx)(i.nyI,{}),onClick:N,disabled:j,loading:d}),(0,t.jsx)(i.LZC,{}),S&&(0,t.jsxs)(i.v2r,{children:[(0,t.jsx)(i.j2t,{as:i.wpx,size:"small",type:"text",icon:(0,t.jsx)(i.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,t.jsx)(i.qyq,{children:(0,t.jsx)(i.sNh,{onClick:N,icon:(0,t.jsx)(i.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})}},73406:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return O}});var t,i,n=a(24246),o=a(27378),r=a(65464),l=a(37541),c=a(38637),d=a(92222),u=a(59003),g=a(41748),x=a(8540),I=a(98320),j=a(6111),h=a(87573),C=a(62448),A=a(38575),f=a(71329),L=a(22770);(t=i||(i={})).DATASET="Dataset",t.CLASSIFICATION="Classification";var _=a(15025),m=a(51557),T=a(58525),S=e=>(0,T.Z)(e)===m.E.CLASSIFICATION?i.CLASSIFICATION:i.DATASET,v=a(64900),p=a(33890);let N={items:[],total:0,page:1,size:50,pages:1},y=()=>(0,n.jsx)(g.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,n.jsxs)(g.gCW,{children:[(0,n.jsx)(g.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,n.jsx)(g.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),D=(0,d.Cl)();var w=e=>{let{onRowClick:s,statusFilters:a,childsStatusFilters:t}=e,[r,l]=(0,o.useState)(""),{PAGE_SIZES:c,pageSize:m,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R,onNextPageClick:O,isNextPageDisabled:b,startRange:E,endRange:Z,pageIndex:P,setTotalPages:k}=(0,x.oi)(),{isFetching:F,isLoading:M,data:V}=(0,j.z8)({diff_status:a,child_diff_status:t,page:P,size:m,search:r}),{items:z,total:U,pages:G}=(0,o.useMemo)(()=>null!=V?V:N,[V]);(0,o.useEffect)(()=>{k(G)},[G,k]);let W=(0,o.useMemo)(()=>[D.accessor(e=>e.name,{id:"name",cell:e=>(0,n.jsx)(C.Z,{result:e.row.original}),header:e=>(0,n.jsx)(x.Rr,{value:"Name",...e})}),D.accessor(e=>e.urn,{id:"project",cell:e=>(0,n.jsx)(x.G3,{value:(0,_.Z)(e.getValue())}),header:e=>(0,n.jsx)(x.Rr,{value:"Project",...e})}),D.display({id:"status",cell:e=>(0,n.jsx)(A.Z,{result:e.row.original}),header:e=>(0,n.jsx)(x.Rr,{value:"Status",...e})}),D.accessor(e=>e.system,{id:"system",cell:e=>(0,n.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"System",...e})}),D.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,n.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"Detected by",...e})}),D.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,n.jsx)(I.Cy,{time:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"When",...e})}),D.accessor(e=>e,{id:"action",cell:e=>S(e.getValue())===i.DATASET?(0,n.jsx)(v.Z,{resource:e.getValue()}):(0,n.jsx)(p.Z,{resource:e.getValue()}),header:e=>(0,n.jsx)(x.Rr,{value:"Action",...e})})],[]),q=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:f.Z,columns:W,manualPagination:!0,data:z,columnResizeMode:"onChange"});return M?(0,n.jsx)(x.I4,{rowHeight:36,numRows:36}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Q$,{children:(0,n.jsxs)(g.kCb,{gap:6,align:"center",children:[(0,n.jsx)(g.xuv,{flexShrink:0,children:(0,n.jsx)(L.M,{value:r,onChange:l})}),(0,n.jsx)(h.Z,{})]})}),(0,n.jsx)(x.ZK,{tableInstance:q,onRowClick:s,emptyTableNotice:(0,n.jsx)(y,{})}),(0,n.jsx)(x.s8,{totalRows:U||0,pageSizes:c,setPageSize:T,onPreviousPageClick:w,isPreviousPageDisabled:R||F,onNextPageClick:O,isNextPageDisabled:b||F,startRange:E,endRange:Z})]})},R=a(46042),O=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:s}=(0,c.Z)();return(0,n.jsxs)(r.Z,{title:"Data discovery",children:[(0,n.jsx)(l.Z,{heading:"All activity"}),(0,n.jsx)(w,{onRowClick:a=>{if(S(a)===i.DATASET){e({resourceUrn:a.urn});return}s({resourceUrn:a.urn})},statusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[8033,5559,8540,6328,3664,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);