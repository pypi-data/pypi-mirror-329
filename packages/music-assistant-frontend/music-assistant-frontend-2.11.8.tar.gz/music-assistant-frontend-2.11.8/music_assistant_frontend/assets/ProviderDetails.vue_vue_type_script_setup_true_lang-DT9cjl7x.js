import{g as J,p as M,ac as ee,A as te,B as i,ad as ie,N as ae,Q as q,Z as m,S as t,ao as S,U as a,ak as $,aq as ne,x as H,l as oe,w as se,c as L,bj as le,a5 as N,b2 as A,a7 as K,a0 as p,R as y,a9 as d,bk as re,V as Q,W as b,bl as me,aU as ue,al as B,aa as c,aV as x,bm as de,D as ce,G as R,$ as D,a2 as O,a$ as pe,aw as F,a4 as U,bn as ye,bh as fe,bo as ge,bp as he,bq as ve,br as ke,Y as be,a1 as _e,ap as we,aj as Ce}from"./index-BV3Ma8TK.js";import{_ as X}from"./ProviderIcon.vue_vue_type_style_index_0_lang-Bti-afHw.js";import{g as z,M as W,V as $e,c as Ve}from"./MediaItemThumb-BMdjl7ty.js";import{T as Z}from"./Toolbar-Ds4OzJ7I.js";import{M as I,a as Te}from"./marquee_text_sync-N9CsYp5s.js";import{a as P}from"./VBtn-7whCZtnR.js";import{V as xe}from"./VDialog-DZnMJaQg.js";import{c as Ie,b as Le}from"./layout-g-Y_hcwM.js";import{b as Be}from"./VChip-CYBm8SSm.js";import{_ as Re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as De}from"./ListItem-B4qy8E7J.js";import{C as Pe}from"./Container-DjqLzKo_.js";const Se=M({...ae(),...ie(),...Le()},"VLayout"),Ae=J()({name:"VLayout",props:Se(),setup(w,l){let{slots:f}=l;const{layoutClasses:u,layoutStyles:v,getLayoutItem:_,items:C,layoutRef:k}=Ie(w),{dimensionStyles:n}=ee(w);return te(()=>{var g;return i("div",{ref:k,class:[u.value,w.class],style:[n.value,v.value,w.style]},[(g=f.default)==null?void 0:g.call(f)])}),{getLayoutItem:_,items:C}}}),ze=q({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200}},emits:["click","menu"],setup(w,{emit:l}){const f=l;return(u,v)=>(t(),m("div",{style:S(`width: ${u.width}px; height: 30px;`)},[i(P,{variant:"tonal",style:S(`
            width: ${u.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `),onClick:v[0]||(v[0]=_=>f("menu"))},{default:a(()=>[i($,{icon:"mdi-menu-down",size:"xx-large",style:S(`width: 20px; margin-left: ${u.width-42}px`)},null,8,["style"])]),_:1},8,["style"]),i(P,{color:"primary",flat:"",disabled:u.disabled,style:S(`width: ${u.width-40}px; justify-content: left;`),text:u.text,onClick:v[1]||(v[1]=_=>f("click"))},ne({_:2},[u.icon&&u.text.length<12?{name:"prepend",fn:a(()=>[i($,{icon:u.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),He={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center","flex-shrink":"0"}},Ue={key:0},Ne={key:1},je={style:{"min-width":"0"}},Fe=["src"],qe={style:{"padding-bottom":"10px"}},Ee=["onClick"],Ge={style:{color:"accent"}},Ye={style:{color:"accent"}},Ke={style:{color:"primary"}},Oe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},We=["innerHTML"],Qe={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Xe=q({__name:"InfoHeader",props:{item:{}},setup(w){const l=w,f=H(!1),u=H(),{mobile:v}=oe(),_=H([]),C=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,k=new Te,n=ge();se(()=>l.item,async e=>{e?(u.value=z(e,A.FANART)||z(e,A.LANDSCAPE)||z(e,A.THUMB)||C,_.value=await ve([e],e)):(u.value=C,_.value=[])},{immediate:!0});const g=function(e){n.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},V=function(e){n.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},o=function(){var r;if(O.prevRoute){n.back();return}const e=((r=n.currentRoute.value.name)==null?void 0:r.toString())||"";for(const s of["artist","album","track","playlist","radio"])if(e.includes(s)){n.push({name:`${s}s`});return}n.push({name:"home"})},T=function(e=!1){const r=document.getElementById("playbutton");console.log("playButton",r),he(l.item,r.getBoundingClientRect().left,r.getBoundingClientRect().top+36,void 0,e)},E=L(()=>l.item?l.item.metadata&&l.item.metadata.description?l.item.metadata.description:l.item.metadata&&l.item.metadata.copyright?l.item.metadata.copyright:("artists"in l.item&&l.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),j=L(()=>le(E.value)),G=L(()=>{const e=v.value?160:300;return E.value.length>e?j.value.substring(0,e)+"...":j.value}),Y=L(()=>{if(l.item&&l.item.media_type==N.ARTIST)return z(l.item,A.LOGO)});return(e,r)=>(t(),m("div",null,[i(K,{variant:"flat",img:p(C),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:a(()=>[e.item?d("",!0):(t(),y(re,{key:0,indeterminate:""})),i(Q,{width:"100%",height:"100%",cover:"",class:"background-image",src:u.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),i(Z,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":_.value,"enforce-overflow-menu":!0,"show-loading":!0,"icon-action":o},null,8,["menu-items"]),e.item?(t(),y(Ae,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px",display:"flex",width:"100%"}},{default:a(()=>[e.$vuetify.display.mobile?d("",!0):(t(),m("div",He,[e.item.media_type&&e.item.media_type==p(N).ARTIST?(t(),m("div",Ue,[i(me,{size:"210",style:{"margin-bottom":"10%"}},{default:a(()=>[i(W,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(t(),m("div",Ne,[i(W,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),b("div",je,[Y.value?(t(),m("img",{key:0,src:Y.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,Fe)):(t(),y(ue,{key:1},{default:a(()=>[i(I,{sync:p(k)},{default:a(()=>[B(c(e.item.name),1)]),_:1},8,["sync"])]),_:1})),b("div",qe,["version"in e.item&&e.item.version?(t(),y(x,{key:0,class:"caption"},{default:a(()=>[B(c(e.item.version)+" ",1),i($e,{location:"bottom"},{activator:a(({props:s})=>[p(de)(e.item.metadata.explicit||!1)?(t(),y($,ce({key:0},s,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):d("",!0)]),default:a(()=>[b("span",null,c(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):d("",!0),"artists"in e.item&&e.item.artists?(t(),y(x,{key:1,class:"title accent--text d-flex"},{default:a(()=>[i($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),i(I,{sync:p(k)},{default:a(()=>[(t(!0),m(R,null,D(e.item.artists,(s,h)=>(t(),m("span",{key:s.item_id},[b("a",{style:{color:"accent"},onClick:tt=>V(s)},c(s.name),9,Ee),h+1<e.item.artists.length?(t(),m("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"authors"in e.item&&e.item.authors.length>0?(t(),y(x,{key:2,class:"title accent--text d-flex"},{default:a(()=>[i($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-edit"}),i(I,{sync:p(k)},{default:a(()=>[(t(!0),m(R,null,D(e.item.authors,(s,h)=>(t(),m("span",{key:s},[b("span",Ge,c(s),1),h+1<e.item.authors.length?(t(),m("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"narrators"in e.item&&e.item.narrators.length>0?(t(),y(x,{key:3,class:"title accent--text d-flex"},{default:a(()=>[i($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-voice"}),i(I,{sync:p(k)},{default:a(()=>[(t(!0),m(R,null,D(e.item.narrators,(s,h)=>(t(),m("span",{key:s},[b("span",Ye,c(s),1),h+1<e.item.narrators.length?(t(),m("span",{key:h,style:{color:"accent"}},c(" / "))):d("",!0)]))),128))]),_:1},8,["sync"])]),_:1})):d("",!0),"owner"in e.item&&e.item.owner?(t(),y(x,{key:4,class:"title d-flex"},{default:a(()=>[i($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),i(I,{sync:p(k)},{default:a(()=>[b("a",Ke,c(e.item.owner),1)]),_:1},8,["sync"])]),_:1})):d("",!0),"album"in e.item&&e.item.album?(t(),y(x,{key:5,class:"d-flex"},{default:a(()=>[i($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),i(I,{sync:p(k)},{default:a(()=>[b("a",{style:{color:"secondary"},onClick:r[0]||(r[0]=s=>{var h;return g((h=e.item)==null?void 0:h.album)})},c(e.item.album.name),1)]),_:1},8,["sync"])]),_:1})):d("",!0)]),b("div",Oe,[i(ze,{id:"playbutton",width:220,icon:"mdi-play-circle-outline",text:p(pe)(e.$t("play"),14),disabled:!e.item,"open-menu-on-click":!p(O).activePlayer,onClick:T,onMenu:r[1]||(r[1]=s=>T(!0))},null,8,["text","disabled","open-menu-on-click"]),i(P,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[r[2]||(r[2]=s=>p(U).toggleFavorite(e.item)),r[3]||(r[3]=F(()=>{},["prevent"])),r[4]||(r[4]=F(()=>{},["stop"]))]},null,8,["icon","title"]),i(X,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),G.value?(t(),y(x,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:r[5]||(r[5]=s=>f.value=!f.value)},{default:a(()=>[b("div",{innerHTML:G.value},null,8,We)]),_:1})):d("",!0),e.item&&e.item.metadata.genres?(t(),m("div",Qe,[(t(!0),m(R,null,D(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),s=>(t(),y(Be,{key:s,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:a(()=>[B(c(s),1)]),_:2},1024))),128))])):d("",!0)])]),_:1})):d("",!0)]),_:1},8,["img"]),i(xe,{modelValue:f.value,"onUpdate:modelValue":r[7]||(r[7]=s=>f.value=s),"max-width":"975",width:"auto"},{default:a(()=>[i(K,null,{default:a(()=>[i(ye,{innerHTML:j.value},null,8,["innerHTML"]),i(fe,null,{default:a(()=>[i(P,{color:"primary",block:"",onClick:r[6]||(r[6]=s=>f.value=!1)},{default:a(()=>[B(c(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),yt=Re(Xe,[["__scopeId","data-v-c4cb4d33"]]),Ze={style:{"margin-bottom":"10px"}},Je={key:0},Me=["title","onClick"],et=["title"],ft=q({__name:"ProviderDetails",props:{itemDetails:{}},setup(w){const l=H(!1),f=function(n){window.open(n,"_blank")},u=ke({}),v=function(n){const g=`${n.provider_instance}.${n.item_id}`,V=u[g];if(V)V.load(),delete u[g];else{const o=new Audio(_(n.provider_instance,n.item_id));u[g]=o,o.play()}},_=function(n,g){return`${U.baseUrl}/preview?item_id=${encodeURIComponent(g)}&provider=${n}`},C=function(){l.value=!l.value},k=L(()=>[{label:"tooltip.collapse_expand",icon:l.value?"mdi-chevron-up":"mdi-chevron-down",action:C,overflowAllowed:!1}]);return(n,g)=>(t(),m("section",Ze,[i(Z,{title:n.$t("mapped_providers"),"menu-items":k.value,onTitleClicked:C},null,8,["title","menu-items"]),i(be),l.value?(t(),y(Pe,{key:0},{default:a(()=>[i(_e,null,{default:a(()=>{var V;return[(t(!0),m(R,null,D((V=n.itemDetails)==null?void 0:V.provider_mappings,o=>(t(),y(De,{key:o.provider_instance,disabled:!o.available||!p(U).getProvider(o.provider_instance)},{prepend:a(()=>[i(X,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:a(()=>{var T;return[B(c((T=p(U).providerManifests[o.provider_domain])==null?void 0:T.name),1)]}),subtitle:a(()=>[n.itemDetails.media_type==p(N).TRACK&&o.audio_format?(t(),m("span",Je,c(o.audio_format.content_type)+" | "+c(o.audio_format.sample_rate/1e3)+"kHz/"+c(o.audio_format.bit_depth)+" bits | ",1)):d("",!0),o.url&&!o.provider_domain.startsWith("file")?(t(),m("a",{key:1,style:{opacity:"0.4"},title:n.$t("tooltip.open_provider_link"),onClick:F(T=>f(o.url),["prevent"])},c(o.url),9,Me)):(t(),m("span",{key:2,style:{opacity:"0.4"},title:o.item_id},c(o.item_id),9,et))]),append:a(()=>[o.audio_format&&o.audio_format.bit_depth>16?(t(),y(Q,{key:0,src:p(Ve),width:"30",class:we(n.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):d("",!0),p(Ce)("bp1")&&n.itemDetails.media_type==p(N).TRACK?(t(),y(P,{key:1,icon:u[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:n.$t("tooltip.play_sample"),onClick:T=>v(o)},null,8,["icon","title","onClick"])):d("",!0)]),_:2},1032,["disabled"]))),128))]}),_:1})]),_:1})):d("",!0)]))}});export{yt as I,ft as _};
