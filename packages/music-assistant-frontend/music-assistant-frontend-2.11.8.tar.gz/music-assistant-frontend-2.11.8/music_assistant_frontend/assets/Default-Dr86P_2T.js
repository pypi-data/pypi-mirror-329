import{B as oe,L as Ua}from"./ListItem-B4qy8E7J.js";import{_ as Na,s as ge,c as $,a as De,o as We,w as ae,b as tt,C as Fa,u as xe,d as ua,e as xa,g as ye,p as fe,f as _t,h as ot,i as gt,j as Ge,t as te,k as bt,l as wt,m as kt,n as Ya,q as st,r as nt,v as da,x as q,y as Xa,z as Pt,A as he,B as m,D as Z,E as Ga,V as je,F as ja,T as Ka,G as Y,H as at,I as Oe,J as Ct,K as It,L as Za,M as Ja,N as Ae,O as Vt,P as ca,Q as F,R as C,S as d,U as y,W as S,X as pe,Y as Ke,Z as g,$ as se,a0 as e,a1 as Be,a2 as a,a3 as Me,a4 as k,a5 as H,a6 as Gt,a7 as Ze,a8 as ie,a9 as P,aa as I,ab as el,ac as tl,ad as al,ae as ll,af as il,ag as ma,ah as va,ai as pa,aj as j,ak as N,al as U,am as $t,an as Ye,ao as K,ap as lt,aq as mt,ar as vt,as as ze,at as J,au as Ce,av as Ie,aw as re,ax as de,ay as Ve,az as it,aA as ol,aB as sl,aC as ya,aD as nl,aE as rl,aF as fa,aG as ul,aH as ha,aI as dl,aJ as cl,aK as _a,aL as ml,aM as vl,aN as pl,aO as yl,aP as fl,aQ as hl,aR as Xe,aS as _l,aT as gl,aU as Fe,aV as Te,aW as St,aX as rt,aY as jt,aZ as bl,a_ as ga,a$ as ba,b0 as wl,b1 as kl,b2 as Kt,b3 as ut,b4 as wa,b5 as Pl,b6 as Cl,b7 as Il}from"./index-BV3Ma8TK.js";import{D as Vl}from"./constants-BXWEQHoz.js";import{u as Qt,m as Tt,a as $l,c as Sl,b as Ql}from"./layout-g-Y_hcwM.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Re,i as Je,a as pt,_ as ka,g as Zt}from"./MediaItemThumb-BMdjl7ty.js";import{_ as dt}from"./ProviderIcon.vue_vue_type_style_index_0_lang-Bti-afHw.js";import{T as Tl,V as yt}from"./Toolbar-Ds4OzJ7I.js";import{V as Pa}from"./VDialog-DZnMJaQg.js";import{V as Ml,a as Bl}from"./VInfiniteScroll-Bq7FoQOd.js";import{u as Ca,m as Al,V as El,a as $e,b as Ll,c as ql,d as zl,e as Rl,f as Dl}from"./VBtn-7whCZtnR.js";import{V as Ia}from"./VSlider-B29LcJKu.js";import{M as ve,a as ft}from"./marquee_text_sync-N9CsYp5s.js";import{V as Wl}from"./VToolbar-iur7L6n7.js";import{V as Jt,m as Ol}from"./VChip-CYBm8SSm.js";import{V as Hl}from"./VVirtualScroll-BXITd8mA.js";import{V as Ul}from"./VCheckbox-BxZg0V-m.js";import{V as Nl,a as ea,b as ta,c as aa}from"./VExpansionPanels-Cpu9MvLn.js";import"./VCheckboxBtn-BnQXEx4X.js";const Fl=ue(Na,[["__scopeId","data-v-c0029582"]]),xl=""+new URL("icon-iUF3LVzp.png",import.meta.url).href;function Yl(t){let{rootEl:i,isSticky:s,layoutItemStyles:o}=t;const n=ge(!1),l=ge(0),r=$(()=>{const c=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[c]:De(l.value)}:{top:o.value.top}]});We(()=>{ae(s,c=>{c?window.addEventListener("scroll",u,{passive:!0}):window.removeEventListener("scroll",u)},{immediate:!0})}),tt(()=>{window.removeEventListener("scroll",u)});let v=0;function u(){const c=v>window.scrollY?"up":"down",f=i.value.getBoundingClientRect(),h=parseFloat(o.value.top??0),p=window.scrollY-Math.max(0,l.value-h),_=f.height+Math.max(l.value,h)-window.scrollY-window.innerHeight,b=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;f.height<window.innerHeight-h?(n.value="top",l.value=h):c==="up"&&n.value==="bottom"||c==="down"&&n.value==="top"?(l.value=window.scrollY+f.top-b,n.value=!0):c==="down"&&_<=0?(l.value=0,n.value="bottom"):c==="up"&&p<=0&&(b?n.value!=="top"&&(l.value=-p+b+h,n.value="top"):(l.value=f.top+p,n.value="top")),v=window.scrollY}return{isStuck:n,stickyStyles:r}}const Xl=100,Gl=20;function la(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function ia(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let i=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const o=la(i),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);i+=(n-o)*Math.abs(n),s===t.length-1&&(i*=.5)}return la(i)*1e3}function jl(){const t={};function i(n){Array.from(n.changedTouches).forEach(l=>{(t[l.identifier]??(t[l.identifier]=new Fa(Gl))).push([n.timeStamp,l])})}function s(n){Array.from(n.changedTouches).forEach(l=>{delete t[l.identifier]})}function o(n){var c;const l=(c=t[n])==null?void 0:c.values().reverse();if(!l)throw new Error(`No samples for touch id ${n}`);const r=l[0],v=[],u=[];for(const f of l){if(r[0]-f[0]>Xl)break;v.push({t:f[0],d:f[1].clientX}),u.push({t:f[0],d:f[1].clientY})}return{x:ia(v),y:ia(u),get direction(){const{x:f,y:h}=this,[p,_]=[Math.abs(f),Math.abs(h)];return p>_&&f>=0?"right":p>_&&f<=0?"left":_>p&&h>=0?"down":_>p&&h<=0?"up":Kl()}}}return{addMovement:i,endTouch:s,getVelocity:o}}function Kl(){throw new Error}function Zl(t){let{el:i,isActive:s,isTemporary:o,width:n,touchless:l,position:r}=t;We(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",A,{passive:!0})}),tt(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",A)});const v=$(()=>["left","right"].includes(r.value)),{addMovement:u,endTouch:c,getVelocity:f}=jl();let h=!1;const p=ge(!1),_=ge(0),b=ge(0);let Q;function E(M,B){return(r.value==="left"?M:r.value==="right"?document.documentElement.clientWidth-M:r.value==="top"?M:r.value==="bottom"?document.documentElement.clientHeight-M:qe())-(B?n.value:0)}function L(M){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const R=r.value==="left"?(M-b.value)/n.value:r.value==="right"?(document.documentElement.clientWidth-M-b.value)/n.value:r.value==="top"?(M-b.value)/n.value:r.value==="bottom"?(document.documentElement.clientHeight-M-b.value)/n.value:qe();return B?Math.max(0,Math.min(1,R)):R}function O(M){if(l.value)return;const B=M.changedTouches[0].clientX,R=M.changedTouches[0].clientY,D=25,V=r.value==="left"?B<D:r.value==="right"?B>document.documentElement.clientWidth-D:r.value==="top"?R<D:r.value==="bottom"?R>document.documentElement.clientHeight-D:qe(),w=s.value&&(r.value==="left"?B<n.value:r.value==="right"?B>document.documentElement.clientWidth-n.value:r.value==="top"?R<n.value:r.value==="bottom"?R>document.documentElement.clientHeight-n.value:qe());(V||w||s.value&&o.value)&&(Q=[B,R],b.value=E(v.value?B:R,s.value),_.value=L(v.value?B:R),h=b.value>-20&&b.value<80,c(M),u(M))}function x(M){const B=M.changedTouches[0].clientX,R=M.changedTouches[0].clientY;if(h){if(!M.cancelable){h=!1;return}const V=Math.abs(B-Q[0]),w=Math.abs(R-Q[1]);(v.value?V>w&&V>3:w>V&&w>3)?(p.value=!0,h=!1):(v.value?w:V)>3&&(h=!1)}if(!p.value)return;M.preventDefault(),u(M);const D=L(v.value?B:R,!1);_.value=Math.max(0,Math.min(1,D)),D>1?b.value=E(v.value?B:R,!0):D<0&&(b.value=E(v.value?B:R,!1))}function A(M){if(h=!1,!p.value)return;u(M),p.value=!1;const B=f(M.changedTouches[0].identifier),R=Math.abs(B.x),D=Math.abs(B.y);(v.value?R>D&&R>400:D>R&&D>3)?s.value=B.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||qe()):s.value=_.value>.5}const z=$(()=>p.value?{transform:r.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:r.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:r.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:qe(),transition:"none"}:void 0);return xe(p,()=>{var R,D;const M=((R=i.value)==null?void 0:R.style.transform)??null,B=((D=i.value)==null?void 0:D.style.transition)??null;ua(()=>{var V,w,W,X;(w=i.value)==null||w.style.setProperty("transform",((V=z.value)==null?void 0:V.transform)||"none"),(X=i.value)==null||X.style.setProperty("transition",((W=z.value)==null?void 0:W.transition)||null)}),xa(()=>{var V,w;(V=i.value)==null||V.style.setProperty("transform",M),(w=i.value)==null||w.style.setProperty("transition",B)})}),{isDragging:p,dragProgress:_,dragStyles:z}}function qe(){throw new Error}const Jl=["start","end","left","right","top","bottom"],ei=fe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Jl.includes(t)},sticky:Boolean,...Vt(),...Ae(),...Ja(),...Za({mobile:null}),...It(),...Tt(),...Ct(),...Oe({tag:"nav"}),...at()},"VNavigationDrawer"),Va=ye()({name:"VNavigationDrawer",props:ei(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,i){let{attrs:s,emit:o,slots:n}=i;const{isRtl:l}=_t(),{themeClasses:r}=ot(t),{borderClasses:v}=gt(t),{backgroundColorClasses:u,backgroundColorStyles:c}=Ge(te(t,"color")),{elevationClasses:f}=bt(t),{displayClasses:h,mobile:p}=wt(t),{roundedClasses:_}=kt(t),b=Ya(),Q=st(t,"modelValue",null,ee=>!!ee),{ssrBootStyles:E}=nt(),{scopeId:L}=da(),O=q(),x=ge(!1),{runOpenDelay:A,runCloseDelay:z}=Ga(t,ee=>{x.value=ee}),M=$(()=>t.rail&&t.expandOnHover&&x.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),B=$(()=>Xa(t.location,l.value)),R=$(()=>t.persistent),D=$(()=>!t.permanent&&(p.value||t.temporary)),V=$(()=>t.sticky&&!D.value&&B.value!=="bottom");xe(()=>t.expandOnHover&&t.rail!=null,()=>{ae(x,ee=>o("update:rail",!ee))}),xe(()=>!t.disableResizeWatcher,()=>{ae(D,ee=>!t.permanent&&ca(()=>Q.value=!ee))}),xe(()=>!t.disableRouteWatcher&&!!b,()=>{ae(b.currentRoute,()=>D.value&&(Q.value=!1))}),ae(()=>t.permanent,ee=>{ee&&(Q.value=!0)}),t.modelValue==null&&!D.value&&(Q.value=t.permanent||!p.value);const{isDragging:w,dragProgress:W}=Zl({el:O,isActive:Q,isTemporary:D,width:M,touchless:te(t,"touchless"),position:B}),X=$(()=>{const ee=D.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):M.value;return w.value?ee*W.value:ee}),le=$(()=>["top","bottom"].includes(t.location)?0:M.value),{layoutItemStyles:ne,layoutItemScrimStyles:_e}=Qt({id:t.name,order:$(()=>parseInt(t.order,10)),position:B,layoutSize:X,elementSize:le,active:$(()=>Q.value||w.value),disableTransitions:$(()=>w.value),absolute:$(()=>t.absolute||V.value&&typeof be.value!="string")}),{isStuck:be,stickyStyles:Se}=Yl({rootEl:O,isSticky:V,layoutItemStyles:ne}),we=Ge($(()=>typeof t.scrim=="string"?t.scrim:null)),Qe=$(()=>({...w.value?{opacity:W.value*.2,transition:"none"}:void 0,..._e.value}));return Pt({VList:{bgColor:"transparent"}}),he(()=>{const ee=n.image||t.image;return m(Y,null,[m(t.tag,Z({ref:O,onMouseenter:A,onMouseleave:z,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":x.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":D.value,"v-navigation-drawer--persistent":R.value,"v-navigation-drawer--active":Q.value,"v-navigation-drawer--sticky":V.value},r.value,u.value,v.value,h.value,f.value,_.value,t.class],style:[c.value,ne.value,E.value,Se.value,t.style,["top","bottom"].includes(B.value)?{height:"auto"}:{}]},L,s),{default:()=>{var He,Ue,Ne;return[ee&&m("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?m(ja,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},n.image):m(je,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),n.prepend&&m("div",{class:"v-navigation-drawer__prepend"},[(He=n.prepend)==null?void 0:He.call(n)]),m("div",{class:"v-navigation-drawer__content"},[(Ue=n.default)==null?void 0:Ue.call(n)]),n.append&&m("div",{class:"v-navigation-drawer__append"},[(Ne=n.append)==null?void 0:Ne.call(n)])]}}),m(Ka,{name:"fade-transition"},{default:()=>[D.value&&(w.value||Q.value)&&!!t.scrim&&m("div",Z({class:["v-navigation-drawer__scrim",we.backgroundColorClasses.value],style:[Qe.value,we.backgroundColorStyles.value],onClick:()=>{R.value||(Q.value=!1)}},L),null)]})])}),{isStuck:be}}}),$a=function(){const t=localStorage.getItem("frontend.settings.menu_items"),i=t?t.split(","):Vl,s=[];for(const o of i)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},ti=F({__name:"DrawerNavigation",setup(t){const i=q(!0),s=q(!1),o=$a();return(n,l)=>(d(),C(Va,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=r=>i.value=r),app:"",rail:s.value,width:280},{default:y(()=>[m(pe,{style:{height:"55px"},active:!1},{prepend:y(()=>l[2]||(l[2]=[S("img",{class:"logo_icon",size:"40",src:xl},null,-1)])),title:y(()=>l[3]||(l[3]=[S("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),m(Ke),m(Be,{lines:"one",density:"compact",nav:""},{default:y(()=>[(d(!0),g(Y,null,se(e(o).filter(r=>!r.hidden),r=>(d(),C(pe,{key:r.path,nav:"",density:"compact",height:15,title:n.$t(r.label),"prepend-icon":r.icon,to:r.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),m(oe,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:s.value?"mdi-chevron-right":"mdi-chevron-left",title:n.$t("tooltip.show_menu"),onClick:l[0]||(l[0]=r=>s.value=!s.value)},null,8,["icon","title"])]),_:1},8,["modelValue","rail"]))}}),ai=ue(ti,[["__scopeId","data-v-8c634824"]]),li={class:"media-thumb"},ii={style:{"margin-left":"-10px","padding-right":"5px"}},oi=F({__name:"AddToPlaylistDialog",setup(t){const i=q(!1),s=q([]),o=q([]),n=q(),l=q([]);We(()=>{Me.on("playlistdialog",async f=>{i.value=!0,l.value=f.items,n.value=f.parentItem,await r()}),tt(()=>{Me.off("playlistdialog")})});const r=async function(){s.value=[],o.value=[];const f=await k.getLibraryPlaylists();let h=l.value.length?l.value[0]:void 0;if(h){"provider_mappings"in h||(h=await k.getItem(h.media_type,h.item_id,h.provider));for(const p of f){if(!p.provider_mappings.filter(b=>b.available).length||!p.is_editable||n.value&&n.value.media_type===H.PLAYLIST&&p.item_id===n.value.item_id)continue;const _=k.providers[p.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||h!=null&&h.provider_mappings.filter(b=>b.provider_instance==_.instance_id).length)&&s.value.push(p)}for(const p of Object.values(k.providers))p.supported_features.includes(Gt.PLAYLIST_CREATE)&&p.supported_features.includes(Gt.PLAYLIST_TRACKS_EDIT)&&(p.domain=="builtin"||p.is_streaming_provider||h!=null&&h.provider_mappings.filter(_=>_.provider_instance==p.instance_id).length)&&o.value.push(p.instance_id)}},v=async function(f){if(l.value[0].media_type===H.TRACK)k.addPlaylistTracks(f.item_id,l.value.map(p=>p.uri));else if(l.value[0].media_type===H.ALBUM){var h=await k.getAlbumTracks(l.value[0].item_id,l.value[0].provider);k.addPlaylistTracks(f.item_id,h.map(p=>p.uri))}c(),a.activeAlert={type:el.INFO,message:ie("background_task_added"),persistent:!1}},u=async function(f){const h=prompt(ie("new_playlist_name"));if(!h)return;const p=await k.createPlaylist(h,f);v(p)},c=function(){i.value=!1};return(f,h)=>(d(),C(Pa,{modelValue:i.value,"onUpdate:modelValue":[h[0]||(h[0]=p=>i.value=p),h[1]||(h[1]=p=>{e(a).dialogActive=p})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[m(Ze,null,{default:y(()=>[m(Tl,{icon:"mdi-playlist-plus",title:e(ie)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:c}]},null,8,["title","menu-items"]),m(Ke),h[4]||(h[4]=S("br",null,null,-1)),m(Be,null,{default:y(()=>[(d(!0),g(Y,null,se(s.value,p=>(d(),g("div",{key:p.item_id},[m(pe,{onClick:_=>v(p)},{prepend:y(()=>[S("div",li,[m(Re,{item:p,size:50},null,8,["item"])])]),title:y(()=>[S("div",null,I(p.name),1)]),subtitle:y(()=>[S("div",null,I(p.owner),1)]),append:y(()=>[p.provider_mappings?(d(),C(dt,{key:0,domain:p.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):P("",!0)]),_:2},1032,["onClick"])]))),128)),h[2]||(h[2]=S("div",{style:{height:"30px"}},null,-1)),m(Ke),h[3]||(h[3]=S("div",{style:{height:"30px"}},null,-1)),(d(!0),g(Y,null,se(o.value,p=>(d(),g("div",{key:p},[m(pe,{onClick:_=>u(p)},{prepend:y(()=>[S("div",ii,[m(dt,{domain:e(k).providers[p].domain,size:50},null,8,["domain"])])]),title:y(()=>[S("div",null,I(e(ie)("new_playlist")),1)]),subtitle:y(()=>[S("div",null,I(e(ie)("create_playlist_on",[e(k).providers[p].name])),1)]),append:y(()=>[m(dt,{domain:e(k).providers[p].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),si=ue(oi,[["__scopeId","data-v-dffa18a5"]]),ni=fe({scrollable:Boolean,...Ae(),...al(),...Oe({tag:"main"})},"VMain"),ri=ye()({name:"VMain",props:ni(),setup(t,i){let{slots:s}=i;const{dimensionStyles:o}=tl(t),{mainStyles:n}=$l(),{ssrBootStyles:l}=nt();return he(()=>m(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[n.value,l.value,o.value,t.style]},{default:()=>{var r,v;return[t.scrollable?m("div",{class:"v-main__scroller"},[(r=s.default)==null?void 0:r.call(s)]):(v=s.default)==null?void 0:v.call(s)]}})),{}}}),oa=F({__name:"View",setup(t){return(i,s)=>{const o=il("router-view");return d(),C(ri,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,l,r;return[e(a).navigationMenuStyle=="vertical"&&!e(a).frameless?(d(),C(ai,{key:0})):P("",!0),m(o,null,{default:y(({Component:v})=>[(d(),C(ll(v)))]),_:1}),m(si),m(Fl),m(Ml,{"model-value":e(a).activeAlert!==void 0,color:((n=e(a).activeAlert)==null?void 0:n.type)||"grey",text:(l=e(a).activeAlert)==null?void 0:l.message,"close-on-content-click":"",position:"sticky",timeout:(r=e(a).activeAlert)!=null&&r.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),ui=fe({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Vt(),...Ae(),...pa(),...It(),...Ct(),...Tt({name:"bottom-navigation"}),...Oe({tag:"header"}),...Al({selectedClass:"v-btn--selected"}),...at()},"VBottomNavigation"),di=ye()({name:"VBottomNavigation",props:ui(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=ma(),{borderClasses:n}=gt(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ge(te(t,"bgColor")),{densityClasses:v}=va(t),{elevationClasses:u}=bt(t),{roundedClasses:c}=kt(t),{ssrBootStyles:f}=nt(),h=$(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),p=st(t,"active",t.active),{layoutItemStyles:_}=Qt({id:t.name,order:$(()=>parseInt(t.order,10)),position:$(()=>"bottom"),layoutSize:$(()=>p.value?h.value:0),elementSize:h,active:p,absolute:te(t,"absolute")});return Ca(t,El),Pt({VBtn:{baseColor:te(t,"baseColor"),color:te(t,"color"),density:te(t,"density"),stacked:$(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),he(()=>m(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":p.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},o.value,l.value,n.value,v.value,u.value,c.value,t.class],style:[r.value,_.value,{height:De(h.value)},f.value,t.style]},{default:()=>[s.default&&m("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),ci={class:"menuButton"},mi={class:"menuButton"},vi={class:"menuButton"},pi=F({__name:"BottomNavigation",props:{height:{}},setup(t){const i=$a(),s=q(!1);return(o,n)=>(d(),C(di,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:y(()=>[e(j)("tablet")?(d(!0),g(Y,{key:0},se(e(i),l=>(d(),C($e,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[m(N,{size:"xx-large"},{default:y(()=>[U(I(l.icon),1)]),_:2},1024),S("span",ci,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),g(Y,{key:1},[(d(!0),g(Y,null,se(e(i).filter(l=>!l.isLibraryNode),l=>(d(),C($e,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[m(N,{size:"xx-large"},{default:y(()=>[U(I(l.icon),1)]),_:2},1024),S("span",mi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)),m($t,null,{activator:y(({props:l})=>[m($e,Z(l,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:y(()=>[m(N,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[U("mdi-bookshelf")])),_:1}),S("span",vi,I(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:y(()=>[m(Be,null,{default:y(()=>[(d(!0),g(Y,null,se(e(i).filter(l=>l.isLibraryNode),l=>(d(),C(pe,{key:l.label,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),yi=ue(pi,[["__scopeId","data-v-5c8e33d1"]]),fi={style:{width:"auto"}},hi={key:0,style:{width:"100%"}},_i=["onClick"],gi={key:0,class:"time-text-row"},bi={class:"text-caption time-text-right"},wi=F({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1}},setup(t){const i=q(!1),s=q(!0),o=q(!1),n=q(0),l=q(0),r=$(()=>a.curQueueItem?i.value?`-${Ye(a.curQueueItem.duration-u.value)}`:`${Ye(u.value)}`:"0:00"),v=$(()=>{var b;if(!a.curQueueItem||!a.curQueueItem.duration||((b=a.curQueueItem.media_item)==null?void 0:b.media_type)==H.RADIO)return"";const _=a.curQueueItem.duration;return Ye(_)}),u=$(()=>o.value?(l.value=n.value,n.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),c=$(()=>{var b,Q,E;const _={};return(E=(Q=(b=a.curQueueItem)==null?void 0:b.media_item)==null?void 0:Q.metadata)!=null&&E.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(L=>{_[L.start]=L.name}),_});ae(u,_=>{o.value||(n.value=_)});const f=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&a.activePlayer&&k.playerCommandSeek(a.activePlayer.player_id,Math.round(l.value))},p=function(_){var b,Q,E;if((E=(Q=(b=a.curQueueItem)==null?void 0:b.media_item)==null?void 0:Q.metadata)!=null&&E.chapters){for(const L of a.curQueueItem.media_item.metadata.chapters)if(L.start==_){k.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,L.position.toString());return}}};return(_,b)=>{var Q,E;return d(),g("div",fi,[e(a).activePlayerQueue?(d(),g("div",hi,[m(Ia,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=L=>n.value=L),disabled:!e(a).curQueueItem||!e(a).curQueueItem.media_item||!e(a).curQueueItem.duration||e(a).curQueueItem.media_item.media_type==e(H).RADIO||((Q=e(a).activePlayer)==null?void 0:Q.powered)==!1,style:{width:"100%"},min:0,max:(E=e(a).curQueueItem)==null?void 0:E.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":c.value?"always":!1,ticks:c.value,"tick-size":"4",onTouchstart:b[1]||(b[1]=L=>s.value=!1),onTouchend:b[2]||(b[2]=L=>s.value=!0),onMouseenter:b[3]||(b[3]=L=>s.value=!1),onMouseleave:b[4]||(b[4]=L=>s.value=!0),onStart:f,onEnd:h},{"tick-label":y(({tick:L})=>[_.showLabels&&!s.value&&Object.values(c.value).length<6?(d(),g("a",{key:0,class:"text-caption",onClick:O=>p(L.value)},I(L.label),9,_i)):P("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks"]),_.showLabels?(d(),g("div",gi,[S("div",{class:"text-caption time-text-left",onClick:b[5]||(b[5]=L=>i.value?i.value=!1:i.value=!0)},I(r.value),1),S("div",bi,I(v.value),1)])):P("",!0)])):P("",!0)])}}}),Sa=ue(wi,[["__scopeId","data-v-569ce9b1"]]),ki=F({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(t,{emit:i}){const s=()=>{if(o.value){const l=o.value.offsetWidth,r=o.value.offsetHeight,v=Math.min(l,r);n.value.$el.style.fontSize=`${v}px`}},o=q(),n=q();return We(()=>{s(),window.addEventListener("resize",s)}),tt(()=>{window.removeEventListener("resize",s)}),(l,r)=>(d(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:lt([l.type=="btn"&&!l.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:K({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth}),onClick:r[0]||(r[0]=v=>l.disabled?v.preventDefault():l.$emit("click",v))},[m(yt,{"model-value":l.badge==!0,color:"error",dot:""},{default:y(()=>[l.type==="icon"?(d(),C(N,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[se(l.$slots,(v,u)=>({name:u,fn:y(()=>[vt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):l.type==="btn"?(d(),C(N,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[se(l.$slots,(v,u)=>({name:u,fn:y(()=>[vt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):P("",!0)]),_:3},8,["model-value"])],6))}}),Ee=ue(ki,[["__scopeId","data-v-2c9253ab"]]),Qa=F({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Ee,Z({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(ze)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.repeat_mode==e(J).OFF,null],[i.playerQueue.repeat_mode==e(J).ALL,"primary"],[i.playerQueue.repeat_mode==e(J).ONE,"primary"]]),icon:e(ze)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.repeat_mode==e(J).OFF,"mdi-repeat-off"],[i.playerQueue.repeat_mode==e(J).ALL,"mdi-repeat"],[i.playerQueue.repeat_mode==e(J).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandRepeat(i.playerQueue.queue_id||"",e(ze)(null,[[i.playerQueue.repeat_mode==e(J).OFF,e(J).ONE],[i.playerQueue.repeat_mode==e(J).ALL,e(J).OFF],[i.playerQueue.repeat_mode==e(J).ONE,e(J).ALL]])))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ta=F({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Ee,Z({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(ze)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.shuffle_enabled,"primary",""]]),icon:e(ze)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.shuffle_enabled,"mdi-shuffle"],[i.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandShuffle(i.playerQueue.queue_id,!i.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ma=F({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(t){const i=t,s=$(()=>i.playerQueue?i.playerQueue.items>0:!1),o=$(()=>{var l;return!(!i.player||(l=i.playerQueue)!=null&&l.active||!i.player.current_media)}),n=$(()=>{var l;return((l=i.player)==null?void 0:l.state)==Ce.PLAYING?"mdi-pause":"mdi-play"});return(l,r)=>l.isVisible&&l.player?(d(),C(Ee,Z({key:0},l.icon,{disabled:!s.value&&!o.value,icon:l.iconStyle?`${n.value}-${l.iconStyle}`:n.value,type:"btn",onClick:r[0]||(r[0]=v=>e(k).playerCommandPlayPause(l.player.player_id))}),null,16,["disabled","icon"])):P("",!0)}}),Ba=F({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=$(()=>{var n,l;return!((n=i.playerQueue)!=null&&n.active)||!((l=i.playerQueue)!=null&&l.items)||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(Ie.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Ee,Z({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Aa=F({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=$(()=>{var n;return(n=i.playerQueue)!=null&&n.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(Ie.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Ee,Z({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Pi={key:0,class:"player-controls"},Ci={key:0,class:"player-controls-elements"},Ii={key:1,class:"player-controls-elements"},Vi={key:2},$i={key:3,class:"player-controls-elements"},Si={key:4,class:"player-controls-elements"},sa=F({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(t){return(i,s)=>{var o,n,l,r,v;return i.visibleComponents?(d(),g("div",Pi,[i.visibleComponents&&((o=i.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),g("div",Ci,[m(Ta,{"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):P("",!0),i.visibleComponents&&((n=i.visibleComponents.previous)!=null&&n.isVisible)?(d(),g("div",Ii,[m(Ba,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((l=i.visibleComponents.play)!=null&&l.isVisible)?(d(),g("div",Vi,[m(Ma,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","icon-style":i.visibleComponents.play.withCircle?"circle":"",icon:i.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):P("",!0),i.visibleComponents&&((r=i.visibleComponents.next)!=null&&r.isVisible)?(d(),g("div",$i,[m(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((v=i.visibleComponents.repeat)!=null&&v.isVisible)?(d(),g("div",Si,[m(Qa,{"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):P("",!0)])):P("",!0)}}}),Qi={props:{width:String,height:String,style:String,allowWheel:Boolean},emits:["update:model-value"],setup(t,i){const s=q(!0),o=$(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${t.width}; height:${t.height}; display: inline-grid; ${t.style}`})),n=$(()=>({...o.value,...i}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:r})=>{if(!t.allowWheel)return;const v=n.value.step,u=i.attrs["model-value"],c=r<0?v:-v;i.emit("update:model-value",u+c)}}}};function Ti(t,i,s,o,n,l){return d(),C(Ia,Z(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=r=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=r=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=r=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=r=>o.isThumbHidden=!0),onWheel:re(o.onWheel,["prevent"]),onEnd:i[4]||(i[4]=r=>t.$emit("update:model-value",r))}),mt({_:2},[se(t.$slots,(r,v)=>({name:v,fn:y(()=>[vt(t.$slots,v,{},void 0,!0)])}))]),1040,["onWheel"])}const et=ue(Qi,[["render",Ti],["__scopeId","data-v-af51e13c"]]),Ea=F({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),C(Ee,Z({key:0},s.icon,{disabled:!e(a).activePlayerId||e(a).showFullscreenPlayer&&!e(a).curQueueItem&&!e(a).showQueueItems,icon:"mdi-playlist-play",color:e(ze)((n=s.icon)==null?void 0:n.color,[[e(a).showFullscreenPlayer&&e(a).showQueueItems,"primary",""]]),type:"btn",onClick:i}),null,16,["disabled","color"])):P("",!0)}}}),La=F({__name:"SpeakerBtn",props:{color:{}},setup(t){return(i,s)=>(d(),C(oe,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(a).showPlayersMenu=!0)},{default:y(()=>{var o;return[m(N,{color:i.color?i.color:"",size:24,icon:(o=e(a).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),qa=(t,i)=>{const s=[];(t==null?void 0:t.power_control)!=de&&s.push({label:t.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{k.playerCommandPowerToggle(t.player_id)},icon:"mdi-power"}),((t==null?void 0:t.state)=="playing"||(t==null?void 0:t.state)=="paused")&&s.push({label:"stop_playback",labelArgs:[],action:()=>{k.playerCommandStop(t.player_id)},icon:"mdi-stop"});const o=Object.values(k.players).filter(l=>l.player_id!=t.player_id&&l.available&&l.enabled&&(l.can_group_with.includes(t.provider)||l.can_group_with.includes(t.player_id))&&l.supported_features.includes(Ie.SET_MEMBERS)&&!l.synced_to);t.supported_features.includes(Ie.SET_MEMBERS)&&!t.synced_to&&t.type==Ve.PLAYER&&t.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.playerCommandGroup(t.player_id,l.player_id)}})).sort((l,r)=>{var v;return l.label.toUpperCase()>((v=r.label)==null?void 0:v.toUpperCase())?1:-1})}),i&&s.push({label:i.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{k.queueCommandShuffleToggle(i.queue_id)},icon:i.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),i&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,J.OFF)},selected:i.repeat_mode==J.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,J.ALL)},selected:i.repeat_mode==J.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,J.ONE)},selected:i.repeat_mode==J.ONE}],icon:"mdi-repeat"}),i!=null&&i.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(k.players).filter(l=>l.player_id!=i.queue_id&&l.player_id!=t.player_id&&l.available&&l.enabled&&!l.synced_to).map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.queueCommandTransfer(i.queue_id,l.player_id),a.activePlayerId=l.player_id}})).sort((l,r)=>{var v;return l.label.toUpperCase()>((v=r.label)==null?void 0:v.toUpperCase())?1:-1})}),i!=null&&i.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{k.queueCommandClear(i.queue_id)},icon:"mdi-cancel"});const n=t.source_list.filter(l=>!l.passive||l.id==t.active_source);return t.active_source!=t.player_id&&n.push({id:t.player_id,name:ie("music_assistant_source"),passive:!1,can_play_pause:!0,can_seek:!0,can_next_previous:!0}),!t.synced_to&&n.length>0&&s.push({label:"select_source",labelArgs:[],icon:"mdi-import",subItems:n.map(l=>({label:l.name,labelArgs:[],disabled:l.id==t.active_source,selected:l.id==t.active_source,action:()=>{k.playerCommandGroupSelectSource(t.player_id,l.id)}})).sort((l,r)=>{var v;return l.label.toUpperCase()>((v=r.label)==null?void 0:v.toUpperCase())?1:-1})}),i&&"dont_stop_the_music_enabled"in i&&s.push({label:i.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{k.queueCommandDontStopTheMusicToggle(i.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,it.push(`/settings/editplayer/${t.player_id}`)},icon:"mdi-cog-outline"}),t.type!==Ve.GROUP&&s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,it.push(`/settings/editplayer/${t.player_id}/dsp`)},icon:"mdi-equalizer"}),s},Mt=Symbol.for("vuetify:v-tabs"),Mi=fe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ya(Ll({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ht=ye()({name:"VTab",props:Mi(),setup(t,i){let{slots:s,attrs:o}=i;const{textColorClasses:n,textColorStyles:l}=ol(t,"sliderColor"),r=q(),v=q(),u=$(()=>t.direction==="horizontal"),c=$(()=>{var h,p;return((p=(h=r.value)==null?void 0:h.group)==null?void 0:p.isSelected.value)??!1});function f(h){var _,b;let{value:p}=h;if(p){const Q=(b=(_=r.value)==null?void 0:_.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),E=v.value;if(!Q||!E)return;const L=getComputedStyle(Q).color,O=Q.getBoundingClientRect(),x=E.getBoundingClientRect(),A=u.value?"x":"y",z=u.value?"X":"Y",M=u.value?"right":"bottom",B=u.value?"width":"height",R=O[A],D=x[A],V=R>D?O[M]-x[M]:O[A]-x[A],w=Math.sign(V)>0?u.value?"right":"bottom":Math.sign(V)<0?u.value?"left":"top":"center",X=(Math.abs(V)+(Math.sign(V)<0?O[B]:x[B]))/Math.max(O[B],x[B])||0,le=O[B]/x[B]||0,ne=1.5;nl(E,{backgroundColor:[L,"currentcolor"],transform:[`translate${z}(${V}px) scale${z}(${le})`,`translate${z}(${V/ne}px) scale${z}(${(X-1)/ne+1})`,"none"],transformOrigin:Array(3).fill(w)},{duration:225,easing:rl})}}return he(()=>{const h=$e.filterProps(t);return m($e,Z({symbol:Mt,ref:r,class:["v-tab",t.class],style:t.style,tabindex:c.value?0:-1,role:"tab","aria-selected":String(c.value),active:!1},h,o,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":f}),{...s,default:()=>{var p;return m(Y,null,[((p=s.default)==null?void 0:p.call(s))??t.text,!t.hideSlider&&m("div",{ref:v,class:["v-tab__slider",n.value],style:l.value},null)])}})}),sl({},r)}}),Bi=t=>{const{touchstartX:i,touchendX:s,touchstartY:o,touchendY:n}=t,l=.5,r=16;t.offsetX=s-i,t.offsetY=n-o,Math.abs(t.offsetY)<l*Math.abs(t.offsetX)&&(t.left&&s<i-r&&t.left(t),t.right&&s>i+r&&t.right(t)),Math.abs(t.offsetX)<l*Math.abs(t.offsetY)&&(t.up&&n<o-r&&t.up(t),t.down&&n>o+r&&t.down(t))};function Ai(t,i){var o;const s=t.changedTouches[0];i.touchstartX=s.clientX,i.touchstartY=s.clientY,(o=i.start)==null||o.call(i,{originalEvent:t,...i})}function Ei(t,i){var o;const s=t.changedTouches[0];i.touchendX=s.clientX,i.touchendY=s.clientY,(o=i.end)==null||o.call(i,{originalEvent:t,...i}),Bi(i)}function Li(t,i){var o;const s=t.changedTouches[0];i.touchmoveX=s.clientX,i.touchmoveY=s.clientY,(o=i.move)==null||o.call(i,{originalEvent:t,...i})}function qi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:s=>Ai(s,i),touchend:s=>Ei(s,i),touchmove:s=>Li(s,i)}}function zi(t,i){var v;const s=i.value,o=s!=null&&s.parent?t.parentElement:t,n=(s==null?void 0:s.options)??{passive:!0},l=(v=i.instance)==null?void 0:v.$.uid;if(!o||!l)return;const r=qi(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[l]=r,fa(r).forEach(u=>{o.addEventListener(u,r[u],n)})}function Ri(t,i){var l,r;const s=(l=i.value)!=null&&l.parent?t.parentElement:t,o=(r=i.instance)==null?void 0:r.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];fa(n).forEach(v=>{s.removeEventListener(v,n[v])}),delete s._touchHandlers[o]}const za={mounted:zi,unmounted:Ri},Ra=Symbol.for("vuetify:v-window"),Da=Symbol.for("vuetify:v-window-group"),Wa=fe({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ae(),...Oe(),...at()},"VWindow"),na=ye()({name:"VWindow",directives:{Touch:za},props:Wa(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=ot(t),{isRtl:n}=_t(),{t:l}=ul(),r=Ca(t,Da),v=q(),u=$(()=>n.value?!t.reverse:t.reverse),c=ge(!1),f=$(()=>{const A=t.direction==="vertical"?"y":"x",M=(u.value?!c.value:c.value)?"-reverse":"";return`v-window-${A}${M}-transition`}),h=ge(0),p=q(void 0),_=$(()=>r.items.value.findIndex(A=>r.selected.value.includes(A.id)));ae(_,(A,z)=>{const M=r.items.value.length,B=M-1;M<=2?c.value=A<z:A===B&&z===0?c.value=!0:A===0&&z===B?c.value=!1:c.value=A<z}),cl(Ra,{transition:f,isReversed:c,transitionCount:h,transitionHeight:p,rootRef:v});const b=$(()=>t.continuous||_.value!==0),Q=$(()=>t.continuous||_.value!==r.items.value.length-1);function E(){b.value&&r.prev()}function L(){Q.value&&r.next()}const O=$(()=>{const A=[],z={icon:n.value?t.nextIcon:t.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:r.prev,"aria-label":l("$vuetify.carousel.prev")};A.push(b.value?s.prev?s.prev({props:z}):m($e,z,null):m("div",null,null));const M={icon:n.value?t.prevIcon:t.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:r.next,"aria-label":l("$vuetify.carousel.next")};return A.push(Q.value?s.next?s.next({props:M}):m($e,M,null):m("div",null,null)),A}),x=$(()=>t.touch===!1?t.touch:{...{left:()=>{u.value?E():L()},right:()=>{u.value?L():E()},start:z=>{let{originalEvent:M}=z;M.stopPropagation()}},...t.touch===!0?{}:t.touch});return he(()=>ha(m(t.tag,{ref:v,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},o.value,t.class],style:t.style},{default:()=>{var A,z;return[m("div",{class:"v-window__container",style:{height:p.value}},[(A=s.default)==null?void 0:A.call(s,{group:r}),t.showArrows!==!1&&m("div",{class:"v-window__controls"},[O.value])]),(z=s.additional)==null?void 0:z.call(s,{group:r})]}}),[[dl("touch"),x.value]])),{group:r}}}),Di=fe({...ya(Wa(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Wi=ye()({name:"VTabsWindow",props:Di(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const o=_a(Mt,null),n=st(t,"modelValue"),l=$({get(){var r;return n.value!=null||!o?n.value:(r=o.items.value.find(v=>o.selected.value.includes(v.id)))==null?void 0:r.value},set(r){n.value=r}});return he(()=>{const r=na.filterProps(t);return m(na,Z({_as:"VTabsWindow"},r,{modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),s)}),{}}}),Oa=fe({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ae(),...zl(),...pl()},"VWindowItem"),ra=ye()({name:"VWindowItem",directives:{Touch:za},props:Oa(),emits:{"group:selected":t=>!0},setup(t,i){let{slots:s}=i;const o=_a(Ra),n=ql(t,Da),{isBooted:l}=nt();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=ge(!1),v=$(()=>l.value&&(o.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function u(){!r.value||!o||(r.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function c(){var b;r.value||!o||(r.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=De((b=o.rootRef.value)==null?void 0:b.clientHeight)),o.transitionCount.value+=1)}function f(){u()}function h(b){r.value&&ca(()=>{!v.value||!r.value||!o||(o.transitionHeight.value=De(b.clientHeight))})}const p=$(()=>{const b=o.isReversed.value?t.reverseTransition:t.transition;return v.value?{name:typeof b!="string"?o.transition.value:b,onBeforeEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:c,onAfterLeave:u,onLeaveCancelled:f,onEnter:h}:!1}),{hasContent:_}=ml(t,n.isSelected);return he(()=>m(vl,{transition:p.value,disabled:!l.value},{default:()=>{var b;return[ha(m("div",{class:["v-window-item",n.selectedClass.value,t.class],style:t.style},[_.value&&((b=s.default)==null?void 0:b.call(s))]),[[yl,n.isSelected.value]])]}})),{groupItem:n}}}),Oi=fe({...Oa()},"VTabsWindowItem"),Hi=ye()({name:"VTabsWindowItem",props:Oi(),setup(t,i){let{slots:s}=i;return he(()=>{const o=ra.filterProps(t);return m(ra,Z({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",t.class],style:t.style}),s)}),{}}});function Ui(t){return t?t.map(i=>fl(i)?i:{text:i,value:i}):[]}const Ni=fe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ol({mandatory:"force",selectedClass:"v-tab-item--selected"}),...pa(),...Oe()},"VTabs"),Fi=ye()({name:"VTabs",props:Ni(),emits:{"update:modelValue":t=>!0},setup(t,i){let{attrs:s,slots:o}=i;const n=st(t,"modelValue"),l=$(()=>Ui(t.items)),{densityClasses:r}=va(t),{backgroundColorClasses:v,backgroundColorStyles:u}=Ge(te(t,"bgColor")),{scopeId:c}=da();return Pt({VTab:{color:te(t,"color"),direction:te(t,"direction"),stacked:te(t,"stacked"),fixed:te(t,"fixedTabs"),sliderColor:te(t,"sliderColor"),hideSlider:te(t,"hideSlider")}}),he(()=>{const f=Jt.filterProps(t),h=!!(o.window||t.items.length>0);return m(Y,null,[m(Jt,Z(f,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},r.value,v.value,t.class],style:[{"--v-tabs-height":De(t.height)},u.value,t.style],role:"tablist",symbol:Mt},c,s),{default:()=>{var p;return[((p=o.default)==null?void 0:p.call(o))??l.value.map(_=>{var b;return((b=o.tab)==null?void 0:b.call(o,{item:_}))??m(ht,Z(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var Q;return(Q=o[`tab.${_.value}`])==null?void 0:Q.call(o,{item:_})}:void 0})})]}}),h&&m(Wi,Z({modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,key:"tabs-window"},c),{default:()=>{var p;return[l.value.map(_=>{var b;return((b=o.item)==null?void 0:b.call(o,{item:_}))??m(Hi,{value:_.value},{default:()=>{var Q;return(Q=o[`item.${_.value}`])==null?void 0:Q.call(o,{item:_})}})}),(p=o.window)==null?void 0:p.call(o)]}})])}),{}}}),xi=["onClick"],Yi={class:"main"},Xi={key:0,class:"main-media-details"},Gi={key:0,class:"main-media-details-image"},ji={class:"main-media-details-track-info"},Ki={key:0},Zi={key:0},Ji={key:11,style:{margin:"auto","padding-top":"20px"}},eo={key:1,class:"main-queue-items"},to={class:"queue-items-scroll-box"},ao={class:"media-thumb listitem-media-thumb"},lo={class:"d-flex"},io={style:{"white-space":"nowrap"},class:"pr-1"},oo={key:0},so={key:0,style:{"margin-left":"50px"}},no={key:0,class:"text-caption"},ro={key:2,class:"main-queue-items"},uo={class:"main-media-details-image main-media-details-image-alt"},co={class:"player-bottom"},mo={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},vo={class:"media-controls"},po={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},yo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},fo=F({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(t){const{t:i}=hl(),{name:s}=wt(),o=t,n=new ft,l=q(-1),r=new ft,v=q([]),u=q(""),c=q(0),f=q(!1),h=$(()=>a.activePlayerQueue?v.value.slice(a.activePlayerQueue.current_index):[]),p=$(()=>a.activePlayerQueue?v.value.slice(0,a.activePlayerQueue.current_index):[]),_=$(()=>{switch(s.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),b=$(()=>{switch(s.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),Q=$(()=>Xe.display.height.value>800),E=function(V){a.showFullscreenPlayer=!1,it.push({name:V.media_type,params:{itemId:V.item_id,provider:V.provider}})},L=function(V){a.globalSearchTerm=V,it.push({name:"search"}),a.showFullscreenPlayer=!1},O=function(V,w){var le,ne,_e,be,Se,we,Qe;const W=v.value.indexOf(w),X=[{label:"play_now",labelArgs:[],action:()=>{A(w,"play_now")},icon:"mdi-play-circle-outline",disabled:W===((le=a.activePlayerQueue)==null?void 0:le.current_index)||W===((ne=a.activePlayerQueue)==null?void 0:ne.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{A(w,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:W<=(((_e=a.activePlayerQueue)==null?void 0:_e.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{A(w,"up")},icon:"mdi-arrow-up",disabled:W<=(((be=a.activePlayerQueue)==null?void 0:be.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{A(w,"down")},icon:"mdi-arrow-down",disabled:W<=(((Se=a.activePlayerQueue)==null?void 0:Se.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{A(w,"delete")},icon:"mdi-delete",disabled:W<=(((we=a.activePlayerQueue)==null?void 0:we.index_in_buffer)||0)}];((Qe=w==null?void 0:w.media_item)==null?void 0:Qe.media_type)==H.TRACK&&X.push({label:"show_info",labelArgs:[],action:()=>{E(w.media_item)},icon:"mdi-information-outline",disabled:!1}),Me.emit("contextmenu",{items:X,posX:V.clientX,posY:V.clientY})},x=function(V){a.activePlayer&&Me.emit("contextmenu",{items:qa(a.activePlayer,a.activePlayerQueue),posX:V.clientX,posY:V.clientY})},A=function(V,w){var W,X,le,ne,_e;!V||!a.activePlayerQueue||(w=="play_now"?k.queueCommandPlayIndex((W=a.activePlayerQueue)==null?void 0:W.queue_id,V.queue_item_id):w=="move_next"?k.queueCommandMoveNext((X=a.activePlayerQueue)==null?void 0:X.queue_id,V.queue_item_id):w=="up"?k.queueCommandMoveUp((le=a.activePlayerQueue)==null?void 0:le.queue_id,V.queue_item_id):w=="down"?k.queueCommandMoveDown((ne=a.activePlayerQueue)==null?void 0:ne.queue_id,V.queue_item_id):w=="delete"&&k.queueCommandDelete((_e=a.activePlayerQueue)==null?void 0:_e.queue_id,V.queue_item_id))},z=async function(){f.value=!0,v.value=[],await jt(100),f.value=!1},M=async function({done:V}){var le;if(!a.activePlayerQueue||a.activePlayerQueue.items==0){V("empty");return}if(v.value.length>=((le=a.activePlayerQueue)==null?void 0:le.items)){V("empty");return}const w=v.value.length,W=(a.activePlayerQueue.current_index||0)+50,X=await k.getPlayerQueueItems(a.activePlayerQueue.queue_id,W,w);v.value.push(...X),X.length<50?V("empty"):V("ok")};We(()=>{const V=k.subscribe(_l.QUEUE_ITEMS_UPDATED,w=>{var W;w.object_id==((W=a.activePlayerQueue)==null?void 0:W.queue_id)&&(w.data,z())});tt(V)});const B=async function(V){var X;if(!((X=a.curQueueItem)!=null&&X.media_item))return;if(!a.curQueueItem.media_item.favorite){k.toggleFavorite(a.curQueueItem.media_item);return}let w=a.curQueueItem.media_item;(w.provider!="library"||!("provider_mappings"in w))&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(w.media_type)&&(w=await k.getLibraryItem(w.media_type,w.item_id,w.provider)||w);const W=[];"favorite"in w&&w.favorite&&w.provider=="library"&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(w.media_type)&&W.push({label:"favorites_remove",labelArgs:[],action:()=>{k.removeItemFromFavorites(w.media_type,w.item_id),w.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(w.media_type)&&W.push({label:"add_playlist",labelArgs:[],action:()=>{Me.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Me.emit("contextmenu",{items:W,posX:V.clientX,posY:V.clientY})},R=function(){f.value=!0,jt(100).then(()=>{f.value=!1})},D=function(V,w){k.playMedia(V.uri,bl.PLAY,void 0,w.position.toString())};return ae(()=>a.activePlayerId,V=>{z()},{immediate:!0}),ae(()=>o.colorPalette,V=>{!V.darkColor||!V.lightColor?u.value=Xe.theme.current.value.dark?"#000":"#fff":u.value=Xe.theme.current.value.dark?V.darkColor:V.lightColor}),(V,w)=>(d(),C(Pa,{modelValue:e(a).showFullscreenPlayer,"onUpdate:modelValue":w[12]||(w[12]=W=>e(a).showFullscreenPlayer=W),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[m(Ze,{color:e(gl)(u.value,70,80)},{default:y(()=>{var W,X,le,ne,_e,be,Se,we,Qe,ee,He,Ue,Ne,Bt,At,Et,Lt,qt,zt,Rt,Dt,Wt,Ot,Ht,Ut,Nt,Ft,xt,Yt;return[m(Wl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[m(oe,{icon:"",onClick:w[0]||(w[0]=T=>e(a).showFullscreenPlayer=!1)},{default:y(()=>[m(N,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>{var T;return[(T=e(a).activePlayerQueue)!=null&&T.radio_source.length?(d(),C($t,{key:0,scrim:""},{activator:y(({props:G})=>[m(oe,Z(G,{icon:""}),{default:y(()=>[m(N,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:y(()=>[m(Ze,{title:e(ie)("queue_radio_enabled"),subtitle:e(ie)("queue_radio_based_on")},{text:y(()=>{var G;return[(d(!0),g(Y,null,se((G=e(a).activePlayerQueue)==null?void 0:G.radio_source,ce=>(d(),g("div",{key:ce.uri},[S("a",{onClick:Le=>E(ce)},I(ce.name),9,xi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):P("",!0),Q.value?P("",!0):(d(),C(La,{key:1})),m(oe,{icon:"",onClick:re(x,["stop"])},{default:y(()=>[m(N,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),S("div",Yi,[e(j)("bp7")||!e(a).showQueueItems?(d(),g("div",Xi,[V.$vuetify.display.height>600?(d(),g("div",Gi,[((W=e(a).activePlayer)==null?void 0:W.powered)!=!1&&!((X=e(a).curQueueItem)!=null&&X.image)&&((ne=(le=e(a).activePlayer)==null?void 0:le.current_media)!=null&&ne.image_url)?(d(),C(je,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(a).activePlayer.current_media.image_url},null,8,["src"])):((_e=e(a).activePlayer)==null?void 0:_e.powered)!=!1?(d(),C(Re,{key:1,item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:V.$vuetify.theme.current.dark?e(Je):e(pt)},null,8,["item","fallback"])):(d(),C(je,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:V.$vuetify.theme.current.dark?e(Je):e(pt)},null,8,["src"]))])):P("",!0),S("div",ji,[((be=e(a).activePlayer)==null?void 0:be.powered)==!1?(d(),C(Fe,{key:0,style:K(`font-size: ${_.value};`)},{default:y(()=>{var T;return[U(I((T=e(a).activePlayer)==null?void 0:T.display_name),1)]}),_:1},8,["style"])):(Se=e(a).curQueueItem)!=null&&Se.media_item?(d(),C(Fe,{key:1,style:K(`font-size: ${_.value};cursor:pointer;`),onClick:w[1]||(w[1]=T=>E(e(a).curQueueItem.media_item))},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>[U(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",Ki,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(a).activePlayerQueue&&((Qe=(we=e(a).activePlayer)==null?void 0:we.current_media)!=null&&Qe.title)?(d(),C(Fe,{key:2},{default:y(()=>{var T,G,ce,Le;return[(G=(T=e(a).activePlayer)==null?void 0:T.current_media)!=null&&G.artist?(d(),g("div",Zi,[m(ve,{sync:e(n)},{default:y(()=>{var ke,Pe;return[U(I((Pe=(ke=e(a).activePlayer)==null?void 0:ke.current_media)==null?void 0:Pe.artist),1)]}),_:1},8,["sync"])])):P("",!0),(Le=(ce=e(a).activePlayer)==null?void 0:ce.current_media)!=null&&Le.title?(d(),g("div",{key:1,style:K(`font-size: ${b.value};`)},[m(ve,{sync:e(n)},{default:y(()=>{var ke,Pe;return[U(I((Pe=(ke=e(a).activePlayer)==null?void 0:ke.current_media)==null?void 0:Pe.title),1)]}),_:1},8,["sync"])],4)):P("",!0)]}),_:1})):(d(),C(Fe,{key:3,style:K(`font-size: ${_.value};cursor:pointer;`),onClick:w[2]||(w[2]=T=>e(a).showPlayersMenu=!0)},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>{var T;return[U(I(((T=e(a).activePlayer)==null?void 0:T.display_name)||e(ie)("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((ee=e(a).activePlayer)==null?void 0:ee.powered)==!1?(d(),C(Te,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[U(I(e(ie)("off")),1)]),_:1})):P("",!0),(Ue=(He=e(a).curQueueItem)==null?void 0:He.streamdetails)!=null&&Ue.stream_title&&((Ne=e(a).activePlayer)==null?void 0:Ne.powered)!=!1?(d(),C(Te,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:w[3]||(w[3]=T=>{var G,ce;return L((ce=(G=e(a).curQueueItem)==null?void 0:G.streamdetails)==null?void 0:ce.stream_title)})},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>[U(I(e(a).curQueueItem.streamdetails.stream_title),1)]),_:1},8,["sync"])]),_:1})):P("",!0),(Bt=e(a).curQueueItem)!=null&&Bt.media_item&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&((At=e(a).activePlayer)==null?void 0:At.powered)!=!1?(d(),C(Te,{key:6,style:K(`font-size: ${b.value};cursor:pointer;`),onClick:w[4]||(w[4]=T=>E(e(a).curQueueItem.media_item.album))},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>[U(I(e(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(Et=e(a).curQueueItem)!=null&&Et.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length&&((Lt=e(a).activePlayer)==null?void 0:Lt.powered)!=!1?(d(),C(Te,{key:7,style:K(`font-size: ${b.value};cursor:pointer;`),onClick:w[5]||(w[5]=T=>E(e(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>[U(I(e(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(qt=e(a).curQueueItem)!=null&&qt.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?(d(),C(Te,{key:8,style:K(`font-size: ${b.value};`)},{default:y(()=>[m(ve,{sync:e(n)},{default:y(()=>[U(I(e(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(a).activePlayer&&((zt=e(a).activePlayer)==null?void 0:zt.active_source)!=((Rt=e(a).activePlayer)==null?void 0:Rt.player_id)&&((Dt=e(a).activePlayer)==null?void 0:Dt.powered)!=!1?(d(),C(Te,{key:9},{default:y(()=>[U(I(e(ie)("external_source_active",[e(St)(e(a).activePlayer)])),1)]),_:1})):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0&&((Wt=e(a).activePlayer)==null?void 0:Wt.powered)!=!1?(d(),C(Te,{key:10,style:K(`font-size: ${b.value}`)},{default:y(()=>[U(I(e(ie)("queue_empty")),1)]),_:1},8,["style"])):P("",!0),((Ot=e(a).activePlayer)==null?void 0:Ot.powered)!=!1?(d(),g("div",Ji,[m(ka)])):P("",!0)])])):P("",!0),e(a).showQueueItems?(d(),g("div",eo,[m(Fi,{modelValue:c.value,"onUpdate:modelValue":w[6]||(w[6]=T=>c.value=T),"hide-slider":"",density:"compact",onClick:R},{default:y(()=>[m(ht,{value:0},{default:y(()=>{var T,G;return[U(I(e(ie)("queue"))+" ",1),m(yt,{color:"grey",content:(((T=e(a).activePlayerQueue)==null?void 0:T.items)||0)-(((G=e(a).activePlayerQueue)==null?void 0:G.current_index)||0),inline:""},null,8,["content"])]}),_:1}),m(ht,{value:1},{default:y(()=>{var T;return[U(I(e(ie)("played"))+" ",1),m(yt,{color:"grey",content:(T=e(a).activePlayerQueue)==null?void 0:T.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),S("div",to,[f.value?P("",!0):(d(),C(Bl,{key:0,onLoad:M,"empty-text":"",height:"100%"},{default:y(()=>[m(Hl,{"item-height":70,"max-height":"90%",items:c.value==0?h.value:p.value},{default:y(({item:T,index:G})=>{var ce,Le,ke,Pe,Xt;return[m(Ua,{link:"","show-menu-btn":!0,onClick:re(me=>O(me,T),["stop"]),onMenu:re(me=>O(me,T),["stop"]),onMouseenter:me=>l.value=G,onMouseleave:w[7]||(w[7]=me=>l.value=-1)},{prepend:y(()=>[S("div",ao,[m(Re,{size:"50",item:T},null,8,["item"])])]),title:y(()=>[m(ve,{sync:G==0&&c.value==0?e(n):e(r),disabled:!(G==0&&c.value==0||l.value==G)},{default:y(()=>[U(I(T.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:y(()=>[S("div",lo,[S("span",io,I(e(Ye)(T.duration))+" | ",1),m(ve,{sync:G==0&&c.value==0?e(n):e(r),disabled:!(G==0&&c.value==0||l.value==G)},{default:y(()=>[T.media_item&&"album"in T.media_item&&T.media_item.album?(d(),g("span",oo,I(T.media_item.album.name),1)):P("",!0)]),_:2},1032,["sync","disabled"])])]),_:2},1032,["onClick","onMenu","onMouseenter"]),T.queue_item_id==((ce=e(a).curQueueItem)==null?void 0:ce.queue_item_id)&&((Pe=(ke=(Le=T.media_item)==null?void 0:Le.metadata)==null?void 0:ke.chapters)!=null&&Pe.length)?(d(),g("div",so,[(d(!0),g(Y,null,se((Xt=T.media_item.metadata)==null?void 0:Xt.chapters,me=>(d(),C(pe,{key:me.position,onClick:re(Es=>D(T.media_item,me),["stop"])},{title:y(()=>[S("div",null,I(me.name),1)]),append:y(()=>[me.end?(d(),g("span",no,I(e(Ye)(me.end-me.start)),1)):P("",!0)]),_:2},1032,["onClick"]))),128))])):P("",!0)]}),_:1},8,["items"])]),_:1}))])])):P("",!0),!e(a).showQueueItems&&V.$vuetify.display.height<=600?(d(),g("div",ro,[S("div",uo,[m(Re,{item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):P("",!0)]),S("div",co,[S("div",mo,[m(Sa,{"show-labels":!0})]),S("div",vo,[e(a).activePlayerQueue?(d(),C(Ee,{key:0,disabled:!((Ht=e(a).curQueueItem)!=null&&Ht.media_item),icon:(Nt=(Ut=e(a).curQueueItem)==null?void 0:Ut.media_item)!=null&&Nt.favorite?"mdi-heart":"mdi-heart-outline",title:e(ie)("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:B},null,8,["disabled","icon","title"])):P("",!0),V.$vuetify.display.mdAndUp?(d(),C(Ta,{key:1,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):P("",!0),m(Ba,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),m(Ma,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),m(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),V.$vuetify.display.mdAndUp?(d(),C(Qa,{key:2,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):P("",!0),e(a).activePlayerQueue?(d(),C(Ea,{key:3,class:"media-controls-item","max-height":"30px"})):P("",!0)]),e(a).activePlayer?(d(),g("div",po,[m(et,{width:"100%","is-powered":((Ft=e(a).activePlayer)==null?void 0:Ft.powered)!=!1,disabled:!e(a).activePlayer||!((xt=e(a).activePlayer)!=null&&xt.available),"model-value":Math.round(((Yt=e(a).activePlayer)==null?void 0:Yt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","allow-wheel":!0,"onUpdate:modelValue":w[8]||(w[8]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,T):e(k).playerCommandVolumeSet(e(a).activePlayerId,T)),"onClick:prepend":w[9]||(w[9]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":w[10]||(w[10]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0),Q.value?(d(),g("div",yo,[m($e,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:w[11]||(w[11]=T=>e(a).showPlayersMenu=!0)},{default:y(()=>{var T;return[m(N,{icon:((T=e(a).activePlayer)==null?void 0:T.icon)||"mdi-speaker"},null,8,["icon"]),U(" "+I(e(a).activePlayer?e(rt)(e(a).activePlayer):""),1)]}),_:1})])):P("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),ho=ue(fo,[["__scopeId","data-v-f8f6807f"]]),_o={key:1},go={key:2,class:"icon-thumb"},bo={key:0},wo={key:2},ko={key:3},Po={key:4},Co={key:0,class:"pl-4"},Io={key:0},Vo={key:1},$o={key:2},So={key:3},Qo={key:4,class:"line-clamp-1"},To={key:5,class:"line-clamp-1"},Mo={key:6},Bo={key:7,class:"line-clamp-1"},Ao={key:8,class:"line-clamp-1"},Eo={key:0},Lo=F({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(t){const i=new ft,s=t,o=$(()=>{var n,l;return(l=(n=a.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:l.streamdetails});return(n,l)=>(d(),g(Y,null,[m(pe,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var r,v,u,c,f,h,p,_,b,Q;return[S("div",{class:"media-thumb player-media-thumb",style:K(`cursor: pointer;height: ${e(j)({breakpoint:"phone"})?50:64}px; width: ${e(j)({breakpoint:"phone"})?50:64}px; `),onClick:l[0]||(l[0]=E=>e(a).showFullscreenPlayer=!0)},[((r=e(a).activePlayer)==null?void 0:r.powered)!=!1&&((v=e(a).curQueueItem)!=null&&v.media_item||(u=e(a).curQueueItem)!=null&&u.image)?(d(),C(Re,{key:0,item:((c=e(a).curQueueItem)==null?void 0:c.media_item)||e(a).curQueueItem,fallback:e(Je)},null,8,["item","fallback"])):((f=e(a).activePlayer)==null?void 0:f.powered)!=!1&&((p=(h=e(a).activePlayer)==null?void 0:h.current_media)!=null&&p.image_url)?(d(),g("div",_o,[m(je,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(a).activePlayer.current_media.image_url},null,8,["src"])])):(d(),g("div",go,[m(N,{size:"35",icon:((_=e(a).activePlayer)==null?void 0:_.type)==e(Ve).PLAYER&&((b=e(a).activePlayer)!=null&&b.group_childs.length)?"mdi-speaker-multiple":((Q=e(a).activePlayer)==null?void 0:Q.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var r,v,u,c,f,h;return[S("div",{style:K({cursor:"pointer",color:n.primaryColor})},[((r=e(a).activePlayer)==null?void 0:r.powered)==!1?(d(),g("div",{key:0,onClick:l[1]||(l[1]=p=>e(a).showPlayersMenu=!0)},I((v=e(a).activePlayer)==null?void 0:v.display_name),1)):(u=e(a).curQueueItem)!=null&&u.media_item?(d(),g("div",{key:1,onClick:l[2]||(l[2]=p=>e(a).showFullscreenPlayer=!0)},[m(ve,{sync:e(i)},{default:y(()=>[U(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",bo,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])])):e(a).curQueueItem?(d(),g("div",wo,I(e(a).curQueueItem.name),1)):!e(a).activePlayerQueue&&((f=(c=e(a).activePlayer)==null?void 0:c.current_media)!=null&&f.title)?(d(),g("div",ko,I(e(a).activePlayer.current_media.title),1)):e(a).activePlayer?(d(),g("div",Po,I((h=e(a).activePlayer)==null?void 0:h.display_name),1)):(d(),g("div",{key:5,onClick:l[3]||(l[3]=p=>e(a).showPlayersMenu=!0)},I(n.$t("no_player")),1))],4)]}),append:y(()=>{var r;return[(r=o.value)!=null&&r.audio_format.content_type&&!e(j)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),g("div",Co,[m(ka)])):P("",!0)]}),subtitle:y(()=>{var r;return[S("div",{style:K({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:l[4]||(l[4]=v=>e(a).showFullscreenPlayer=!0)},[m(ve,{sync:e(i)},{default:y(()=>{var v,u,c,f,h,p,_,b,Q,E,L,O,x,A,z;return[((v=e(a).activePlayer)==null?void 0:v.powered)==!1?(d(),g("div",Io,I(n.$t("off")),1)):e(a).curQueueItem&&((u=e(a).curQueueItem.media_item)==null?void 0:u.media_type)==e(H).TRACK&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),g("div",Vo,I(e(ga)(e(a).curQueueItem.media_item.artists))+" • "+I(e(a).curQueueItem.media_item.album.name),1)):(c=e(a).curQueueItem)!=null&&c.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length>0?(d(),g("div",$o,I(e(a).curQueueItem.media_item.artists[0].name),1)):(f=e(a).curQueueItem)!=null&&f.media_item&&"podcast"in e(a).curQueueItem.media_item&&((h=e(a).curQueueItem.media_item.podcast)!=null&&h.name)?(d(),g("div",So,I(e(a).curQueueItem.media_item.podcast.name),1)):(_=(p=e(a).curQueueItem)==null?void 0:p.streamdetails)!=null&&_.stream_title?(d(),g("div",Qo,I((Q=(b=e(a).curQueueItem)==null?void 0:b.streamdetails)==null?void 0:Q.stream_title),1)):(L=(E=e(a).curQueueItem)==null?void 0:E.media_item)!=null&&L.metadata.description?(d(),g("div",To,I(e(ba)(e(a).curQueueItem.media_item.metadata.description,100)),1)):!e(a).activePlayerQueue&&((O=e(a).activePlayer)!=null&&O.active_source)&&((A=(x=e(a).activePlayer)==null?void 0:x.current_media)!=null&&A.artist)?(d(),g("div",Mo,I(e(a).activePlayer.current_media.artist),1)):!e(a).activePlayerQueue&&((z=e(a).activePlayer)!=null&&z.active_source)?(d(),g("div",Bo,I(n.$t("external_source_active",[e(St)(e(a).activePlayer)])),1)):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0?(d(),g("div",Ao,I(n.$t("queue_empty")),1)):P("",!0)]}),_:1},8,["sync"]),e(a).activePlayer&&((r=e(a).activePlayer)==null?void 0:r.powered)!=!1?(d(),g("div",Eo,I(e(rt)(e(a).activePlayer)),1)):P("",!0)],4)]}),_:1}),m(ho,{"show-fullscreen":e(a).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),qo={key:1,class:"text-caption volumecaption"},zo={key:0,class:"text-caption volumecaption"},Ro=F({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},showHeadingRow:{type:Boolean},showVolumeControl:{type:Boolean},allowWheel:{type:Boolean}},setup(t){const i=t,s=q([]),o=q([]),n=q(void 0),l=$(()=>i.player.group_childs.length>0),r=function(u){var f,h;const c=[];for(const p of u.group_childs){const _=(f=k)==null?void 0:f.players[p];_&&_.volume_control!=de&&_&&_.available&&!c.includes(_)&&c.push(_)}if(i.showSyncControls&&u.supported_features.includes(Ie.SET_MEMBERS))for(const p of Object.values((h=k)==null?void 0:h.players))p.player_id!=u.player_id&&(!u.can_group_with.includes(p.player_id)&&!u.can_group_with.includes(p.provider)||p.available&&(p.active_group&&p.active_group!=u.player_id||p.active_source&&p.state==Ce.PLAYING&&![u.player_id,p.player_id].includes(p.active_source)||c.includes(p)||c.push(p)));return c.sort((p,_)=>p.display_name.toUpperCase()>_.display_name.toUpperCase()?1:-1),c},v=async function(u,c){const f=i.player.player_id;c?(o.value.includes(u)&&(o.value=o.value.filter(h=>h!=u)),s.value.includes(u)||s.value.push(u),k.players[f].group_childs.push(u)):(s.value.includes(u)&&(s.value=s.value.filter(h=>h!=u)),o.value.includes(u)||o.value.push(u),k.players[f].group_childs=k.players[f].group_childs.filter(h=>h!=u)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&k.playerCommandUnGroupMany(o.value).catch(async()=>{k.players[f]=await k.getPlayer(f)}).finally(()=>{o.value=[]}),s.value.length>0&&k.playerCommandGroupMany(f,s.value).catch(async()=>{k.players[f]=await k.getPlayer(f)}).finally(()=>{s.value=[]})},1e3)};return(u,c)=>(d(),C(Be,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[u.showHeadingRow?(d(),C(pe,{key:0,class:"volumesliderrow heading",link:!1,style:K(u.player.powered==!1?"opacity: 0.6":"opacity: 1")},{prepend:y(()=>[m(N,{size:25,icon:u.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[S("h5",null,I(e(rt)(u.player,27)),1)]),append:y(()=>[u.player.power_control!=e(de)?(d(),C(oe,{key:0,class:"powerbtn",variant:"icon",onClick:c[0]||(c[0]=re(f=>e(k).playerCommandPowerToggle(u.player.player_id),["stop"]))},{default:y(()=>[m(N,{size:25,icon:"mdi-power"})]),_:1})):P("",!0)]),_:1},8,["style"])):P("",!0),u.showVolumeControl&&(u.player.volume_control!=e(de)||u.player.group_childs.length)?(d(),C(pe,{key:1,class:"volumesliderrow",link:!1,style:K(u.player.powered==!1?"opacity: 0.35":"opacity: 0.75")},{prepend:y(()=>[m(oe,{icon:"",style:{height:"25px"},disabled:u.player.type==e(Ve).GROUP||u.player.group_childs.length>0||u.player.mute_control==e(de),onClick:c[1]||(c[1]=re(f=>e(k).playerCommandMuteToggle(u.player.player_id),["stop"]))},{default:y(()=>[m(N,{size:25,icon:u.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[u.player.volume_control!=e(de)||u.player.group_childs.length?(d(),C(et,{key:0,color:"secondary",width:"100%","is-powered":u.player.powered!=!1,disabled:!u.player.available,"model-value":Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0),onClick:c[2]||(c[2]=re(()=>{},["stop"])),"onUpdate:modelValue":c[3]||(c[3]=f=>u.player.group_childs.length>0?e(k).playerCommandGroupVolume(u.player.player_id,f):e(k).playerCommandVolumeSet(u.player.player_id,f))},null,8,["is-powered","disabled","model-value"])):P("",!0)]),append:y(()=>[l.value&&!u.showSubPlayers?(d(),C(N,{key:0,class:"expandbtn"},{default:y(()=>c[7]||(c[7]=[U(" mdi-chevron-down ")])),_:1})):(d(),g("div",qo,I(Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0)),1))]),_:1},8,["style"])):P("",!0),u.showSubPlayers&&(u.player.group_childs.length>0||u.showSyncControls)&&r(u.player).length>0?(d(),g("div",{key:2,onClick:c[6]||(c[6]=re(()=>{},["stop"]))},[m(Ke,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),g(Y,null,se(r(u.player),f=>(d(),g("div",{key:f.player_id},[m(pe,{class:"volumesliderrow",link:!1,style:K(f.powered!=!1||u.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:c[4]||(c[4]=re(()=>{},["stop"]))},{prepend:y(()=>[m(N,{size:30,icon:f.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[S("h6",null,I(e(ba)(f.display_name,27)),1)]),append:y(()=>[u.showSyncControls?(d(),C(Ul,{key:0,ripple:!1,disabled:f.player_id==u.player.player_id,"model-value":u.player.group_childs.includes(f.player_id)||f.player_id==u.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":h=>v(f.player_id,h)},null,8,["disabled","model-value","onUpdate:modelValue"])):P("",!0)]),_:2},1032,["style"]),f.volume_control!=e(de)?(d(),C(pe,{key:0,class:"volumesliderrow",link:!1,style:K(f.powered==!1?"opacity: 0.4":"opacity: 0.75"),onClick:c[5]||(c[5]=re(()=>{},["stop"]))},{prepend:y(()=>[m(oe,{icon:"",disabled:!f.available||f.mute_control==e(de),style:{height:"25px"},onClick:h=>e(k).playerCommandMuteToggle(f.player_id)},{default:y(()=>[m(N,{size:25,icon:f.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[f.volume_control!=e(de)?(d(),C(et,{key:0,color:"secondary",width:"100%","is-powered":f.powered!=!1,disabled:!f.available,"allow-wheel":u.allowWheel,"model-value":Math.round(f.volume_level||0),"onUpdate:modelValue":h=>e(k).playerCommandVolumeSet(f.player_id,h)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])):P("",!0)]),append:y(()=>[f.volume_control!=e(de)?(d(),g("div",zo,I(f.volume_level),1)):P("",!0)]),_:2},1032,["style"])):P("",!0),c[8]||(c[8]=S("div",{style:{height:"14px"}},null,-1))]))),128))])):P("",!0)]),_:1}))}}),Ha=ue(Ro,[["__scopeId","data-v-a2a4ac06"]]),Do={key:0},Wo={key:0},Oo={class:"text-caption"},Ho={key:1},Uo=F({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(t){const i=t,s=q(!1);return(o,n)=>i.isVisible&&e(a).activePlayer?(d(),g("div",Do,[m($t,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:l})=>{var r,v;return[e(j)("bp6")||!o.responsiveVolumeSize?(d(),g("div",Wo,[m(et,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(a).activePlayer.group_childs.length>0?Math.round(((r=e(a).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((v=e(a).activePlayer)==null?void 0:v.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=u=>{var c,f;return e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(((c=e(a).activePlayer)==null?void 0:c.player_id)||"",u):e(k).playerCommandVolumeSet(((f=e(a).activePlayer)==null?void 0:f.player_id)||"",u)})},{prepend:y(()=>[m(oe,Z({variant:"icon",size:"48",ripple:!1},{...l}),{default:y(()=>{var u,c;return[m(N,{color:i.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),S("div",Oo,I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((c=e(a).activePlayer)==null?void 0:c.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),g("div",Ho,[m(oe,Z({...l},{size:"48",variant:"icon"}),{default:y(()=>{var u,c;return[m(N,{color:i.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),S("div",{class:"text-caption",style:K({color:i.color?o.color:""})},I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((c=e(a).activePlayer)==null?void 0:c.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[m(Ze,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(a).activePlayer?(d(),C(Ha,{key:0,player:e(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):P("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):P("",!0)}}),No=ue(Uo,[["__scopeId","data-v-f4084555"]]),Fo=F({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(t){return(i,s)=>(d(),g(Y,null,[i.player&&i.player.isVisible?(d(),C(La,{key:0,color:i.player.color},null,8,["color"])):P("",!0),i.queue&&i.queue.isVisible?(d(),C(Ea,{key:1,color:i.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):P("",!0),i.volume&&i.volume.isVisible?(d(),C(No,{key:2,color:i.volume.color,"volume-size":i.volume.volumeSize,"responsive-volume-size":i.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):P("",!0)],64))}}),xo=["data-floating"],Yo=["data-mobile"],Xo={class:"mediacontrols-left"},Go={class:"mediacontrols-bottom-center"},jo={class:"mediacontrols-bottom-right"},Ko={key:0,class:"volume-slider"},Zo=F({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(t){kl(l=>({"7138c534":n.value})),ma();const{mobile:i}=wt({mobileBreakpoint:576}),s=q({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=Xe.theme.current.value.dark?Je:pt,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=wl(o)});const n=$(()=>Xe.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return ae(()=>{var l;return(l=a.curQueueItem)==null?void 0:l.queue_item_id},()=>{var l;(l=a.curQueueItem)!=null&&l.media_item?o.src=Zt(a.curQueueItem.media_item,Kt.THUMB)||"":a.curQueueItem?o.src=Zt(a.curQueueItem,Kt.THUMB)||"":o.src=""}),(l,r)=>{var v,u,c,f,h,p,_,b,Q,E,L;return d(),g(Y,null,[S("div",{class:"mediacontrols-bg","data-floating":l.useFloatingPlayer},null,8,xo),S("div",{class:"mediacontrols","data-mobile":e(i)},[S("div",Xo,[m(Lo,{"show-quality-details-btn":!!e(j)("bp8"),"show-only-artist":!e(j)("bp7"),"color-palette":s.value,"primary-color":l.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),S("div",Go,[m(sa,{"visible-components":{repeat:{isVisible:e(j)("bp3")},shuffle:{isVisible:e(j)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:l.useFloatingPlayer},previous:{isVisible:e(j)("bp3")},next:{isVisible:e(j)("bp3")}}},null,8,["visible-components"]),e(j)("bp6")?(d(),C(Sa,{key:0,color:l.$vuetify.theme.current.dark?s.value.lightColor||"#fff":s.value.darkColor||"#000","is-progress-bar":!1,disabled:!((v=e(a).activePlayerQueue)!=null&&v.active)||((f=(c=(u=e(a).activePlayerQueue)==null?void 0:u.current_item)==null?void 0:c.media_item)==null?void 0:f.media_type)!==e(H).TRACK},null,8,["color","disabled"])):P("",!0)]),S("div",jo,[S("div",null,[m(Fo,{queue:{isVisible:e(j)("bp3"),color:l.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:l.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(i)&&(((h=e(a).activePlayer)==null?void 0:h.volume_control)!=e(de)||((p=e(a).activePlayer)==null?void 0:p.group_childs.length)>0),color:l.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),m(sa,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(j)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:l.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Yo),e(i)&&(((_=e(a).activePlayer)==null?void 0:_.volume_control)!=e(de)||((b=e(a).activePlayer)==null?void 0:b.group_childs.length)>0)?(d(),g("div",Ko,[m(et,{width:"100%",color:"secondary","is-powered":((Q=e(a).activePlayer)==null?void 0:Q.powered)!=!1,disabled:!e(a).activePlayer||!((E=e(a).activePlayer)!=null&&E.available),"model-value":Math.round(((L=e(a).activePlayer)==null?void 0:L.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":r[0]||(r[0]=O=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,O):e(k).playerCommandVolumeSet(e(a).activePlayerId,O)),"onClick:prepend":r[1]||(r[1]=O=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":r[2]||(r[2]=O=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0)],64)}}}),Jo=ue(Zo,[["__scopeId","data-v-a149b404"]]),es=fe({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Vt(),...Ae(),...It(),...Tt(),...Ct(),...Oe({tag:"footer"}),...at()},"VFooter"),ts=ye()({name:"VFooter",props:es(),setup(t,i){let{slots:s}=i;const o=q(),{themeClasses:n}=ot(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ge(te(t,"color")),{borderClasses:v}=gt(t),{elevationClasses:u}=bt(t),{roundedClasses:c}=kt(t),f=ge(32),{resizeRef:h}=Rl(_=>{_.length&&(f.value=_[0].target.clientHeight)}),p=$(()=>t.height==="auto"?f.value:parseInt(t.height,10));return xe(()=>t.app,()=>{const _=Qt({id:t.name,order:$(()=>parseInt(t.order,10)),position:$(()=>"bottom"),layoutSize:p,elementSize:$(()=>t.height==="auto"?void 0:p.value),active:$(()=>t.app),absolute:te(t,"absolute")});ua(()=>{o.value=_.layoutItemStyles.value})}),he(()=>m(t.tag,{ref:h,class:["v-footer",n.value,l.value,v.value,u.value,c.value,t.class],style:[r.value,t.app?o.value:{height:De(t.height)},t.style]},s)),{}}}),as=F({__name:"Footer",setup(t){const i=$(()=>a.navigationMenuStyle=="horizontal"),s=$(()=>a.navigationMenuStyle!="horizontal"?0:a.isInStandaloneMode?100:80),o=$(()=>i.value?s.value+5:0);return(n,l)=>(d(),g(Y,null,[i.value?(d(),g("div",{key:0,class:lt(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:K(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(j)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):P("",!0),e(a).navigationMenuStyle=="horizontal"?(d(),C(yi,{key:1,height:s.value},null,8,["height"])):P("",!0),m(ts,{bottom:"",fixed:"",class:lt(`d-flex flex-column ${i.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:K(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[m(Jo,{"use-floating-player":i.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),ls={class:"player-media-thumb"},is={key:1},os={key:2,class:"icon-thumb"},ss={style:{"margin-bottom":"3px"}},ns={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},rs={key:0},us={key:0},ds={key:1},cs={key:2},ms={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},vs={key:0},ps={key:1},ys={key:2},fs={key:3},hs={key:4},_s={key:5},gs={key:6},bs=F({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(t){const i=t,s=$(()=>{if(i.player&&i.player.active_source&&i.player.active_source in k.queues)return k.queues[i.player.active_source];if(i.player&&!i.player.active_source&&i.player.player_id in k.queues)return k.queues[i.player.player_id]}),o=$(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(l){console.log("openPlayerMenu"),Me.emit("contextmenu",{items:qa(i.player,s.value),posX:l.clientX,posY:l.clientY})};return(l,r)=>(d(),C(Ze,{flat:"",class:lt(["panel-item",{"panel-item-selected":l.player.player_id==e(a).activePlayerId,"panel-item-idle":l.player.state==e(Ce).IDLE,"panel-item-off":l.player.powered==!1}]),ripple:!1,disabled:!l.player.available},{default:y(()=>[m(pe,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var v,u,c,f;return[S("div",ls,[l.player.powered!=!1&&((v=o.value)!=null&&v.media_item)||(u=o.value)!=null&&u.image?(d(),C(Re,{key:0,class:"media-thumb",size:"55",item:((c=o.value)==null?void 0:c.media_item)||o.value,fallback:e(Je)},null,8,["item","fallback"])):l.player.powered!=!1&&!s.value&&((f=l.player.current_media)!=null&&f.image_url)?(d(),g("div",is,[m(je,{class:"media-thumb",size:"55",src:l.player.current_media.image_url},null,8,["src"])])):(d(),g("div",os,[m(N,{size:"35",icon:l.player.type==e(Ve).PLAYER&&l.player.group_childs.length?"mdi-speaker-multiple":l.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[S("div",ss,I(e(rt)(l.player,27)),1)]),subtitle:y(()=>{var v,u,c,f,h,p,_;return[l.player.powered!=!1?(d(),g("div",ns,[(v=o.value)!=null&&v.media_item?(d(),g("div",rs,[U(I((u=o.value)==null?void 0:u.media_item.name)+" ",1),"version"in((c=o.value)==null?void 0:c.media_item)&&((f=o.value)!=null&&f.media_item.version)?(d(),g("span",us,"("+I((h=o.value)==null?void 0:h.media_item.version)+")",1)):P("",!0)])):o.value?(d(),g("div",ds,I((p=o.value)==null?void 0:p.name),1)):!s.value&&((_=l.player.current_media)!=null&&_.title)?(d(),g("div",cs,I(l.player.current_media.title),1)):P("",!0)])):P("",!0)]}),default:y(()=>{var v,u,c,f,h,p,_,b,Q,E,L,O,x,A,z,M,B,R,D;return[S("div",ms,[l.player.powered==!1?(d(),g("div",vs,I(l.$t("off")),1)):(v=o.value)!=null&&v.media_item&&((c=(u=o.value)==null?void 0:u.media_item)==null?void 0:c.media_type)==e(H).TRACK&&"album"in((f=o.value)==null?void 0:f.media_item)&&((h=o.value)!=null&&h.media_item.album)?(d(),g("div",ps,I(e(ga)((p=o.value)==null?void 0:p.media_item.artists))+" • "+I((_=o.value)==null?void 0:_.media_item.album.name),1)):(b=o.value)!=null&&b.media_item&&"artists"in((Q=o.value)==null?void 0:Q.media_item)&&((E=o.value)==null?void 0:E.media_item.artists.length)>0?(d(),g("div",ys,I((L=o.value)==null?void 0:L.media_item.artists[0].name),1)):(x=(O=o.value)==null?void 0:O.streamdetails)!=null&&x.stream_title?(d(),g("div",fs,I((z=(A=o.value)==null?void 0:A.streamdetails)==null?void 0:z.stream_title),1)):(B=(M=o.value)==null?void 0:M.media_item)!=null&&B.metadata.description?(d(),g("div",hs,I((R=o.value)==null?void 0:R.media_item.metadata.description),1)):!s.value&&l.player.active_source?(d(),g("div",_s,I(l.$t("external_source_active",[e(St)(l.player)])),1)):((D=s.value)==null?void 0:D.items)==0?(d(),g("div",gs,I(l.$t("queue_empty")),1)):P("",!0)])]}),append:y(()=>{var v;return[l.player.state==e(Ce).PAUSED||l.player.state==e(Ce).PLAYING||(v=s.value)!=null&&v.items?(d(),C(oe,{key:0,variant:"icon",class:"player-command-btn",onClick:r[0]||(r[0]=re(u=>{e(k).playerCommandPlayPause(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[m(N,{size:e(j)({breakpoint:"phone"})?"30":"32",icon:l.player.state==e(Ce).PLAYING?"mdi-pause":"mdi-play"},null,8,["size","icon"])]),_:1})):P("",!0),l.player.power_control!=e(de)?(d(),C(oe,{key:1,variant:"icon",class:"player-command-btn",onClick:r[1]||(r[1]=re(u=>{e(k).playerCommandPowerToggle(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[m(N,{size:e(j)({breakpoint:"phone"})?"30":"32"},{default:y(()=>r[2]||(r[2]=[U("mdi-power")])),_:1},8,["size"])]),_:1})):P("",!0),l.showMenuButton?(d(),C(oe,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:re(n,["stop"])},{default:y(()=>[m(N,{size:e(j)({breakpoint:"phone"})?"30":"32"},{default:y(()=>r[3]||(r[3]=[U("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):P("",!0)]}),_:1}),l.showVolumeControl?(d(),C(Ha,{key:0,player:l.player,"show-sync-controls":l.showSyncControls,"show-heading-row":!1,"show-sub-players":l.showSubPlayers,"show-volume-control":l.player.powered!=!1,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players","show-volume-control"])):P("",!0)]),_:1},8,["class","disabled"]))}}),ct=ue(bs,[["__scopeId","data-v-b3c49fd5"]]),ws={style:{float:"right","margin-right":"-20px"}},ks=F({__name:"PlayerSelect",setup(t){const i=q(!1),s=q(null),o=$(()=>Object.values(k.players).filter(v=>ut(v,!1,!1,!1)).sort((v,u)=>{var c;return v.display_name.toUpperCase()>((c=u.display_name)==null?void 0:c.toUpperCase())?1:-1}));ae(()=>a.activePlayerId,v=>{v&&localStorage.setItem("mass.LastPlayerId",v)}),ae(()=>k.players,v=>{v&&!a.activePlayer&&l()},{deep:!0}),ae(()=>k.state,v=>{v.value!=Pl.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function n(v,u=!1){a.activePlayerId==v.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=v.player_id),u&&(a.showPlayersMenu=!1)}We(()=>{l()});const l=function(){if(a.activePlayer&&ut(a.activePlayer,!1,!1,!1))return;const v=r();v&&(a.activePlayerId=v.player_id)},r=function(){const v=localStorage.getItem("mass.LastPlayerId");if(v&&v in k.players&&ut(k.players[v],!1,!1,!1))return k.players[v]};return(v,u)=>(d(),g(Y,null,[m(wa,{modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":u[0]||(u[0]=c=>e(a).showPlayersMenu=c)},null,8,["modelValue"]),e(a).showPlayersMenu?(d(),C(Va,{key:0,modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":u[3]||(u[3]=c=>e(a).showPlayersMenu=c),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[S("div",null,[m(Fe,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[S("b",null,I(v.$t("players")),1),S("div",ws,[m(oe,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[m(N,{size:"30"},{default:y(()=>u[4]||(u[4]=[U("mdi-cog-outline")])),_:1})]),_:1}),m(oe,{variant:"icon",onClick:u[1]||(u[1]=c=>e(a).showPlayersMenu=!1)},{default:y(()=>[m(N,{size:"30"},{default:y(()=>u[5]||(u[5]=[U("mdi-window-close")])),_:1})]),_:1})])]),_:1}),m(Ke),m(Be,{flat:"",style:{margin:"10px 5px 15px 5px"}},{default:y(()=>[(d(!0),g(Y,null,se(o.value.filter(c=>{var f;return[e(Ce).PLAYING,e(Ce).PAUSED].includes(c.state)||((f=e(k).queues[c.player_id])==null?void 0:f.items)>0&&c.powered!=!1}),c=>(d(),C(ct,{id:c.player_id,key:c.player_id,player:c,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&c.player_id==e(a).activePlayerId,"show-sync-controls":c.supported_features.includes(e(Ie).SET_MEMBERS),onClick:f=>n(c)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),m(Nl,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=c=>s.value=c),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[m(ea,{style:{padding:"0"}},{default:y(()=>[m(ta,null,{default:y(()=>[S("h3",null,I(v.$t("all_players")),1)]),_:1}),m(aa,{style:{padding:"0"}},{default:y(()=>[m(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(Y,null,se(o.value.filter(c=>c.type!=e(Ve).GROUP),c=>(d(),C(ct,{id:c.player_id,key:c.player_id,player:c,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&c.player_id==e(a).activePlayerId,"show-sync-controls":c.supported_features.includes(e(Ie).SET_MEMBERS),onClick:f=>n(c)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),o.value.filter(c=>c.type==e(Ve).GROUP).length?(d(),C(ea,{key:0,style:{padding:"0"}},{default:y(()=>[m(ta,null,{default:y(()=>[S("h3",null,I(v.$t("all_groups")),1)]),_:1}),m(aa,{style:{padding:"0"}},{default:y(()=>[m(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(Y,null,se(o.value.filter(c=>c.type==e(Ve).GROUP),c=>(d(),C(ct,{id:c.player_id,key:c.player_id,player:c,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&c.player_id==e(a).activePlayerId,"show-sync-controls":c.supported_features.includes(e(Ie).SET_MEMBERS),onClick:f=>n(c)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):P("",!0)],64))}}),Ps=ue(ks,[["__scopeId","data-v-4ea43865"]]);function Cs(t={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t;let v,u,c;const f=async(p=!0)=>{await u,c==null||c()};async function h(){if("serviceWorker"in navigator){if(v=await Cl(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{r==null||r(p)}),!v)return;c=()=>{v==null||v.messageSkipWaiting()};{let p=!1;const _=()=>{p=!0,v==null||v.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()}),s==null||s()};v.addEventListener("installed",b=>{typeof b.isUpdate>"u"?typeof b.isExternal<"u"&&b.isExternal?_():!p&&(o==null||o()):b.isUpdate||o==null||o()}),v.addEventListener("waiting",_)}v.register({immediate:i}).then(p=>{l?l("./sw.js",p):n==null||n(p)}).catch(p=>{r==null||r(p)})}}return u=h(),f}function Is(t={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t,v=q(!1),u=q(!1);return{updateServiceWorker:Cs({immediate:i,onNeedRefresh(){v.value=!0,s==null||s()},onOfflineReady(){u.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:l,onRegisterError:r}),offlineReady:u,needRefresh:v}}const Vs={key:0,class:"pwa-toast",role:"alert"},$s={class:"message"},Ss={key:0},Qs={key:1},Ts=F({__name:"ReloadPrompt",setup(t){const{offlineReady:i,needRefresh:s,updateServiceWorker:o}=Is(),n=async()=>{i.value=!1,s.value=!1};return(l,r)=>e(i)||e(s)?(d(),g("div",Vs,[S("div",$s,[e(i)?(d(),g("span",Ss," App ready to work offline ")):(d(),g("span",Qs," New content available, click on reload button to update. "))]),e(s)?(d(),g("button",{key:0,onClick:r[0]||(r[0]=v=>e(o)())},"Reload")):P("",!0),S("button",{onClick:n},"Close")])):P("",!0)}}),Ms=fe({...Ae(),...Ql({fullHeight:!0}),...at()},"VApp"),Bs=ye()({name:"VApp",props:Ms(),setup(t,i){let{slots:s}=i;const o=ot(t),{layoutClasses:n,getLayoutItem:l,items:r,layoutRef:v}=Sl(t),{rtlClasses:u}=_t();return he(()=>{var c;return m("div",{ref:v,class:["v-application",o.themeClasses.value,n.value,u.value,t.class],style:[t.style]},[m("div",{class:"v-application__wrap"},[(c=s.default)==null?void 0:c.call(s)])])}),{getLayoutItem:l,items:r,theme:o}}}),As=F({__name:"Default",setup(t){const i=Il();return ae([()=>i.query.player,()=>Object.keys(k.players).length],([s])=>{var l;if(!s)return;const o=s.toString().toLowerCase(),n=(l=Object.values(k.players).find(r=>r.player_id.toLowerCase()===o||r.display_name.toLowerCase()===o))==null?void 0:l.player_id;n&&(a.activePlayerId=n)},{immediate:!0}),ae(()=>i.query.showFullscreenPlayer,s=>{a.showFullscreenPlayer=!!s},{immediate:!0}),ae(()=>i.query.frameless,s=>{s&&(a.frameless=!0)},{immediate:!0}),(s,o)=>(d(),g(Y,null,[e(a).connected?(d(),C(Bs,{key:0},{default:y(()=>[e(a).frameless?(d(),C(oa,{key:0})):(d(),g(Y,{key:1},[m(Ps),m(as),m(oa)],64))]),_:1})):(d(),C(wa,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(a).connected},{default:y(()=>[S("div",null,[m(Dl,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(a).isInStandaloneMode?(d(),C(Ts,{key:2})):P("",!0)],64))}}),en=ue(As,[["__scopeId","data-v-33a00054"]]);export{en as default};
