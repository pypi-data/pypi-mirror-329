import{n as P,r as s,bg as U,y as k,cq as g,C as H,j as u,br as L,bE as B,bs as D,b9 as O,bt as j,cr as w}from"./index.DrBQDoQQ.js";import{u as _}from"./uniqueId.DzFqVlA_.js";import{u as q,a as K,b as $}from"./useOnInputChange.B7h174Ym.js";import{a as A}from"./useBasicWidgetState.Clt8VY2K.js";import{I as G}from"./InputInstructions.DxmXu3Kw.js";import{I as N}from"./input.CQjL36Th.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.J8fZuqYI.js";import"./base-input.DAIA4gfk.js";const J=P("div",{target:"e1o1zy6o0"})("position:relative;");function M({disabled:e,element:t,widgetMgr:a,fragmentId:n}){var f;const[r,l]=s.useState(I(a,t)??null),{values:[S],elementRef:y}=U(s.useMemo(()=>["width"],[])),[i,d]=s.useState(!1),W=s.useCallback(()=>{l(t.default??null),d(!0)},[t.default]),[T,c]=A({getStateFromWidgetMgr:I,getDefaultStateFromProto:Q,getCurrStateFromProto:X,updateWidgetMgrState:Y,element:t,widgetMgr:a,fragmentId:n,onFormCleared:W});q(T,r,l,i);const[x,m]=s.useState(!1),o=k(),[h]=s.useState(()=>_("text_input_")),{placeholder:C,formId:b}=t,p=s.useCallback(()=>{d(!1),c({value:r,fromUi:!0})},[r,c]),V=g({formId:b})?a.allowFormEnterToSubmit(b):i,v=x&&S>o.breakpoints.hideWidgetDetails,F=s.useCallback(()=>{i&&p(),m(!1)},[i,p]),E=s.useCallback(()=>{m(!0)},[]),R=K({formId:t.formId,maxChars:t.maxChars,setDirty:d,setUiValue:l,setValueWithSource:c}),z=$(t.formId,p,i,a,n);return H(J,{className:"stTextInput","data-testid":"stTextInput",ref:y,children:[u(j,{label:t.label,disabled:e,labelVisibility:L((f=t.labelVisibility)==null?void 0:f.value),htmlFor:h,children:t.help&&u(B,{children:u(D,{content:t.help,placement:O.TOP_RIGHT})})}),u(N,{value:r??"",placeholder:C,onBlur:F,onFocus:E,onChange:R,onKeyPress:z,"aria-label":t.label,disabled:e,id:h,type:Z(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:o.lineHeights.inputWidget,paddingRight:o.spacing.sm,paddingLeft:o.spacing.sm,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:o.sizes.minElementHeight,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth}}}}),v&&u(G,{dirty:i,value:r??"",maxLength:t.maxChars,inForm:g({formId:t.formId}),allowEnterToSubmit:V})]})}function I(e,t){return e.getStringValue(t)??null}function Q(e){return e.default??null}function X(e){return e.value??null}function Y(e,t,a,n){t.setStringValue(e,a.value,{fromUi:a.fromUi},n)}function Z(e){return e.type===w.Type.PASSWORD?"password":"text"}const lt=s.memo(M);export{lt as default};
