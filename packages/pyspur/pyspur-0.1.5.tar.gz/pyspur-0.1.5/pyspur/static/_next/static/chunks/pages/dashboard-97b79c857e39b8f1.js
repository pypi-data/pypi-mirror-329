(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{87100:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(75941)}])},75941:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var l=r(74848),s=r(96540),a=r(8640),n=r(77528),o=r(59639),i=r(72748),c=r(97151),d=r(65468),u=r(29080),m=r(86053),x=r(69231),h=r(23825),f=r(22424),p=r(33016),g=r(15445),w=r(98536),b=r(64030),y=(e,t)=>(0,b.Gv)(e)?e instanceof Array?[...e]:e[t]:e,j=r(37399),N=r(13368),v=r.n(N),k=r(86715),S=r(71468),E=r(52798),C=r(90407),I=r(28624),P=r(5147);function _(e){let{title:t,description:r,features:s,onUse:a}=e;return(0,l.jsxs)(C.Z,{className:"relative w-full",children:[(0,l.jsxs)(I.U,{className:"relative min-h-[180px] bg-gradient-to-br from-content1 to-default-100/50 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:t}),(0,l.jsx)("p",{className:"text-default-500 text-sm mb-3",children:r}),s&&s.length>0&&(0,l.jsx)("ul",{className:"list-disc pl-5 mb-2",children:s.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-center text-sm",children:[(0,l.jsx)(j.In,{icon:"solar:check-circle-linear",className:"text-green-500 mr-2"}),e]},t))})]}),(0,l.jsx)(P.Z,{className:"border-t-1 border-default-100 justify-end py-2 px-4",children:(0,l.jsx)(i.T,{color:"primary",variant:"flat",onPress:a,startContent:(0,l.jsx)(j.In,{icon:"lucide:copy",width:16}),children:"Use Template"})})]})}var T=r(88344),A=r(83785),R=r(60550),D=r(53171),L=r(85202),O=r(99881);function q(e){let{isOpen:t,onClose:r}=e,s=(0,S.wA)(),a=()=>{s((0,O.L)()),r()};return(0,l.jsx)(T.Y,{isOpen:t,onClose:a,children:(0,l.jsxs)(A.g,{children:[(0,l.jsx)(R.c,{children:"Welcome to PySpur! \uD83D\uDC4B"}),(0,l.jsxs)(D.h,{children:[(0,l.jsx)("p",{children:"PySpur is your platform for building and managing AI workflows."}),(0,l.jsx)("p",{children:"Get started by:"}),(0,l.jsxs)("ul",{className:"list-disc pl-6",children:[(0,l.jsx)("li",{children:"Creating a new Spur from scratch"}),(0,l.jsx)("li",{children:"Using one of our templates"}),(0,l.jsx)("li",{children:"Importing an existing workflow"})]})]}),(0,l.jsx)(L.q,{children:(0,l.jsx)(i.T,{color:"primary",onPress:a,children:"Get Started"})})]})})}let U=()=>((0,s.useEffect)(()=>{let e=document.querySelector('script[src="https://assets.calendly.com/assets/external/widget.js"]'),t=null;e||((t=document.createElement("script")).src="https://assets.calendly.com/assets/external/widget.js",t.async=!0,document.body.appendChild(t));let r=()=>{window.Calendly&&window.Calendly.initBadgeWidget({url:"https://calendly.com/d/cnf9-57m-bv3/pyspur-founders",text:"Talk to the founders",color:"#1a1a1a",textColor:"#ffffff"})};return e?r():t&&(t.onload=r),()=>{document.querySelectorAll(".calendly-badge-widget").forEach(e=>e.remove()),document.querySelectorAll(".calendly-inline-widget").forEach(e=>e.remove()),document.querySelectorAll(".calendly-overlay").forEach(e=>e.remove()),t&&document.body.contains(t)&&document.body.removeChild(t),window.Calendly&&delete window.Calendly}},[]),null),F=()=>{let e=(0,k.useRouter)(),[t,r]=(0,s.useState)([]),[a,b]=(0,s.useState)([]),[N,C]=(0,s.useState)([]),[I,P]=(0,s.useState)(!0),[T,A]=(0,s.useState)(!1),R=(0,S.d4)(e=>e.userPreferences.hasSeenWelcome),[D,L]=(0,s.useState)({}),[O,F]=(0,s.useState)(!0),[G,M]=(0,s.useState)(null),[W,B]=(0,s.useState)(1),[J,z]=(0,s.useState)(!0),[X,H]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{F(!0);try{let e=await (0,E.bg)(1),t=await Promise.all(e.map(e=>K(e.id))).then(t=>{let r={};return e.forEach((e,l)=>{r[e.id]=t[l]||[]}),r});r(e),A(!R&&0===e.length),L(t),z(10===e.length)}catch(e){console.error("Error fetching workflows:",e)}finally{F(!1)}})()},[R]),(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,E.yv)();b(e)}catch(e){console.error("Error fetching templates:",e)}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{P(!0);let e=await (0,E.d5)(),t=[];for(let r of e){let e=await (0,E.CG)(r);t.push({name:r,value:e.value})}C(t)}catch(e){console.error("Error fetching API keys:",e)}finally{P(!1)}})()},[]);let Z=e=>new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),K=async e=>{try{return(await (0,E.ML)(e)).slice(0,5)}catch(e){console.error("Error fetching workflow runs:",e)}},V=t=>{e.push({pathname:"/workflows/".concat(t.id)})},Y=async()=>{try{let t="New Spur ".concat(new Date().toLocaleString()),r=await (0,E.mw)({name:t,description:""});e.push("/workflows/".concat(r.id))}catch(e){console.error("Error creating new workflow:",e)}},Q=async()=>{try{let t=document.createElement("input");t.type="file",t.accept="application/json",t.onchange=async t=>{var r;let l=t.target,s=null===(r=l.files)||void 0===r?void 0:r[0];if(!s){alert("No file selected. Please try again.");return}let a=new FileReader;a.onload=async t=>{try{var r;let l=null===(r=t.target)||void 0===r?void 0:r.result;if("string"!=typeof l)return;let s=JSON.parse(l),a={name:"Imported Spur ".concat(new Date().toLocaleString()),description:s.description,definition:s.definition},n=await (0,E.mw)(a);e.push("/workflows/".concat(n.id))}catch(e){console.error("Error processing the JSON file:",e),alert("Failed to import workflow. Please ensure the file is a valid JSON.")}},a.readAsText(s)},t.click()}catch(e){console.error("Error importing workflow:",e)}},$=async t=>{try{let r=await (0,E.B)(t);e.push("/workflows/".concat(r.id))}catch(e){console.error("Error using template:",e)}},ee=async e=>{if(window.confirm('Are you sure you want to delete workflow "'.concat(e.name,'"?')))try{await (0,E.L6)(e.id),r(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Error deleting workflow:",e),alert("Failed to delete workflow. Please try again.")}},et=async e=>{try{let t=await (0,E.Fj)(e.id);r(e=>[t,...e]),M(t.id),setTimeout(()=>{M(null)},2e3)}catch(e){console.error("Error duplicating workflow:",e),alert("Failed to duplicate workflow. Please try again.")}},er=e=>{window.open("/trace/".concat(e),"_blank")},el=async()=>{H(!0);try{let e=W+1,t=await (0,E.bg)(e);if(t.length>0){let l=await Promise.all(t.map(e=>K(e.id))).then(e=>{let r={};return t.forEach((t,l)=>{r[t.id]=e[l]||[]}),r});r(e=>[...e,...t]),L(e=>(0,n._)({},e,l)),B(e),z(10===t.length)}else z(!1)}catch(e){console.error("Error loading more workflows:",e)}finally{H(!1)}};return(0,l.jsxs)("div",{className:"flex flex-col gap-2 max-w-7xl w-full mx-auto pt-2 px-6",children:[(0,l.jsx)(v(),{children:(0,l.jsx)("link",{href:"https://assets.calendly.com/assets/external/widget.css",rel:"stylesheet"})}),(0,l.jsx)(U,{}),(0,l.jsx)(q,{isOpen:T,onClose:()=>A(!1)}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("header",{className:"mb-6 flex w-full items-center flex-col gap-2",children:[!I&&(0===N.length||N.every(e=>!e.value||""===e.value))&&(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(o.B,{variant:"bordered",className:"mb-2",startContent:(0,l.jsx)(j.In,{icon:"lucide:alert-triangle",width:16}),children:"No API keys have been set. Please configure your API keys in the settings to use the application."})}),(0,l.jsxs)("div",{className:"flex w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col max-w-fit",id:"dashboard-title",children:[(0,l.jsx)("h1",{className:"text-lg font-bold text-default-900 lg:text-2xl",children:"Dashboard"}),(0,l.jsx)("p",{className:"text-small text-default-400 lg:text-medium",children:"Manage your spurs"})]}),(0,l.jsxs)("div",{className:"ml-auto flex items-center gap-2",id:"new-workflow-entries",children:[(0,l.jsx)(i.T,{className:"bg-foreground text-background dark:bg-foreground/90 dark:text-background/90",startContent:(0,l.jsx)(j.In,{className:"flex-none text-background/60",icon:"lucide:plus",width:16}),onPress:Y,children:"New Spur"}),(0,l.jsx)(i.T,{className:"bg-foreground text-background dark:bg-foreground/90 dark:text-background/90",startContent:(0,l.jsx)(j.In,{className:"flex-none text-background/60",icon:"lucide:upload",width:16}),onPress:Q,children:"Import Spur"})]})]})]}),(0,l.jsxs)(c.D,{defaultExpandedKeys:["workflows","templates"],selectionMode:"multiple",children:[(0,l.jsx)(d.R,{"aria-label":"Recent Spurs",title:(0,l.jsx)("h3",{className:"text-xl font-semibold",children:"Recent Spurs"}),children:O?(0,l.jsx)("div",{className:"flex justify-center p-4",children:(0,l.jsx)(u.o,{size:"lg"})}):t.length>0?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)(m.j,{"aria-label":"Saved Workflows",isHeaderSticky:!0,children:[(0,l.jsx)(x.X,{columns:[{key:"id",label:"ID"},{key:"name",label:"Name"},{key:"action",label:"Action"},{key:"recentRuns",label:"Recent Runs"},{key:"updated_at",label:"Last Modified"}],children:e=>(0,l.jsx)(h.e,{children:e.label},e.key)}),(0,l.jsx)(f.E,{items:t,children:e=>(0,l.jsx)(p.s,{className:"transition-colors duration-200 hover:bg-primary-50 dark:hover:bg-primary-800/10 ".concat(G===e.id?"bg-primary-50 dark:bg-primary-800/10":""),children:t=>{var r;return(0,l.jsx)(g.w,{children:"action"===t?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(j.In,{icon:"solar:pen-bold",className:"cursor-pointer text-default-400",height:18,width:18,onClick:()=>V(e),"aria-label":"Edit"}),(0,l.jsx)(j.In,{icon:"solar:copy-bold",className:"cursor-pointer text-default-400",height:18,width:18,onClick:()=>et(e),"aria-label":"Duplicate"}),(0,l.jsx)(j.In,{icon:"solar:trash-bin-trash-bold",className:"cursor-pointer text-default-400",height:18,width:18,onClick:()=>ee(e),"aria-label":"Delete"})]}):"recentRuns"===t?(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(r=D[e.id])||void 0===r?void 0:r.map(e=>(0,l.jsx)(w.R,{size:"sm",variant:"flat",className:"cursor-pointer",onClick:()=>er(e.id),children:e.id},e.id))}):"name"===t?(0,l.jsx)(w.R,{size:"sm",variant:"flat",className:"cursor-pointer",onClick:()=>V(e),children:e.name}):"updated_at"===t?(0,l.jsx)("span",{className:"text-default-500",children:Z(y(e,t))}):y(e,t)})}},e.id)})]}),J&&(0,l.jsx)("div",{className:"flex justify-center mt-4",children:(0,l.jsx)(i.T,{variant:"flat",onPress:el,isLoading:X,startContent:!X&&(0,l.jsx)(j.In,{icon:"lucide:plus",width:16}),children:X?"Loading...":"Load More"})})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 my-8 bg-background rounded-xl border-border border shadow-sm",children:[(0,l.jsxs)("div",{className:"max-w-2xl text-center mb-12",children:[(0,l.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center justify-center gap-2",children:"Welcome to PySpur!"}),(0,l.jsx)("p",{className:"text-lg text-muted-foreground",children:"Looks like you haven't created any spurs yet - let's get you started on your journey!"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center p-6 bg-background hover:bg-accent/5 rounded-xl border-border border transition-all hover:shadow-md cursor-pointer",onClick:Y,children:[(0,l.jsx)("div",{className:"rounded-full bg-background p-4 mb-4 border border-border",children:(0,l.jsx)(j.In,{icon:"lucide:plus",className:"w-8 h-8 text-foreground"})}),(0,l.jsx)("h4",{className:"text-lg font-medium mb-3 text-foreground",children:"Create New"}),(0,l.jsx)("p",{className:"text-medium text-center text-muted-foreground",children:'Start fresh with your own creation using the "New Spur" button above'})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center p-6 bg-background hover:bg-accent/5 rounded-xl border-border border transition-all hover:shadow-md cursor-pointer",onClick:Q,children:[(0,l.jsx)("div",{className:"rounded-full bg-background p-4 mb-4 border border-border",children:(0,l.jsx)(j.In,{icon:"lucide:upload",className:"w-8 h-8 text-foreground"})}),(0,l.jsx)("h4",{className:"text-lg font-medium mb-3 text-foreground",children:"Import Existing"}),(0,l.jsx)("p",{className:"text-medium text-center text-muted-foreground",children:'Have a spur saved as JSON? Use the "Import Spur" button to bring it in'})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center p-6 bg-background hover:bg-accent/5 rounded-xl border-border border transition-all hover:shadow-md cursor-pointer",onClick:()=>{let e=document.querySelector('[aria-label="Spur Templates"]');null==e||e.scrollIntoView({behavior:"smooth"})},children:[(0,l.jsx)("div",{className:"rounded-full bg-background p-4 mb-4 border border-border",children:(0,l.jsx)(j.In,{icon:"lucide:layout-grid",className:"w-8 h-8 text-foreground"})}),(0,l.jsx)("h4",{className:"text-lg font-medium mb-3 text-foreground",children:"Use Template"}),(0,l.jsx)("p",{className:"text-medium text-center text-muted-foreground",children:"Get started quickly with our ready-to-go templates in the section below"})]})]})]})},"workflows"),(0,l.jsx)(d.R,{"aria-label":"Spur Templates",title:(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Spur Templates"}),children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1 px-1 mb-8",children:a.map(e=>(0,l.jsx)(_,{title:e.name,description:e.description,features:e.features,onUse:()=>$(e)},e.file_name))})},"templates")]})]})]})},G=()=>(0,l.jsxs)("div",{className:"App relative",children:[(0,l.jsx)(a.A,{activePage:"dashboard"}),(0,l.jsx)(F,{})]})}},e=>{var t=t=>e(e.s=t);e.O(0,[998,872,27,640,636,593,792],()=>t(87100)),_N_E=e.O()}]);